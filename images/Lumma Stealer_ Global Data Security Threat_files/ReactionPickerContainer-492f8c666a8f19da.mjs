(self.modernJsonp=self.modernJsonp||[]).push([["23102"],{536217(e,t,i){i.d(t,{A:()=>n});function n(e,t){e.classList?e.classList.add(t):(e.classList?t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" "))||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}},81342(e,t,i){function n(e,t){return e.replace(RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function s(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=n(e.className,t):e.setAttribute("class",n(e.className&&e.className.baseVal||"",t))}i.d(t,{A:()=>s})},610355(e,t,i){i.d(t,{A:()=>_});var n=i(109346),s=i(408789),r=i(203632),a=i(536217),o=i(81342),l=i(859471),c=i(658289);let d=l.createContext(null);var p="unmounted",u="exited",h="entering",m="entered",g="exiting",f=function(e){function t(t,i){var n,s=e.call(this,t,i)||this,r=i&&!i.isMounting?t.enter:t.appear;return s.appearStatus=null,t.in?r?(n=u,s.appearStatus=h):n=m:n=t.unmountOnExit||t.mountOnEnter?p:u,s.state={status:n},s.nextCallback=null,s}(0,r.A)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===p?{status:u}:null};var i=t.prototype;return i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(e){var t=null;if(e!==this.props){var i=this.state.status;this.props.in?i!==h&&i!==m&&(t=h):(i===h||i===m)&&(t=g)}this.updateStatus(!1,t)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var e,t,i,n=this.props.timeout;return e=t=i=n,null!=n&&"number"!=typeof n&&(e=n.exit,t=n.enter,i=void 0!==n.appear?n.appear:t),{exit:e,enter:t,appear:i}},i.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===h?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===u&&this.setState({status:p})},i.performEnter=function(e){var t=this,i=this.props.enter,n=this.context?this.context.isMounting:e,s=this.props.nodeRef?[n]:[c.findDOMNode(this),n],r=s[0],a=s[1],o=this.getTimeouts(),l=n?o.appear:o.enter;(e||i)&&1?(this.props.onEnter(r,a),this.safeSetState({status:h},function(){t.props.onEntering(r,a),t.onTransitionEnd(l,function(){t.safeSetState({status:m},function(){t.props.onEntered(r,a)})})})):this.safeSetState({status:m},function(){t.props.onEntered(r)})},i.performExit=function(){var e=this,t=this.props.exit,i=this.getTimeouts(),n=this.props.nodeRef?void 0:c.findDOMNode(this);t?(this.props.onExit(n),this.safeSetState({status:g},function(){e.props.onExiting(n),e.onTransitionEnd(i.exit,function(){e.safeSetState({status:u},function(){e.props.onExited(n)})})})):this.safeSetState({status:u},function(){e.props.onExited(n)})},i.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},i.setNextCallback=function(e){var t=this,i=!0;return this.nextCallback=function(n){i&&(i=!1,t.nextCallback=null,e(n))},this.nextCallback.cancel=function(){i=!1},this.nextCallback},i.onTransitionEnd=function(e,t){this.setNextCallback(t);var i=this.props.nodeRef?this.props.nodeRef.current:c.findDOMNode(this),n=null==e&&!this.props.addEndListener;if(!i||n)return void setTimeout(this.nextCallback,0);if(this.props.addEndListener){var s=this.props.nodeRef?[this.nextCallback]:[i,this.nextCallback],r=s[0],a=s[1];this.props.addEndListener(r,a)}null!=e&&setTimeout(this.nextCallback,e)},i.render=function(){var e=this.state.status;if(e===p)return null;var t=this.props,i=t.children,n=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,s.A)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return l.createElement(d.Provider,{value:null},"function"==typeof i?i(e,n):l.cloneElement(l.Children.only(i),n))},t}(l.Component);function x(){}f.contextType=d,f.propTypes={},f.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:x,onEntering:x,onEntered:x,onExit:x,onExiting:x,onExited:x},f.UNMOUNTED=p,f.EXITED=u,f.ENTERING=h,f.ENTERED=m,f.EXITING=g;var b=function(e,t){return e&&t&&t.split(" ").forEach(function(t){return(0,o.A)(e,t)})},y=function(e){function t(){for(var t,i=arguments.length,n=Array(i),s=0;s<i;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,i){var n=t.resolveArguments(e,i),s=n[0],r=n[1];t.removeClasses(s,"exit"),t.addClass(s,r?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,i)},t.onEntering=function(e,i){var n=t.resolveArguments(e,i),s=n[0],r=n[1];t.addClass(s,r?"appear":"enter","active"),t.props.onEntering&&t.props.onEntering(e,i)},t.onEntered=function(e,i){var n=t.resolveArguments(e,i),s=n[0],r=n[1]?"appear":"enter";t.removeClasses(s,r),t.addClass(s,r,"done"),t.props.onEntered&&t.props.onEntered(e,i)},t.onExit=function(e){var i=t.resolveArguments(e)[0];t.removeClasses(i,"appear"),t.removeClasses(i,"enter"),t.addClass(i,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var i=t.resolveArguments(e)[0];t.addClass(i,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var i=t.resolveArguments(e)[0];t.removeClasses(i,"exit"),t.addClass(i,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,i){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,i]},t.getClassNames=function(e){var i=t.props.classNames,n="string"==typeof i,s=n&&i?i+"-":"",r=n?""+s+e:i[e],a=n?r+"-active":i[e+"Active"],o=n?r+"-done":i[e+"Done"];return{baseClassName:r,activeClassName:a,doneClassName:o}},t}(0,r.A)(t,e);var i=t.prototype;return i.addClass=function(e,t,i){var n,s=this.getClassNames(t)[i+"ClassName"],r=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===i&&r&&(s+=" "+r),"active"===i&&e&&e.scrollTop,s&&(this.appliedClasses[t][i]=s,n=s,e&&n&&n.split(" ").forEach(function(t){return(0,a.A)(e,t)}))},i.removeClasses=function(e,t){var i=this.appliedClasses[t],n=i.base,s=i.active,r=i.done;this.appliedClasses[t]={},n&&b(e,n),s&&b(e,s),r&&b(e,r)},i.render=function(){var e=this.props,t=(e.classNames,(0,s.A)(e,["classNames"]));return l.createElement(f,(0,n.A)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(l.Component);y.defaultProps={classNames:""},y.propTypes={};let _=y},138015(e,t,i){i.r(t),i.d(t,{default:()=>s});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ReactionPickerContainer_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],type:"Pin",abstractKey:null};n.hash="bd3117d2ad737afd60bcf377d60eb57f";let s=n},267707(e,t,i){i.r(t),i.d(t,{default:()=>P});var n=i(61163),s=i(859471),r=i(106386),a=i(19821),o=i(427471),l=i(562615);let c="cubic-bezier(0, 0, 0.58, 1)",d={loaded:{opacity:1,transitionDuration:"0.20s",transitionTimingFunction:c,transitionProperty:"transform, opacity",transform:"translate(0, 5px)",transformOrigin:"center"},fade:{opacity:.1,transitionDuration:"0.30s",transitionTimingFunction:c,transitionProperty:"transform, opacity",transform:"translate(0, 5px)",transformOrigin:"center"}};function p({reactionLabel:e,handleHideConfirmation:t}){(0,s.useEffect)(()=>{(0,n.A)("ReactionConfirmation","/app/common/react/components/Reactions/ReactionConfirmation.tsx")},[]);let[i,r]=(0,s.useState)("loaded"),o=(0,s.useRef)(null);return(0,s.useEffect)(()=>{let e,i;return o.current=requestAnimationFrame(()=>{e=setTimeout(()=>r("fade"),1e3),i=setTimeout(()=>t(),1300)}),function(){clearTimeout(e),clearTimeout(i)}},[]),(0,l.jsx)(a.az,{alignItems:"center",display:"flex",justifyContent:"center",position:"relative",children:(0,l.jsx)(a.az,{alignItems:"center",color:"selected",dangerouslySetInlineStyle:{__style:{...d[i],whiteSpace:"nowrap"}},display:"flex",height:20,justifyContent:"center",paddingX:2,paddingY:1,position:"absolute",rounding:"pill",zIndex:new a.rk(2),children:(0,l.jsx)(a.KJ,{color:"inverse",overflow:"normal",size:"100",weight:"bold",children:e})})})}var u=i(538329),h=i(131094),m=i(506581),g=i(678358);let f={icon:{backgroundRepeat:"no-repeat",backgroundSize:"cover"},loading:{opacity:0,transitionDuration:"0.25s",transitionTimingFunction:"ease-out",transitionProperty:"transform, opacity",transform:"scaleX(1) scaleY(1) translateZ(0) translateY(25px)",transformOrigin:"bottom"},loaded:{opacity:1,transitionDuration:"0.2s",transitionTimingFunction:"ease-out",transitionProperty:"transform, opacity",transform:"scaleX(1) scaleY(1)",transformOrigin:"bottom"},clicked:{transition:"transform 0.2s ease-out",transform:"translateY(-30px) scaleX(1.6) scaleY(1.6)",transformOrigin:"bottom",position:"relative",zIndex:1},flying:{transition:"transform 0.2s ease-out",transformOrigin:"bottom"},label:{transition:"transform 0.2s ease-out",transform:"scale(0.625)",transformOrigin:"bottom",whiteSpace:"nowrap"},fading:{opacity:0,transition:"opacity 0.2s ease-out"}},x={boxShadow:"0 9px 26px rgba(0, 0, 0, 0.4)"};function b({reactionButtonRect:e,handleReactionTrayClick:t,shouldShowReactionTrayUp:i}){(0,s.useEffect)(()=>{(0,n.A)("ReactionTray","/app/common/react/components/Reactions/ReactionTray.tsx")},[]);let r=(0,u.A)(),o=(0,s.useRef)(null),[c,d]=(0,s.useState)("loading"),[p,b]=(0,s.useState)(""),[y,_]=(0,s.useState)(),{closeupWithinMasonryEnabled:v}=(0,g._G)(),[w,A]=(0,s.useState)(!1),[E,C]=(0,s.useState)(!1),[j,S]=(0,s.useState)({}),[k]=(0,s.useState)(e),[I,P]=(0,s.useState)(-150),T=(0,s.useRef)(void 0),R=(0,s.useRef)({}),z=o.current?.getBoundingClientRect();(0,s.useEffect)(()=>{z?.right&&z?.right>(window.innerWidth||document.documentElement?.clientWidth)&&(-276!==I?C(!0):C(!1),P(-276))},[z?.right,I,v]),(0,s.useEffect)(()=>{let e,t;"loading"===c&&(T.current=requestAnimationFrame(()=>d("loaded"))),A(!0),e={...j},m.LI.forEach(t=>{R.current[t]&&(!e[t]||E)&&(e[t]=R.current[t].getBoundingClientRect())}),Object.keys(e).length===m.LI.length&&S(e),!y&&w&&(t={...y},m.LI.forEach(e=>{let i=j[e],{left:n,top:s}=k,{left:r,top:a}=i;t[e]={translateX:n-r+-8,translateY:s-a+9}}),_(t))},[w,I,e]);let O=()=>{"clicked"===c&&p&&(d("flying"),setTimeout(()=>{t(p)},750))},B=m.LI.map((e,t)=>{let{staticAsset:i,animatedAsset:n,label:s,htmlStyle:o,animationStyle:d}=(0,m.N9)(e,r),u={loadedStyle:{transitionDelay:`${.08*t}s`,...f[c]},clickedStyle:{...p===e?f.clicked:f.loaded},flyingStyle:{...y&&p===e?{transform:`translateZ(0) translateX(${y[e].translateX}px) translateY(${y[e].translateY}px) scaleX(0.6) scaleY(0.6) `,...f[c]}:f.fading}},g={};return"loading"===c||"loaded"===c?g={...u.loadedStyle}:"clicked"===c?g={...u.clickedStyle}:"flying"===c&&(g={...u.flyingStyle}),(0,l.jsx)(a.az,{alignSelf:"center",display:"flex",justifyContent:"between",children:(0,l.jsxs)(a.az,{ref:t=>{R.current[e]=t},alignItems:"center",dangerouslySetInlineStyle:{__style:{...g}},display:"flex",justifyContent:"center",maxHeight:40,maxWidth:40,overflow:"visible",position:"relative",children:[p!==e&&(0,l.jsx)(a.az,{bottom:!0,left:!0,position:"absolute",right:!0,top:!0,children:(0,l.jsx)(a.az,{dangerouslySetInlineStyle:{__style:{backgroundImage:`url(${i})`,backgroundPosiiton:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"}},height:40,width:40})}),(0,l.jsxs)(a.az,{alignItems:"center",direction:"column",display:"flex",justifyContent:"center",position:"relative",children:[(0,l.jsx)(h.A,{unsafeCSS:o}),p===e&&"clicked"===c&&(0,l.jsx)(a.az,{alignItems:"center",color:"selected",dangerouslySetInlineStyle:{__style:f.label},display:"flex",height:20,justifyContent:"center",paddingX:2,paddingY:1,rounding:"pill",children:(0,l.jsx)(a.KJ,{color:"inverse",overflow:"normal",size:"100",weight:"bold",children:s})}),(0,l.jsx)("div",{onClick:O,onKeyDown:O,role:"presentation",children:(0,l.jsx)(a.az,{alignItems:"center",dangerouslySetInlineStyle:{__style:{...f.icon,...p===e&&"clicked"===c?{animation:d}:{},backgroundImage:`url(${n})`}},display:"flex",height:40,justifyContent:"center",width:40})})]})]})},t)});return(0,l.jsx)(a.az,{ref:o,alignItems:"center",dangerouslySetInlineStyle:{__style:{marginLeft:v?void 0:I,marginTop:!v&&i?-(80+k.height):0}},display:"flex",justifyContent:"center",position:v?void 0:"absolute",children:(0,l.jsx)(a.az,{alignItems:"center",color:"flying"===c?"transparent":"default",dangerouslySetInlineStyle:{__style:{...!v&&"flying"!==c?x:{}}},display:"flex",height:80,justifyContent:"center",onMouseMove:e=>{let{clientX:t}=e;if(o.current){let e=v?t-o.current.getBoundingClientRect().left:t;if("flying"!==c){let t,i=(w&&m.LI.forEach(i=>{let n=j[i];if(n&&n.left&&n.right){let{left:s,right:r}=n;e>=s&&e<=r&&(t=i)}}),t||null);i!==p&&b(i),d("clicked")}}},rounding:"pill",width:300,children:(0,l.jsx)(a.az,{alignItems:"center",display:"flex",justifyContent:"around",paddingX:5,width:"100%",children:B})})})}var y=i(586733),_=i(948641),v=i(296221),w=i(693154),A=i(601185),E=i(870540),C=i(847753),j=i(162497),S=i(280667);function k(e,t,i){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class I extends s.PureComponent{constructor(...e){super(...e),k(this,"state",{isConfirmationShowing:!1,isHoveringOverTray:!1,isReactionTrayShowing:!1,reactionButtonRect:null}),k(this,"reactionButtonRef",(0,s.createRef)()),k(this,"trayOpenTimer",null),k(this,"trayCloseTimer",null),k(this,"isHoveringOverButton",!1),k(this,"handleReactForAuthViewer",(e=7)=>{let{clientTrackingParams:t,pinId:i,pinUpdateReactionCount:n,reactionByMe:s}=this.props,r={pin_id:i,reaction_type:e,client_tracking_params:t,...this.props.orbacSubjectId?{orbac_subject_id:this.props.orbacSubjectId}:Object.freeze({})};s&&n(i,!1,s),n(i,!0,e),o.A.create("ReactionsResource",r).callUpdate()}),k(this,"handleUnreactForAuthViewer",()=>{let{clientTrackingParams:e,pinId:t}=this.props,i={pin_id:t,client_tracking_params:e,...this.props.orbacSubjectId?{orbac_subject_id:this.props.orbacSubjectId}:Object.freeze({})};o.A.create("ReactionsResource",i).callDelete()}),k(this,"setReactionButtonRect",()=>{if(this.reactionButtonRef?.current&&this.reactionButtonRef.current instanceof HTMLElement){let e=this.reactionButtonRef.current.getBoundingClientRect();this.setState({reactionButtonRect:e})}}),k(this,"closeTray",()=>{let{handleReactionTrayHover:e}=this.props;this.setState({isReactionTrayShowing:!1}),e&&e(!1)}),k(this,"startTrayCloseTimer",()=>{this.trayCloseTimer&&clearTimeout(this.trayCloseTimer),this.trayCloseTimer=setTimeout(()=>{let{isHoveringOverTray:e}=this.state;e||this.isHoveringOverButton||this.closeTray()},300)}),k(this,"handleOnHoverTray",()=>{this.setState({isHoveringOverTray:!0})}),k(this,"handleExitTrayWithDelay",()=>{this.setState({isHoveringOverTray:!1}),this.startTrayCloseTimer()}),k(this,"handleClickButton",()=>{let{clientTrackingParams:e,requireAuth:t,component:i,pinId:n,pinUpdateReactionCount:s,reactionByMe:r,viewParameter:a,viewType:o,logContextEvent:l}=this.props;r?(s(n,!1,r),t?t():this.handleUnreactForAuthViewer()):this.setReaction("love"),this.closeTray(),l({event_type:101,view_type:o||3,view_parameter:a||139,...i?{component:i}:Object.freeze({}),element:11354,object_id_str:n,clientTrackingParams:e})}),k(this,"setReaction",e=>{let{requireAuth:t,i18n:i}=this.props;t?t():this.handleReactForAuthViewer((0,m.N9)(e,i).type),this.handleShowConfirmation()}),k(this,"handleShowConfirmation",()=>{this.setState({isConfirmationShowing:!0})}),k(this,"handleHideConfirmation",()=>{this.setState({isConfirmationShowing:!1},this.startTrayCloseTimer)})}componentDidMount(){this.setReactionButtonRect(),window.addEventListener("mouseover",this.setReactionButtonRect)}componentWillUnmount(){this.trayOpenTimer&&clearTimeout(this.trayOpenTimer),this.trayCloseTimer&&clearTimeout(this.trayCloseTimer),window.removeEventListener("mouseover",this.setReactionButtonRect)}render(){let{isReactionTrayShowing:e,reactionButtonRect:t,isConfirmationShowing:i}=this.state,{iconColor:n="default",idealDirection:s,reactionByMe:r,shouldShowReactionTrayUp:o=!1,showTooltip:c,closeupWithinMasonryEnabled:d}=this.props,u=r&&m.UK[r]?m.UK[r]:"default",{label:h}=(0,m.N9)(u,this.props.i18n,{default:"darkGray",inverse:"white",light:"light"}[n]),g=e&&!!t&&!!t.left&&!!t.top&&(0,l.jsx)(b,{handleReactionTrayClick:this.setReaction,reactionButtonRect:t,shouldShowReactionTrayUp:o}),f=this.props.i18n._('React', 'Closeup.ReactionPicker.Icon', 'Icon for reacting to current pin');return(0,l.jsxs)(a.az,{position:"relative",children:[(0,l.jsx)(a.K0,{accessibilityLabel:f,dataTestId:"react-button",icon:r?"heart-fill":"heart",iconColor:r?"error":void 0,onClick:this.handleClickButton,tooltip:{text:f}}),c&&!e&&!i&&(0,l.jsx)(v.am,{anchor:this.reactionButtonRef?.current,experienceIds:[501977,501995],flyoutSize:"sm",idealDirection:"down",placementId:12}),e&&!!t&&!!t.left&&!!t.top&&(0,l.jsx)(a.so,{alignItems:"center",justifyContent:"center",children:(0,l.jsx)(a.ib,{top:0,children:(0,l.jsx)(a.Rp,{onMouseEnter:this.handleOnHoverTray,onMouseLeave:this.handleExitTrayWithDelay,onTap:this.handleExitTrayWithDelay,children:d?(0,l.jsx)(a.Wd,{zIndex:new a.rk(j.MI),children:(0,l.jsx)(a.AM,{__overflow:"visible",anchor:this.reactionButtonRef?.current,idealDirection:s,onDismiss:this.closeTray,positionRelativeToAnchor:!1,size:"xl",children:g})}):g})})}),!d&&i&&!!r&&h&&(0,l.jsx)(p,{handleHideConfirmation:this.handleHideConfirmation,reactionLabel:h})]})}}function P(e){(0,s.useEffect)(()=>{(0,n.A)("ReactionPickerContainer","/app/common/react/components/Reactions/ReactionPickerContainer.tsx")},[]);let{logContextEvent:t}=(0,y.o)(),i=(0,u.A)(),a=(0,_.A)(),o=(0,E.A)(),c=(0,w.A)(),d=(0,C.H7)(c,o),p=(0,r.wA)(),{closeupWithinMasonryEnabled:h}=(0,g._G)(),{checkExperiment:m}=(0,A.A)();return(0,l.jsx)(I,{...e,checkExperiment:m,closeupWithinMasonryEnabled:h,i18n:i,logContextEvent:t,orbacSubjectId:d,pinUpdateReactionCount:(e,t,i)=>p((0,S.XZ)(e,t,i)),requireAuth:a})}},401691(e,t,i){i.d(t,{$y:()=>c,Ae:()=>_,BB:()=>n,Cj:()=>x,E7:()=>h,I$:()=>m,IV:()=>y,Jz:()=>p,NJ:()=>E,Ng:()=>w,RR:()=>l,SD:()=>u,Sq:()=>C,Wy:()=>I,Xc:()=>v,Yn:()=>r,ZJ:()=>g,b6:()=>j,bj:()=>f,fE:()=>k,hV:()=>A,jW:()=>s,qg:()=>o,sX:()=>b,t5:()=>S,ub:()=>a,zA:()=>d});let n="hasAppInstalledWasLogged",s="unauthHistories",r="authHistories",a="trackHistoryClickInternalUrl",o="lastVisitedSessionPages",l="HAS_SEEN_LOGIN_MODAL",c="navigationalModalPagesSeen",d="urlBeforeAccessDenied",p="_bottomRightUpsellDismissed",u="_profileVisibilityShowReviewFollowers",h="openUnauthType",m="boardSessionId",g="transactionKey",f="campaignIdKey",x="campaignIdsKey",b="SEEN_NAV_UPSELL",y="isPPMAndroidUnauthExperience",_="showedAppUpsellCurrentSession",v="keychainAutologinDisabled",w="msmrsfiiab",A="ufausfiiab",E="fallbackAttempt",C="businessAccessUUID",j="orbacActiveProfile",S="orbacVisibility",k="lastOnHomefeed",I="lensImageData"},813787(e,t,i){i.r(t),i.d(t,{default:()=>I});var n=i(61163),s=i(859471),r=i(19821),a=i(427471),o=i(706114),l=i(586733),c=i(605775),d=i(668014),p=i(652709),u=i(567176),h=i(693154),m=i(538329),g=i(542975),f=i(844255),x=i(430705),b=i(618243),y=i(218358),_=i(998556),v=i(607685),w=i(706466),A=i(971289),E=i(770697),C=i(81920),j=i(562615);let S=(0,s.lazy)(()=>i.e("51065").then(i.bind(i,384899))),k=new r.K5([E.f]);function I({handleComplete:e,isNag:t}){(0,s.useEffect)(()=>{(0,n.A)("Banner","/app/packages/CookieConsent/Banner.tsx")},[]);let i=(0,A.Ay)(),E=(0,h.A)(),{logContextEvent:I}=(0,l.o)(),P=(0,s.use)(p.l),T=P?.setObserverRef||(()=>{}),R=(0,m.A)(),z=(0,s.useCallback)(()=>E.isAuth?13716:15456,[E.isAuth]),O=(0,s.useCallback)(()=>E.isAuth?474:747,[E.isAuth]),[B,D]=(0,s.useState)(!0),[L,M]=(0,s.useState)(!1),{showOneToast:N}=(0,w.CG)(),W=(0,x.A)({name:"UserResource",options:{user_id:E.isAuth&&E.id||""}}),F=(0,f._8)(),V="desktop"===i;(0,s.useEffect)(()=>{I({event_type:13,component:z(),view_type:O()})},[I,z,O]);let U=e=>{(0,c.xP)(F),(0,_.y1)().setItem(o.lD,{[F.unauthId]:{allow_analytic_cookies:e.allow_analytic_cookies??!1,allow_marketing_cookies:e.allow_marketing_cookies??!1,allow_personalization_cookies:e.allow_personalization_cookies??!1}})},H=(0,j.jsxs)(r.KJ,{align:V?"start":"center",children:[R._('We use cookies to deliver personalized ads and experiences, and to analyze traffic on our site.', 'homeFeed.cookiesConsentBanner.bannerText', 'Banner description about why we use cookies')," ",(0,g.vQ)(R._('Read our {{ cookiePolicyLink }} for more information.', 'homeFeed.cookiesConsentBanner.readCookiePolicyText', 'Banner description about why we use cookies. "cookiePolicyLink" equals to "Cookie Policy" for english'),{cookiePolicyLink:(0,j.jsx)(r.KJ,{inline:!0,weight:"bold",children:(0,j.jsx)(r.N_,{display:"inlineBlock",href:v.Q$y,target:"blank",underline:"hover",children:R._('cookie policy', 'homeFeed.cookiesConsentBanner.cookiePolicyLink', 'Cookie policy link')},"cookie-policy-link")})})]}),$=(0,j.jsxs)(r.so,{direction:V?"row":"column",gap:V?{row:2,column:0}:{column:4,row:0},children:[(0,j.jsx)(r.$n,{fullWidth:!0,onClick:()=>{I({event_type:101,component:z(),view_type:O(),element:11984}),(0,C.GV)("webapp.updateCookiePreferences",{sampleRate:.1,tags:{allow_analytic_cookies:"true",allow_marketing_cookies:"true",allow_personalization_cookies:"true",location:"app_packages_CookieConsent_Banner_handleAcceptAll"}}),E.isAuth?a.A.create("UserSettingsResource",{allow_analytic_cookies:!0,allow_marketing_cookies:!0,allow_personalization_cookies:!0,surface_tag:y.r.HOLISTIC_PROFILE_PROMPT}).callUpdate().then(()=>{W.refresh(),N(({hideToast:e})=>(0,j.jsx)(u.A,{duration:3e3,onHide:e,text:R._('We saved your cookie preferences. You can change them in the settings section of your profile at any time.', 'homeFeed.cookiesConsentBanner.acceptedAllToastText', 'Success message after accepting all optional cookies')})),e()}):(U({allow_analytic_cookies:!0,allow_marketing_cookies:!0,allow_personalization_cookies:!0}),N(({hideToast:e})=>(0,j.jsx)(u.A,{duration:3e3,onHide:e,text:R._('We saved your cookie preferences. You can change them in the settings section of your profile at any time.', 'homeFeed.cookiesConsentBanner.acceptedAllToastText', 'Success message after accepting all optional cookies')})),e())},size:V?"lg":"md",text:R._('Accept all', 'navFooter.cookieConsentBanner.acceptAllButton', 'Accept all cookies button')}),(0,j.jsx)(r.$n,{fullWidth:!0,onClick:()=>{I({event_type:101,component:z(),view_type:O(),element:11985}),(0,C.GV)("webapp.updateCookiePreferences",{sampleRate:.1,tags:{allow_analytic_cookies:"false",allow_marketing_cookies:"false",allow_personalization_cookies:"false",location:"app_common_react_components_CookieConsent_Banner_handleRejectAll"}}),E.isAuth?a.A.create("UserSettingsResource",{allow_analytic_cookies:!1,allow_marketing_cookies:!1,allow_personalization_cookies:!1,surface_tag:y.r.HOLISTIC_PROFILE_PROMPT}).callUpdate().then(()=>{W.refresh(),N(({hideToast:e})=>(0,j.jsx)(u.A,{duration:3e3,onHide:e,text:R._('We saved your cookie preferences. You can change them in the settings section of your profile at any time.', 'homeFeed.cookiesConsentBanner.acceptedAllToastText', 'Success message after accepting all optional cookies')})),e()}):(U({allow_analytic_cookies:!1,allow_marketing_cookies:!1,allow_personalization_cookies:!1}),N(({hideToast:e})=>(0,j.jsx)(u.A,{duration:3e3,onHide:e,text:R._('We saved your cookie preferences. You can change them in the settings section of your profile at any time.', 'homeFeed.cookiesConsentBanner.acceptedAllToastText', 'Success message after accepting all optional cookies')})),e())},size:V?"lg":"md",text:R._('Reject all', 'navFooter.cookieConsentBanner.rejectAllButton', 'Manage cookie settings button')}),(0,j.jsx)(r.$n,{fullWidth:!0,onClick:()=>{I({event_type:101,component:z(),view_type:O(),element:11986}),M(!0),V||D(!1)},size:V?"lg":"md",text:R._('Let me choose', 'navFooter.cookieConsentBanner.manageCookiesButton', 'Manage cookie settings button')})]});return(0,j.jsxs)(s.Fragment,{children:[B&&(V?(0,j.jsx)(r.az,{ref:T,paddingX:2,paddingY:2,smPaddingX:6,smPaddingY:2*!!t,children:(0,j.jsxs)(r.az,{alignItems:"center",borderColor:"decorative",borderWidth:"sm",color:E.isAuth?"transparent":void 0,dangerouslySetInlineStyle:E.isAuth?void 0:{__style:{backgroundColor:"var(--base-color-grayscale-50)"}},"data-test-id":"cookie-consent-banner",direction:"column",display:"flex",justifyContent:"between",marginBottom:6*!t,overflow:"hidden",padding:t?3:6,position:"relative",rounding:400,smDirection:"row",children:[(0,j.jsx)(r.az,{display:"flex",marginEnd:0,smMarginEnd:7,children:H}),(0,j.jsx)(r.az,{alignItems:"center",display:"flex",flex:"none",justifyContent:"center",marginTop:4,smMarginTop:0,children:$})]})}):(0,j.jsx)(r.Wd,{zIndex:k,children:(0,j.jsx)(r.az,{ref:T,bottom:!0,marginBottom:2,position:"fixed",width:"100%",children:(0,j.jsxs)(r.az,{alignItems:"center",color:"default",direction:"column",display:"flex",elevation:"shadowFloating",marginEnd:"auto",marginStart:"auto",padding:6,rounding:600,width:"95%",children:[H,(0,j.jsx)(r.az,{marginTop:4,minWidth:240,children:$})]})})})),L&&(0,j.jsx)(d.A,{name:"SafeSuspense_CookieConsentBanner_SettingsModal",children:(0,j.jsx)(b.A,{children:(0,j.jsx)(r.az,{"data-test-id":"settings-modal",children:(0,j.jsx)(S,{dismissIcon:"close",handleComplete:e,onClose:()=>M(!1)})})})})]})}},605775(e,t,i){i.d(t,{N2:()=>c,On:()=>d,jU:()=>l,mK:()=>p,xP:()=>u});var n=i(706114),s=i(501407),r=i(601185),a=i(998556);let o=new Set(s.A);function l(e){let{countryFromIp:t,countryFromHostName:i,regionFromIp:n}=e;return!!t&&o.has(t)||!!i&&o.has(i)||"CA-QC"===n}function c(e){return l(e)&&!(0,a.y1)().getItem(n.lD)?.[e.unauthId]}function d(e){let{checkExperiment:t}=(0,r.A)();return l(e)&&(t("dweb_unauth_cookie_consent_modal",{dangerouslySkipActivation:!0}).anyEnabled||t("dweb_unauth_cookie_consent_banner",{dangerouslySkipActivation:!0}).anyEnabled)}function p(e){let{checkExperiment:t}=(0,r.A)();return l(e)&&(t("mweb_unauth_cookie_consent_modal",{dangerouslySkipActivation:!0}).anyEnabled||t("mweb_unauth_cookie_consent_banner",{dangerouslySkipActivation:!0}).anyEnabled)}function u(e){(0,a.gE)({countryFromHostName:e.countryFromHostName||"",countryFromIp:e.countryFromIp||"",regionFromIp:e.regionFromIp,isAuthenticated:e.isAuthenticated,unauthId:e.unauthId,unauthConsent:!0})}},131094(e,t,i){i.d(t,{A:()=>o});var n=i(61163),s=i(859471);i(829597);var r=i(562615);class a{static factory(e){return e instanceof a?e:new a(String(e))}constructor(e){this._private_safe_value=e.trim().replace(">",">").replace("<","<").replace("&","&").replace('"','"').replace("'","'")}toString(){return this._private_safe_value}}function o(e){(0,s.useEffect)(()=>{(0,n.A)("InlineStyle","/app/packages/InlineStyle.tsx")},[]);let{css:t,unsafeCSS:i,...o}=e,l=String(t||"")||i||"";return l?(0,r.jsx)("style",{...o,dangerouslySetInnerHTML:{__html:String(a.factory(l))}}):null}},642883(e,t,i){i.d(t,{A:()=>n});function n(e){return("u"<typeof window||!Object.prototype.hasOwnProperty.call(window,"requestAnimationFrame"))&&e&&e(),window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{e&&e()})})}},283652(e,t,i){i.d(t,{Lc:()=>r,Mc:()=>s,gJ:()=>a});var n=i(19821);let s=new n.rk(3),r=new n.K5([s]),a=new n.K5([r])},743372(e,t,i){i.d(t,{A:()=>s});var n=i(586733);let s=()=>(0,n.o)().logContextEvent},201593(e,t,i){i.d(t,{D2:()=>_,be:()=>g,ee:()=>h,fO:()=>x,xq:()=>m,zC:()=>f});var n=i(859471),s=i(601185),r=i(844255),a=i(998556),o=i(981147),l=i(752159),c=i(971289);let d="dark",p="light",u="auto",h="rgba(17, 17, 17, 1)",m="rgba(17, 17, 17, 0)",g="rgb(43, 43, 43)",f="#767676",x="rgba(0,0,0, 0.8)",b=()=>"u">typeof window&&null!=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,y=(e,t)=>`${t?"dweb":"mweb"}.dark_mode.${e}`;function _(){let{theme:e,isAuthenticated:t}=(0,r._8)(),i=(0,c.qJ)(),h=(0,c.M)(),m=(0,c.wI)(),{checkExperiment:g}=(0,s.A)(),f=t&&(0,o.A)("theme")&&(h||m||i&&g("dweb_dark_mode").anyEnabled),x=f&&e===d,[_,v]=(0,n.useState)(()=>x?d:p),[w,A]=(0,n.useState)(!1),E=f&&(x||_===d||_===u&&w);return(0,n.useEffect)(()=>{let e,t=(e=(0,a.y1)().getItem("theme"))===d||e===p||e===u?e:p;v(t),t===u&&A(b())},[t]),(0,n.useEffect)(()=>{f&&E&&(document.body.style.backgroundColor="var(--sema-color-background-default)")},[f,E]),(0,n.useEffect)(()=>{if(_!==u||"u"<typeof window||null==window.matchMedia)return;let e=window.matchMedia("(prefers-color-scheme: dark)"),t=e=>{A(e.matches)};return e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[_]),{isDarkMode:E,isDarkModeSupported:f,enableMode:e=>{if(e===u){let e=b();A(e),(0,a.y1)().setItem("theme",u),(0,l.PM)(y(e?"enable":"disable",i))}else e===d?((0,a.y1)().setItem("theme",d),(0,l.PM)(y("enable",i))):((0,a.y1)().setItem("theme",p),(0,l.PM)(y("disable",i)));v(e),window.location.reload()},followsSystemSetting:_===u}}},162036(e,t,i){i.d(t,{Bh:()=>a,Bw:()=>n,Mm:()=>s,R2:()=>o,rQ:()=>r});let n=e=>e._('You\'re almost there! Log in to access all of Pinterest', 'loginModal.limitedLogin.subheader', 'Subheader text on personalized login modal/flyout to remind users to log in'),s=e=>e._('Log in to save this Pin', 'limitedLogin.modalHeader.repin', 'Title on mobile web limited login modal to prompt users to login after they clicked save button.'),r=e=>e._('Log in to edit this Pin', 'limitedLogin.modalHeader.editPin', 'Title on mobile web limited login modal to prompt users to login after they clicked edit button.'),a=({i18n:e,toFollow:t})=>t?e._('Log in to follow', 'limitedLogin.modalHeader.follow', 'Title on mobile web limited login modal to prompt users to login to follow a user or board.'):e._('Log in to unfollow', 'limitedLogin.modalHeader.unfollow', 'Title on mobile web limited login modal to prompt users to login to unfollow a user or board.'),o=e=>e._('Log in to create a Pin or board', 'limitedLogin.modalHeader.create', 'Title on mobile web limited login modal to prompt users to login to create a Pin or board.')},948641(e,t,i){i.d(t,{A:()=>a});var n=i(162036),s=i(538329),r=i(168620);let a=()=>{let{loginForMore:e,viewer:t,limitedLoginModalSubheader:i}=(0,r.x)(),a=(0,s.A)();return"AUTH"===t.type?null:t=>{e?.setVisible(!0),i?.setText(t?.loginModalHeader||(0,n.Bw)(a))}}},358203(e,t,i){i.d(t,{A:()=>b});var n=i(61163),s=i(859471),r=i(19821),a=i(822727),o=i(915047),l=i(79906),c=i(62963),d=i(307424),p=i(386379),u=i(971289),h=i(584342),m=i(562615);let g=new r.rk(h.d1),f=new r.K5([g]),x=({complete:e,dismiss:t,experience:{display_data:i},isMobile:n})=>{let{titleText:s,detailedText:a,completeButton:u,dismissButton:h}=(0,c.A)(d.A)(i),{setObserverRef:g}=(0,o.NM)(),x=n?"center":"start",b=!!u&&(0,p.A)({url:u.uri});return(0,m.jsx)(r.Wd,{zIndex:f,children:(0,m.jsx)(l.Ay,{accessibilityModalLabel:s,footer:(0,m.jsxs)(r.az,{dangerouslySetInlineStyle:{__style:{flexWrap:"wrap-reverse"}},display:"flex",justifyContent:n?"center":"end",children:[h&&(0,m.jsx)(r.az,{fit:!0,flex:n?"grow":"none",minWidth:n?130:void 0,padding:1,children:(0,m.jsx)(r.$n,{color:"secondary",fullWidth:n,onClick:t,size:"lg",text:h.text})}),u&&(0,m.jsx)(r.az,{fit:!0,flex:n?"grow":"none",minWidth:n?130:void 0,padding:1,children:(0,m.jsx)(r.vx,{color:"primary",fullWidth:n,href:u.uri,onClick:()=>e(),rel:b?"nofollow":"none",size:"lg",text:u.text})})]}),heading:(0,m.jsx)(r.az,{marginTop:2*!!n,children:(0,m.jsxs)(r.so,{justifyContent:"between",children:[(0,m.jsx)(r._Y,{accessibilityLevel:1,size:"600",children:s}),!n&&(0,m.jsx)(r.K0,{accessibilityLabel:"Dismiss modal",bgColor:"default",icon:"close",iconColor:"default",onClick:t,size:"sm"})]})}),onDismiss:t,size:"sm",children:(0,m.jsx)(r.az,{ref:g,padding:6,children:(0,m.jsx)(r.KJ,{align:x,children:a})})})})};function b({experience:e,placementId:t}){(0,s.useEffect)(()=>{(0,n.A)("ExperienceActionPrompt","/app/packages/experiences/Experiences/ExperienceActionPrompt/ExperienceActionPrompt.tsx")},[]);let i=(0,u.M)(),{enableExperienceSession:r,endOnSurfaceChange:l}=(0,o.wQ)(t);return(0,m.jsx)(a.Ay,{eligibleTypes:[14],enableExperienceSession:r,experience:e,placementId:t,sessionEndOnSurfaceChange:l,children:({complete:e,dismiss:t,experience:n})=>(0,m.jsx)(x,{complete:e,dismiss:t,experience:n,isMobile:i})})}},788792(e,t,i){i.d(t,{A:()=>u});var n=i(61163),s=i(859471),r=i(19821),a=i(562615);class o extends s.Component{renderFlyout(){let{anchor:e,tooltip:t,handleDismiss:i,handleComplete:n}=this.props;if(!t)return null;let{cancelButtonText:s,confirmButtonText:o,mainText:l,idealDirection:c="down"}=t,d=s&&!!i&&o&&n;return(0,a.jsx)(r.fT,{anchor:e,idealDirection:c,message:l,onDismiss:i,primaryAction:{onClick:d?i:n,text:d?String(s):String(o),role:"button"},size:"flexible"})}render(){let{anchor:e}=this.props;return e?this.renderFlyout():null}componentDidMount(){(0,n.A)("LegacyToolTipPulsar","/app/packages/experiences/Experiences/ExperienceAnchor/LegacyToolTipPulsar.tsx")}}var l=i(731237),c=i(616911),d=i(62963),p=i(307424);function u({anchor:e,anchorElementRef:t,children:i,containerBoxConfig:u,experience:h,isHidden:m,onCompleteClick:g,zIndex:f}){(0,s.useEffect)(()=>{(0,n.A)("ExperienceAnchor","/app/packages/experiences/Experiences/ExperienceAnchor/ExperienceAnchor.tsx")},[]);let{completeExperience:x,dismissExperience:b,experiences:y,viewExperience:_}=(0,l.WJ)(),v=(({anchor:e,anchorExperiences:t,passedExperience:i})=>i||(t?t[e]:null))({anchor:e,anchorExperiences:Object.values(y).reduce((e,t)=>{let i=(0,c.al)(t);return 8===t.type&&i&&(e[i]=t),e},{}),passedExperience:h}),w=v?.display_data?.delay||0,[A,E]=(0,s.useState)(!!w);if((0,s.useEffect)(()=>{if(w>0&&A){let e=setTimeout(()=>{E(!1)});return()=>clearTimeout(e)}return()=>{}},[w,A]),(0,s.useEffect)(()=>{!A&&v&&_(v.placement_id,v.experience_id)},[A,v,_]),!v||A||m)return s.Children.only(i);let C=(e=>{let{display_data:t}=e;return t.tooltip&&(t.tooltip={...t.tooltip.options,...t.tooltip},delete t.tooltip.options),(0,d.A)(p.A,!0)(t)})(v),j=()=>{v.display_data?.complete_on_hover&&x(v.placement_id,v.experience_id)};return(0,a.jsxs)(r.az,{display:u?.display,height:u?.height,position:"relative",children:[(0,a.jsx)(r.Rp,{onMouseEnter:j,onTap:()=>{g&&g(),C.skipComplete||x(v.placement_id,v.experience_id)},children:s.Children.only(i)}),(0,a.jsx)(o,{anchor:t||null,handleComplete:()=>{t instanceof HTMLElement&&t.click()},handleDismiss:e=>{e?.event&&e.event.stopPropagation(),b(v.placement_id,v.experience_id)},handlePulsarCompleteOnHover:j,pulserOnly:!!C.pulserOnly,tooltip:C.tooltip,zIndex:f})]})}},111196(e,t,i){i.r(t),i.d(t,{default:()=>S});var n=i(61163),s=i(859471),r=i(610355),a=i(19821),o=i(813787),l=i(822727),c=i(915047),d=i(131094),p=i(62963),u=i(844255),h=i(307424),m=i(538329),g=i(742375),f=i(562615);let x=()=>{};function b({color:e,completeButtonText:t,completeButtonUrl:i,completeButtonUrlInNewTab:r,dismissButtonText:a,handleComplete:o=x,handleDismiss:l=x,header:c="",headerSubtitle:d=""}){(0,s.useEffect)(()=>{(0,n.A)("Hero","/app/packages/ui/Hero.tsx")},[]);let p=(0,m.A)();return(0,f.jsx)(g.A,{color:e,completeButtonText:t||p._('Go', 'Completing the Hero banner', 'Completing the Hero banner'),completeUrl:i,dismissButtonText:a||p._('Close', 'Closing a Hero banner', 'Closing a Hero banner'),external:r,message:(c+" "+d).trim(),onComplete:o,onDismiss:l})}var y=i(168079);let _=function({handleDismiss:e=()=>{},header:t="",headerSubtitle:i="",dismissButtonText:n=""}){let s=(0,m.A)();return(0,f.jsx)(g.A,{dismissButtonText:n||s._('Got it', 'dismissButton.hero.dismissText', 'Dismissing the Hero banner'),message:`${t} ${i}`,onDismiss:e})},v=function({color:e="default",completeButtonText:t,completeButtonUrl:i,completeButtonUrlInNewTab:n,handleComplete:s=()=>{},header:r="",headerSubtitle:a=""}){let o=(0,m.A)();return(0,f.jsx)(g.A,{color:e,completeButtonText:t||o._('Go', 'Completing the Hero banner', 'Completing the Hero banner'),completeUrl:i,external:n,message:(r+" "+a).trim(),onComplete:s})};var w=i(989457),A=i(693154),E=i(542975);function C({completeButtonText:e,headerSubtitle:t,handleComplete:i,handleDismiss:r}){(0,s.useEffect)(()=>{(0,n.A)("WelcomeHero","/app/www/nux/WelcomeHero.tsx")},[]);let o=(0,m.A)(),l=(0,A.A)(),c=l.isAuth?l?.avatar_color_index:void 0,{firstName:d="",imageLargeUrl:p=""}=l.isAuth?l:{};return(0,f.jsx)(a.az,{display:"flex",justifyContent:"center",position:"relative",children:(0,f.jsxs)(a.az,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:"#EBF4FE"}},display:"flex",elevation:"shadowFloating",justifyContent:"between",marginBottom:2,marginEnd:8,marginStart:8,marginTop:4,padding:8,position:"relative",rounding:400,width:1016,children:[(0,f.jsxs)(a.so,{alignItems:"center",justifyContent:"start",children:[(0,f.jsx)(a.az,{marginBottom:-2,marginEnd:6,marginTop:-2,children:(0,f.jsx)(w.eu,{color:c,name:d,outline:!0,size:"lg",src:p})}),(0,f.jsxs)(a.so,{alignItems:"stretch",direction:"column",justifyContent:"center",children:[(0,f.jsx)(a.az,{marginBottom:2,children:(0,f.jsx)(a._Y,{size:"400",children:(0,E.vQ)(o._('Welcome back, {{ name }}', 'shown on a banner, "welcome back, first_name"', 'shown on a banner, "welcome back, first_name"'),{name:d})})}),(0,f.jsx)(a.KJ,{children:t})]})]}),(0,f.jsx)(a.az,{marginEnd:4,children:(0,f.jsx)(a.$n,{color:"tertiary",onClick:i,size:"lg",text:e})}),(0,f.jsx)(a.az,{padding:2,position:"absolute",right:!0,top:!0,children:(0,f.jsx)(a.K0,{accessibilityLabel:o._('Close', 'accessible label for close button', 'accessible label for close button'),icon:"close",iconColor:"default",onClick:r,size:"sm"})})]})})}let j=({complete:e,dismiss:t,experience:{display_data:i,experience_id:n},completeButtonUrl:l,onDismiss:d})=>{let[m,g]=(0,s.useState)(!1),x=(0,u._8)(),w=(0,s.useRef)(null);l&&(i.complete_button_url=l);let{setObserverRef:A}=(0,c.NM)(),E=(e=>{switch(e){case 502597:return o.default;case 500863:return C;case 501153:case 501487:return v;default:return b}})(n),j={requestContext:x,experienceId:n,handleComplete:e,handleDismiss:()=>{d&&d(),t()},color:E===_?"dark":"infoBase",...(0,p.A)(h.A)(i)};(0,y.A)(()=>{m||g(!0)});let S=(0,s.useCallback)((e=null)=>{A(e),w.current=e},[A]);return(0,f.jsx)(r.A,{classNames:"ExperienceHero",in:m,nodeRef:w,timeout:400,unmountOnExit:!0,children:(0,f.jsx)(a.az,{ref:S,marginBottom:4,children:(0,f.jsx)(E,{...j})})})};function S({completeButtonUrl:e,onDismiss:t,placementId:i}){(0,s.useEffect)(()=>{(0,n.A)("ExperienceHero","/app/packages/experiences/Experiences/ExperienceHero/ExperienceHero.tsx")},[]);let{enableExperienceSession:r,endOnSurfaceChange:a}=(0,c.wQ)(i),o=`
.ExperienceHero-enter {
  opacity: 0;
  transform: translateY(-50px);
}

.ExperienceHero-enter-active {
  opacity: 1;
  transform: none;
  transition: all 400ms ease-out;
}

.ExperienceHero-exit {
  opacity: 1;
}

.ExperienceHero-exit-active {
  opacity: 0;
  transition: opacity 400ms ease-out;
}
`;return(0,f.jsxs)(s.Fragment,{children:[(0,f.jsx)(d.A,{unsafeCSS:o}),(0,f.jsx)(l.Ay,{eligibleTypes:[13],enableExperienceSession:r,placementId:i,sessionEndOnSurfaceChange:a,children:({complete:i,dismiss:n,experience:s})=>(0,f.jsx)(j,{complete:i,completeButtonUrl:e,dismiss:n,experience:s,onDismiss:t})})]})}},822727(e,t,i){i.d(t,{Ay:()=>b});var n=i(61163),s=i(859471),r=i(106386),a=i(743372),o=i(668014),l=i(932369),c=i(915047),d=i(156411),p=i(828323),u=i(168079),h=i(562615);function m(e,t,i){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class g extends s.Component{constructor(...e){super(...e),m(this,"state",{hasCompleted:[],hasDismissed:[]}),m(this,"experienceEligibility",!1),m(this,"view",()=>{let{experience:e,isBackendExperience:t,targeting:i,viewExperience:n,viewExperienceObject:s,session:r}=this.props;e&&"viewed"!==e.status&&(r?.startSession(),t?(e.status="viewed",s(e)):i?n(e.placement_id,e.experience_id,i):n(e.placement_id,e.experience_id))}),m(this,"complete",e=>{let{completeExperience:t,completeExperienceObject:i,experience:n,isBackendExperience:s,preventRemoval:r,targeting:a}=this.props,o=e||1;if(n&&!this.state.hasCompleted.includes(n.experience_id)){let{placement_id:e,experience_id:l}=n||{},c=r||2===o;(1===o||c)&&e&&l&&(s?i(n,c):a?t(e,l,c,a):t(e,l,c),this.props.session?.endSession("complete"),this.setState(e=>({hasCompleted:[...e.hasCompleted,l]})))}}),m(this,"dismiss",()=>{let{dismissExperience:e,dismissExperienceObject:t,experience:i,isBackendExperience:n,preventRemoval:s,targeting:r}=this.props;if(!i)return;let{placement_id:a,experience_id:o}=i;i&&!this.state.hasDismissed.includes(o)&&(n?t(i):r?e(a,o,!!s,r):e(a,o,!!s),this.props.session?.endSession("dismiss"),this.setState(e=>({hasDismissed:[...e.hasDismissed,o]})))}),m(this,"isEligibleExperience",e=>{if(!e)return!1;let{eligibleIds:t,eligibleTypes:i,predicate:n,eligibleSchemas:s}=this.props,{experience_id:r,type:a,display_data:o}=e;return 1!==r&&(t&&t.length?t.includes(r):i&&i.length?!!i.includes(a)&&(!s||!s.length||s.includes(o?.sub_schema_type)):!n||n(e))})}setEligibility(){let{experience:e}=this.props,t=this.isEligibleExperience(e);this.experienceEligibility!==t&&(this.experienceEligibility=t)}componentDidMount(){if((0,n.A)("Experience","/app/packages/experiences/Framework/Experience.tsx"),this.props.disableAutoView)return;let{experience:e}=this.props;e&&this.isEligibleExperience(e)&&this.view(),this.setEligibility()}componentDidUpdate(e){if(this.props.disableAutoView)return;let t=e.experience,i=this.props.experience,n=this.isEligibleExperience(i);if(!i||!n)return void this.setEligibility();let s=t?.experience_id!==i.experience_id,r=n&&!this.experienceEligibility;(!t||s||r)&&(this.setEligibility(),this.view())}render(){let{children:e,experience:t,disableAutoView:i}=this.props;return t&&this.isEligibleExperience(t)?"function"==typeof e?e({experience:t,complete:this.complete,dismiss:this.dismiss,...i?{view:this.view}:Object.freeze({}),sessionSetObserverRef:this.props.session?.setObserverRef}):s.Children.only(e):null}}function f(e){(0,s.useEffect)(()=>{(0,n.A)("Experience","/app/packages/experiences/Framework/Experience.tsx")},[]);let t=(0,p.E3)(),i=(0,r.d4)(({experiences:t})=>e.experience||(e.placementId?t[e.placementId]:void 0));(0,u.A)(()=>{t?.checkUsePlacementCalls(e.placementId,i?.experience_id)});let o=(0,r.wA)(),d=(0,l.Hy)(),m=(0,l._4)(),f=(0,l.Dz)(),x=(0,a.A)(),b=(0,c.NM)();return(0,h.jsx)(g,{...e,completeExperience:(e,t,i,n)=>o(d(e,t,i,!1,{},n)),completeExperienceObject:(e,t)=>o((0,l.Pl)(x)(e,t)),dismissExperience:(e,t,i,n)=>o(m(e,t,i,!1,void 0,n)),dismissExperienceObject:e=>o((0,l.sj)(e)),experience:i,session:b,viewExperience:(e,t,i)=>o(f(e,t,!1,!1,void 0,i)),viewExperienceObject:e=>o((0,l.fE)(x)(e))})}function x({enableExperienceSession:e=!1,customExperienceSession:t=!1,...i}){let n=(0,r.d4)(({experiences:e})=>i.experience||(i.placementId?e[i.placementId]:void 0)),s=e;s&&t&&(s=!!n&&d.r.includes(n.experience_id));let a=n&&n.experience_id,o=n?n.placement_id:i.placementId,l=n&&n.id;return(0,h.jsx)(c.AU,{enable:s,endOnSurfaceChange:i.sessionEndOnSurfaceChange,experienceId:a,id:l,placementId:o,children:(0,h.jsx)(f,{...i,experience:n})})}function b(e){return(0,s.useEffect)(()=>{(0,n.A)("Experience","/app/packages/experiences/Framework/Experience.tsx")},[]),(0,h.jsx)(o.A,{name:"ExperienceComponent",children:(0,h.jsx)(x,{...e})})}m(g,"defaultProps",{eligibleIds:[],eligibleTypes:[],eligibleSchemas:[]})},156411(e,t,i){i.d(t,{K:()=>n,r:()=>s});let n=[{placementId:11,endOnSurfaceChange:!0},{placementId:40001,endOnSurfaceChange:!0},{placementId:29,endOnSurfaceChange:!0},{placementId:12,endOnSurfaceChange:!0},{placementId:1000088,endOnSurfaceChange:!0},{placementId:1000468,endOnSurfaceChange:!0},{placementId:1000168,endOnSurfaceChange:!0},{placementId:1000235,endOnSurfaceChange:!0},{placementId:1000264,endOnSurfaceChange:!0}],s=[506124,506436,504943,505226,505111,505801,507575,502535,500331,506046,506879,507502,505933,506791,502669,506234,505047,505471,506234,505974,505201,502407,505541,506473,506921,502157,502004,506469,506930,508312,508591]},696264(e,t,i){i.d(t,{IO:()=>y,Ip:()=>d,PJ:()=>m,QR:()=>p,WQ:()=>c,if:()=>f,j6:()=>x,lP:()=>v,nA:()=>u,oe:()=>h,uG:()=>b,wj:()=>g});var n=i(586958),s=i(160750),r=i(616911),a=i(81920);class o{constructor({name:e,placedExperienceId:t,message:i}){this.name=e,this.placedExperienceId=t,this.message=i}log(){r.$1.warn(`[ExperienceSessions] - Warning: ${this.name} for experience ${this.placedExperienceId} - ${this.message}`,{placedExperienceId:this.placedExperienceId})}}class l extends Error{constructor({name:e,placedExperienceId:t,customMessage:i}){super(i),this.name=e,this.placedExperienceId=t,Object.setPrototypeOf(this,l.prototype)}}class c extends l{constructor({placedExperienceId:e,customMessage:t}){let i=`Error occurred while creating an IntersectionObserver for experience with id ${e}.`;super({customMessage:t??i,name:"IntersectionObserver",placedExperienceId:e})}}class d extends l{constructor({placedExperienceId:e,customMessage:t}){let i=`Attempted to create a timestamp without an observer for experience with id ${e}.`;super({customMessage:t??i,name:"TimeStampNoObserver",placedExperienceId:e})}}class p extends l{constructor({placedExperienceId:e,customMessage:t,currentState:i,newState:n}){let r=`Invalid time stamp state transition: ${(0,s.H)(i,n)}.
Dropping time stamp.`;super({customMessage:t??r,name:"InvalidStateTransition",placedExperienceId:e}),(0,a.GV)("experience_sessions_invalid_state_transition",{sampleRate:1,tags:{placedExperienceId:e,transition:(0,s.H)(i,n)}})}}class u extends l{constructor({placedExperienceId:e,customMessage:t}){let i=`Attempted to remove an experience with id ${e} from an empty session map.`;super({customMessage:t??i,name:"RemoveOnEmptySessionMap",placedExperienceId:e})}}class h extends l{constructor({placedExperienceId:e,customMessage:t}){let i=`Attempted to remove a non-existent experience with id ${e}.`;super({customMessage:t??i,name:"RemoveOnMissingExperience",placedExperienceId:e})}}class m extends l{constructor(e,t,i,n){let s=[{value:e,name:"Placed Experience ID"},{value:t,name:"Experience ID"},{value:i,name:"Placement ID"}].filter(e=>!e.value).map(e=>e.name);super({customMessage:s.length>0?`${s.join(" and ")} ${s.length>1?"are":"is"} required for this operation.`:n??"",name:"InvalidIdError",placedExperienceId:e||""})}}class g extends l{constructor({placedExperienceId:e,customMessage:t}){let i=`No start state found in the timeline for experience with id ${e}.`;super({customMessage:t??i,name:"NoStart",placedExperienceId:e})}}class f extends l{constructor({placedExperienceId:e,customMessage:t}){let i=`Total duration calculated is negative for experience with id ${e}.`;super({customMessage:t??i,name:"NegativeTotal",placedExperienceId:e})}}class x extends l{constructor({placedExperienceId:e,customMessage:t}){let i=`Timeline ended without an end state for experience with id ${e}.`;super({customMessage:t??i,name:"NoEnd",placedExperienceId:e})}}class b extends l{constructor({placedExperienceId:e,customMessage:t}){let i=`Total duration calculated is not a valid number for experience with id ${e}.`;super({customMessage:t??i,name:"InvalidTotal",placedExperienceId:e})}}class y extends o{constructor({placedExperienceId:e,customMessage:t}){let i=`Attempted to resume without a pause timestamp for experience with id ${e}. Was the session started before app focus?`;super({message:t??i,name:"TimeStampNoPause",placedExperienceId:e})}}let _=[u,h,m,g,f,x,b];function v(e,t,i,s,a){return(...o)=>{try{return e(...o)}catch(e){if(e instanceof Error){let i=(_.some(t=>e instanceof t)?e.placedExperienceId:s)||"0:unknown";r.$1.error(`[Experience Session] - ${t} - ${e.name}:${e.message}`);let[a,o]=i.split(":");(0,n.p)(t,e.name,o||"0",Number(a))}else{let i=String(e);r.$1.error(`[Experience Session] - ${t} - Error: ${i}`),(0,n.V)(e,t)}return a&&a(),i}}}},652709(e,t,i){i.d(t,{A:()=>r,l:()=>n});let{Provider:n,get:s}=(0,i(987628).A)("ExperienceSessionContext"),r=s},279037(e,t,i){i.d(t,{A:()=>s});var n=i(156411);function s(e){let t=e=>{let t=n.K.find(t=>t.placementId===e);return{enableExperienceSession:!!t,endOnSurfaceChange:!!t?.endOnSurfaceChange}};return e?{...t(e),isSessionEnabledPlacement:t}:{enableExperienceSession:void 0,endOnSurfaceChange:void 0,isSessionEnabledPlacement:t}}},915047(e,t,i){i.d(t,{AU:()=>w,wQ:()=>A.A,OP:()=>g,NM:()=>v.A});var n=i(859471),s=i(106386),r=i(979638),a=i(932369),o=i(696264);let{Provider:l,get:c,getMaybe:d}=(0,i(987628).A)("ExperienceSessionManagerContext");var p=i(492072),u=i(616911),h=i(168079),m=i(562615);function g({children:e}){let t=(0,n.useRef)({}),i=(0,r.zy)(),c=(0,s.wA)(),d=(0,a.My)(),g=()=>0===Object.values(t.current).length||0===Object.keys(t.current).length,f=e=>{if(e)return t.current[e]},x=(0,n.useCallback)(e=>{let i=e.getId();return t.current[i]=e,u.$1.log(`[Experience Sessions] - Added experience with id ${i} to experiences in session map.
View ExperienceInSession object added: `,t.current[i]),t.current[i]},[]),b=(0,n.useCallback)((e,i="unknown")=>{(0,o.lP)(()=>{if(0===Object.values(t.current).length)throw new o.nA({placedExperienceId:e});if(!t.current[e])throw new o.oe({placedExperienceId:e});t.current[e].addTimeStamp(i,!1,"end"),t.current[e].disconnect(),u.$1.log(`[Experience Session] - Ended experience with id ${e} to experiences in session map with reason '${i}'.
View time stamps for experience: `,t.current[e].getTimeline(),`
Full experience in session object: `,t.current[e]),(0,p.A)({placedExperienceId:e,experienceId:t.current[e].getExperienceId(),placementId:t.current[e].getPlacementId(),timeline:t.current[e].getTimelineDeepCopy(),endReason:i}),c(d(t.current[e].getPlacementId(),t.current[e].getExperienceId())),delete t.current[e]},"removeExperience",void 0,e)()},[d,c]),y=e=>{g()||Object.values(t.current).forEach(e=>{(0,o.lP)(()=>{e.hasInitiated()&&b(e.id,"page-unload")},"endOnPageLeave",void 0,e.id)()})},_=(0,n.useCallback)(()=>{g()||Object.values(t.current).forEach(e=>{(0,o.lP)(()=>{e.getLocation()!==i.pathname&&e.getEndOnSurfaceChange()&&e.hasInitiated()&&b(e.getId(),"surface-exit")},"endOnSurfaceChange",void 0,e.getId())()})},[i,b]),v=()=>{g()||document.activeElement&&"IFRAME"===document.activeElement.tagName&&(u.$1.warn("[Experience Session] - Ignoring pauseOnPageBlur event in iframe"),1)||Object.values(t.current).forEach(e=>{(0,o.lP)(()=>{e.hasInitiated()&&(e.addTimeStamp("blur",!1,"paused"),u.$1.log(`[Experience Session] - Pausing experience ${e.getId()} session.`))},"pauseOnPageBlur",void 0,e.getId())()})},w=()=>{g()||Object.values(t.current).forEach(e=>{(0,o.lP)(()=>{if(e.hasInitiated())if(e.getTimeline().length<2)new o.IO({placedExperienceId:e.id}).log(),e.restart();else{let t=e.getStateToResumeTo();e.addTimeStamp("focus",t,"resumed"),u.$1.log(`[Experience Session] - Resuming experience ${e.getId()} session from paused state with inView status: ${t}.`)}},"resumeOnPageFocus",void 0,e.getId())()})};(0,n.useEffect)(()=>{_()},[i,_]),(0,h.A)(()=>(u.$1.log("[Experience Sessions] -  Debug enabled!"),window.addEventListener("beforeunload",y),window.addEventListener("blur",v),window.addEventListener("focus",w),()=>{window.removeEventListener("beforeunload",y),window.removeEventListener("blur",v),window.removeEventListener("focus",w)}));let A=(0,n.useMemo)(()=>({experiencesInSession:t.current,getExperience:f,addExperience:x,removeExperience:b}),[t,x,b]);return(0,m.jsx)(l,{value:A,children:e})}var f=i(61163),x=i(160750);function b(e,t,i){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let y={start:["active","paused","end"],active:["active","end","paused"],paused:["resumed","paused","end"],resumed:["active","end","paused"],end:[],unknown:["start"]};class _{constructor(e,t,i,n,s,r=null,a=[],l=null){b(this,"inView",!1),b(this,"state","unknown"),b(this,"lastInitiator",null),b(this,"endReason",null),b(this,"intersectionTrigger",([e])=>{let t=this.inView;(0,o.lP)(()=>{e?.isIntersecting?this.inView=!0:this.inView=!1,this.addTimeStamp("IntersectionObserver",this.inView,0===this.timeline.length?"start":"active"),u.$1.log(`[Experience Sessions] - ${this.inView?" In View":" Out of View"}`)},"IntersectionObserver",void 0,this.id,()=>{this.inView=t})()}),b(this,"handleTransitionEdgeCases",(e,t,i,n)=>{let s=(0,x.H)(e,t);return"paused->active"===s&&"IntersectionObserver"===i&&(this.addTimeStamp("IntersectionObserver",n,"paused",0),u.$1.warn(`[Experience Sessions] -  ${s} transition detected with initiator ${i}. Switching to 'paused' state instead.`),!0)}),this.id=e,this.experienceId=t,this.placementId=i,this.location=n,this.endOnSurfaceChange=s,this.observer=r,this.timeline=a,this.elementNode=l,l&&this.initiateObserver(l)}restart(){(0,o.lP)(()=>{this.timeline=[],u.$1.log("[Experience Sessions] - Restarting timeline for experience ",this.id)},"restart",void 0,this.id)}disconnect(){(0,o.lP)(()=>{if(!this.observer)throw new o.WQ({placedExperienceId:this.id,customMessage:"disconnect() - Attempted to disconnect observer, but it has not been initiated yet."});this.observer.disconnect(),this.observer=null},"ExperienceInSession.disconnect",void 0,this.id)()}initiateObserver(e){if(e&&!this.observer)this.observer=new IntersectionObserver(this.intersectionTrigger,{root:null,rootMargin:"0px",threshold:.1}),this.elementNode=e,this.observer.observe(e);else{if(e?.isEqualNode(this.elementNode)){this.observer?.observe(e),this.elementNode=e,u.$1.log(`[Experience Sessions] - Resuming experience ${this.id}.`,e);return}u.$1.warn("[Experience Sessions] - Attempted to initiate observer with a null node or an existing observer. Node:",e)}}hasInitiated(){return null!==this.observer&&null!==this.elementNode&&"unknown"!==this.state}addTimeStamp(e,t,i="unknown",n){if(!this.hasInitiated()&&"start"!==i)throw new o.Ip({placedExperienceId:this.id});let s=this.getLastTimeStamp()?.state||"unknown";if(!y[s].includes(i)){if(this.handleTransitionEdgeCases(s,i,e,t))return!0;throw new o.QR({placedExperienceId:this.id,currentState:s,newState:i})}return this.timeline.push({time:n||(0,u.JY)(),initiator:e,inView:t,state:i}),this.state=i,this.inView=t,this.lastInitiator=e,"end"===i&&"blur"!==e&&"focus"!==e&&"IntersectionObserver"!==e&&"restart"!==e&&(this.endReason=e),!0}setEndReason(e){this.endReason=e}isInView(){return this.inView}getSessionState(){return this.timeline?.[this.timeline.length-1]?.state??"unknown"}getLastTimeStamp(){return this.timeline.length>0?this.timeline[this.timeline.length-1]:void 0}getTimeStampBeforePause(){for(let e=this.timeline.length-1;e>=0;e-=1){let t=this.timeline[e];if(!t||"active"===t.state||"resumed"===t.state)break;if("paused"===t.state)if(e-1>=0)return this.timeline[e-1];else break}}getStateToResumeTo(){let e=this.getLastTimeStamp();if(e&&"paused"===e.state&&"IntersectionObserver"===e.initiator)return e.inView;let t=this.getTimeStampBeforePause();return void 0===t&&new o.IO({placedExperienceId:this.id}).log(),t?.inView??!1}getState(){return{inView:this.inView,state:this.state,lastInitiator:this.lastInitiator,endReason:this.endReason}}getTimelineDeepCopy(){return this.timeline.map(e=>({...e}))}getId(){return this.id}getExperienceId(){return this.experienceId}getPlacementId(){return this.placementId}getLocation(){return this.location}getEndOnSurfaceChange(){return this.endOnSurfaceChange}getElementNode(){return this.elementNode}getObserver(){return this.observer}getTimeline(){return this.timeline}getLength(){return this.timeline.length}}var v=i(652709);function w({children:e,id:t,experienceId:i,placementId:s,enable:a=!0,endOnSurfaceChange:l=!0}){(0,n.useEffect)(()=>{(0,f.A)("SessionWrapper","/app/packages/experiences/Framework/Sessions/Components/SessionWrapper.tsx")},[]);let c=d(),p=!a||!c,{getExperience:u,addExperience:h,removeExperience:g}=c||{getExperience:()=>void 0,addExperience:()=>void 0,removeExperience:()=>void 0},x=(0,n.useRef)(u(t)??null),b=(0,n.useRef)(null),y=(0,r.zy)(),w=(0,n.useCallback)(()=>{(0,o.lP)(()=>{if(!p){if(!t||!i||!s)throw new o.PJ(t,i,s);x.current||(x.current=new _(t,i,s,y.pathname,l,null,void 0,b.current),h(x.current))}},"startSession",void 0,t)()},[t,i,s,x,h,p,y,l]),A=(0,n.useCallback)(e=>{(0,o.lP)(()=>{if(!p){if(!t||!i||!s)throw new o.PJ(t,i,s);x.current?.hasInitiated()&&g(t,e)}},"endView",void 0,t)()},[t,i,s,x,g,p]),E=(0,n.useCallback)(e=>{(0,o.lP)(()=>{p||(x.current?x.current.initiateObserver(e):b.current=e)},"setObserverRef",void 0,t)()},[x,p,t]),C=(0,n.useMemo)(()=>({startSession:w,endSession:A,experienceInView:x.current,setObserverRef:E}),[w,A,x,E]);return(0,m.jsx)(v.l,{value:C,children:e})}var A=i(279037);i(586958)},586958(e,t,i){i.d(t,{V:()=>r,p:()=>s});var n=i(81920);let s=async(e,t,i,s)=>{(0,n.GV)("experience_framework.view_duration.error",{sampleRate:1,tags:{func:e,type:t,experience_id:i,placement_id:s}})},r=async(e,t)=>{let i=e instanceof Error?e.message:String(e);(0,n.GV)("experience_framework.view_duration.unknown_error",{sampleRate:1,tags:{function:t,error:i}})}},492072(e,t,i){i.d(t,{A:()=>a});var n=i(696264),s=i(616911),r=i(81920);let a=e=>{let{placedExperienceId:t,experienceId:i,placementId:a,endReason:o,timeline:l}=e;(0,n.lP)(()=>{let e=function(e,t){let i,s=t.findIndex(e=>"start"===e.state);if(-1===s)throw new n.wj({placedExperienceId:e});let r=e=>{if(void 0===i)return i=e.inView,!1;let t=i===e.inView;return i=e.inView,t},a=!0,o=0,l=!1;for(let e of t.slice(s)){let t=e.inView?-e.time:e.time;if(e.inView&&(l=!0),"end"===e.state){r(e)||(o+=t),a=!1;break}"resumed"===e.state&&(a=!0),a&&(r(e)||(o+=t),"paused"===e.state&&(a=!1))}if(l||(o=0),a)throw new n.j6({placedExperienceId:e});if(o<0)throw new n.if({placedExperienceId:e});if("number"!=typeof o||Number.isNaN(o))throw new n.uG({placedExperienceId:e});return o}(t,l);s.$1.log(`[Experience Sessions]  Total duration for experience ${t} is ${e}ms - Sending to statsboard with end reason: ${o}`),(0,r.N9)("experience_framework.view_duration",e,{sampleRate:.2,tags:{placement_id:a,experience_id:i,end_reason:o}})},"calculateTotalDuration",void 0,t,()=>{s.$1.error(`[Experience Sessions]  Error calculating total duration for experience ${t} due to previous error`)})()}},160750(e,t,i){i.d(t,{H:()=>n});let n=(e,t)=>`${e}->${t}`},671996(e,t,i){i.d(t,{Hi:()=>a,al:()=>r,pv:()=>s});let n="experience_framework.frontend",s=n+"experience.not_rendered",r=n+".placement.remount",a=n+".placement.used_without_mount"},250325(e,t,i){let n;i.d(t,{$O:()=>m,Dz:()=>y,EZ:()=>g,Hy:()=>v,My:()=>_,Y4:()=>h,_4:()=>w,hG:()=>C,sE:()=>E,vI:()=>f,xL:()=>x,xn:()=>A});var s=i(859471),r=i(427471),a=i(743372),o=i(856748),l=i(616911),c=i(298146),d=i(640654),p=i(81920);let u=(e,t,i={},n=1)=>(0,p.GV)(`${e}.${t}`,{sampleRate:n,tags:i}),h=(e,t)=>r.A.create("UserExperiencePlatformResource",t?{extra_context:e,targeting:t}:{extra_context:e}).callGet(),m=(e,t)=>i=>r.A.create("UserExperiencePlatformResource",t?{extra_context:e,targeting:t}:{extra_context:e}).callGet().then(e=>e.resource_response?i((0,o.vv)(e.resource_response.data)):void 0),g=e=>t=>r.A.create("UserExperiencePlatformResource",{extra_context:e,multiExperiencePlatform:!0}).callGet().then(e=>e.resource_response?t((0,o.iN)(e.resource_response.data)):void 0),f=(e,t)=>(i,n)=>{let{experiences:s}=n(),r=s[e];return r&&r.triggerable_placed_exps&&r.triggerable_placed_exps.length&&r.triggerable_placed_exps.forEach(i=>{let[,n]=i.split(":"),s=t,a=r?.metadata?.[n];a&&(s={...t,..."object"==typeof a?a:{}}),(0,c.A)({url:`/v3/experiences/${i.replace(":","%3A")}/trigger/`,method:"PUT",data:s?{extra_context:JSON.stringify(s,null,1)}:{}}).then(()=>{u("experienceservice","experimentTriggerCall.1",{placement_id:e,experience_id:n})})}),Promise.resolve()},x=(e,t,i,s,a)=>(c,h)=>{let m=(0,d.y)()?.experimentsClient;if(u("experience_framework.fetch_experiences_for_placements","called",{placement_ids:e.join(","),has_extra_context:!!i},.01),t)return Promise.resolve();if(s&&(n=s),1===e.length){let t=e[0],n=h().experiences[t];if(JSON.stringify(n?.extraContext||null)===JSON.stringify(i)||(0,l.lC)(n)&&!(i&&Object.keys(i).length>0))return Promise.resolve()}return r.A.create("UserExperienceResource",{placement_ids:e,extra_context:i||null,targeting:s}).callGet().then(t=>{if(!t.resource_response)return;let n=t.resource_response.data||{};if(a){let{experiences:t}=h();l.$1.log("[MVC] Post Checks - Checking existing experiences in store"),e.forEach(e=>{let i=t[e];if(i&&0!==i.experience_id){var s;s=n[e],(0,p.GV)("experience_framework.fetch.post_check.failures",{sampleRate:.01,tags:{placement_id:e,experience_in_store:i.experience_id,experience_from_server:s?.experience_id}}),n[e]=i}})}m?.checkExperiment("experience_framework_web_custom_fetch_trigger_experiments").anyEnabled&&e.forEach(e=>{c(f(e,i))}),c((0,o.YT)(n))})},b=(e,t,i,s)=>(a,l,c,d=!1,p,u)=>(h,g)=>{let{experiences:f,experiencesMulti:x}=g(),b=null,y=!0;if(d||(b=(y=!!f[a]&&f[a].experience_id===l)?f[a]:Array.isArray(x[a])&&x[a]?.find(e=>e.experience_id===l)),b&&b.experience_id===l||d&&a&&l){let d=r.A.create(e,{placed_experience_id:`${a}%3A${l}`,extra_context:p??{},targeting:u}),g=y?o.Uh:o.$d;switch(t){case"dismissed":return d.callDelete().then(()=>{h(g(a,l,t)),h(m(void 0,n)),i&&s&&i({event_type:s,object_id_str:l.toString()})});case"completed":return d.callUpdate().then(()=>{!c&&(h(g(a,l,t)),h(m(void 0,n)),i&&s&&i({event_type:s,object_id_str:l.toString()}))});case"viewed":return h(g(a,l,t)),d.callUpdate().then(()=>{1000162===a&&h(m()),i&&s&&i({event_type:s,object_id_str:l.toString()})});case"completedWithoutHomefeed":return d.callUpdate().then(()=>{c||h(g(a,l,t)),i&&s&&i({event_type:s,object_id_str:l.toString()})})}}return Promise.resolve()},y=()=>{let e=(0,a.A)();return(0,s.useCallback)(b("UserExperienceViewedResource","viewed",e,4503),[e])},_=()=>{let e=(0,a.A)();return(0,s.useCallback)((t,i,n,s=!1,r,a)=>(n,r)=>{let{experiences:a,experiencesMulti:c}=r(),d=null,u=!0;if(s||(d=(u=!!a[t]&&a[t].experience_id===i)?a[t]:Array.isArray(c[t])&&c[t]?.find(e=>e.experience_id===i)),d&&d.experience_id===i||s&&t&&i){let s=u?o.Uh:o.$d;l.$1.log(`[MVC] View-End - Removing experience ${t}:${i} from store.`),(0,p.GV)("experience_framework.view_end",{tags:{placement_id:t,experience_id:i}}),n(s(t,i,"view-end")),e&&e({event_type:4503,object_id_str:i.toString()})}return Promise.resolve()},[e])},v=()=>{let e=(0,a.A)();return(0,s.useCallback)(b("UserExperienceCompletedResource","completed",e,6567),[e])},w=()=>{let e=(0,a.A)();return(0,s.useCallback)(b("UserExperienceResource","dismissed",e,6568),[e])},A=()=>{let e=(0,a.A)();return(0,s.useCallback)(b("UserExperienceCompletedResource","completedWithoutHomefeed",e,6567),[e])},E=e=>(t,i)=>{t(f(e));let{experiences:n}=i();return n[e]},C=(e,t,i,s)=>r=>{i&&(n=i),r(f(e,t)),t&&Object.keys(t).length>0&&r(x([e],!1,t,i,s))}},932369(e,t,i){i.d(t,{vI:()=>n.vI,Pl:()=>a,hG:()=>n.hG,xn:()=>n.xn,My:()=>n.My,EZ:()=>n.EZ,Dz:()=>n.Dz,Hy:()=>n.Hy,fE:()=>l,Y4:()=>n.Y4,xL:()=>n.xL,_4:()=>n._4,sE:()=>n.sE,sj:()=>o});var n=i(250325),s=i(427471);let r=(e,t,i,r)=>(a,o)=>l=>{if(a&&a.id){let c=s.A.create(e,{placed_experience_id:a.id,extra_context:{}});switch(t){case"dismissed":c.callDelete().then(()=>{l((0,n.$O)()),i&&r&&i({event_type:r,object_id_str:a.id.toString()})});break;case"completed":c.callUpdate().then(()=>{o||l((0,n.$O)()),i&&r&&i({event_type:r,object_id_str:a.id.toString()})});break;case"viewed":c.callUpdate().then(()=>{i&&r&&i({event_type:r,object_id_str:a.id.toString()})})}}},a=e=>r("UserExperienceCompletedResource","completed",e,6567),o=r("UserExperienceResource","dismissed"),l=e=>r("UserExperienceViewedResource","viewed",e,4503);i(586958),i(492072)},678863(e,t,i){i.d(t,{A:()=>c});var n=i(61163),s=i(859471),r=i(19821),a=i(845126),o=i(971289),l=i(562615);let c=({data:e,buttonType:t,experienceType:i,experienceSchema:c})=>{(0,s.useEffect)(()=>{(0,n.A)("ActionButton","/app/packages/experiences/gestalt/ActionButton.tsx")},[]);let{accessibilityLabel:d,disabled:p,label:u}=e,h=(0,o.qJ)(),{size:m,color:g,fullWidth:f}=(0,a.l)({buttonType:t,isDesktop:h,experienceType:i,experienceSchema:c});return(0,l.jsx)(r.az,{paddingX:1,width:f?"100%":void 0,children:"link"===e.role?(0,l.jsx)(r.vx,{accessibilityLabel:d,color:g,disabled:p,fullWidth:f,href:e.href,onClick:e.onClick,rel:e.rel,size:m,target:e.target,text:u}):(0,l.jsx)(r.$n,{accessibilityLabel:d,color:g,disabled:p,fullWidth:f,onClick:e.onClick,size:m,text:u})})}},845126(e,t,i){i.d(t,{l:()=>a,q:()=>o});var n=i(386379);let s={27:{primary:{color:"secondary"},secondary:{color:"transparent"}},28:{primary:{color:"primary"},secondary:{color:"transparent"}}},r={2:{primary:{color:"primary",size:"lg",fullWidth:!0},secondary:{color:"secondary",size:"lg",fullWidth:!0}}},a=({buttonType:e,experienceType:t,experienceSchema:i,isDesktop:n=!0})=>{let a={};switch(t&&(a=s[t]?.[e]||{}),i&&(a=r[i]?.[e]||{}),t){case 27:a.size=n?"sm":"md";break;case 28:a.size=n?"md":"sm"}return a},o=(e,t,i)=>e&&e.url?{label:e.text,accessibilityLabel:i||e.text,href:e.url,role:"link",rel:(0,n.A)({url:e.url})?"nofollow":"none",onClick:t}:{label:e.text,accessibilityLabel:i||e.text,onClick:t}},871702(e,t,i){i.d(t,{A:()=>s});let n={1:"default",2:"subtle",3:"subtle",4:"inverse",5:"info",6:"success",7:"warning",8:"error",9:"recommendation",10:"primary",11:"light",12:"dark"},s=(e,t="default")=>n[e]||t},701981(e,t,i){i.d(t,{W:()=>s});let n={2:"pinterest",1:"sparkle",5:"plus",7:"pin-angled",4:"magnifying-glass-frame",3:"magnifying-glass",6:"speech-ellipsis",8:"instagram",9:"camera",10:"image",11:"board",12:"layout",13:"hand-pointing",14:"share",15:"download",16:"shopping-bag",17:"check",18:"circle-exclamation-point",19:"bell",20:"person",21:"flag",22:"lightbulb",23:"home",24:"speech-heart",25:"speech",26:"heart",27:"face-smiley-outline",28:"face-smiley-sparkle",29:"star",30:"ads-stats",31:"filter-horizontal",32:"heart-fill",33:"gift",34:"crystal-ball",35:"bookmark-fill",36:"magnifying-glass-sparkle",37:"performance-plus",38:"amazon",39:"tag",40:"tag-star",41:"scissors",43:"collage"},s=e=>n[e]},731237(e,t,i){i.d(t,{WJ:()=>r.Ay,Rf:()=>p.A,Yd:()=>_,Ts:()=>c,Du:()=>d.A});var n=i(859471),s=i(979638),r=i(828323),a=i(115795),o=i(803489),l=i(971289);let c=()=>{let{mountPlacement:e,registeredAfterActionPlacements:t}=(0,r.Ay)(),i=(0,l.qJ)(),c=(0,s.zy)();return(0,n.useCallback)((n,s,r)=>{let l;switch(n){case"Save":var d;l=s?.isRepinTakeover?1000578:(d=c,((0,a._u)(d)&&d.state&&"from"in d.state&&d.state.from&&(d=d.state.from),(0,a.rz)(d))?i?1000503:1000558:(0,a._p)(d)?i?1000506:1000559:(0,a.dM)(d)?i?1000141:1000494:(0,a.iK)(d)&&i?1000647:void 0);break;case"Download":(0,a.dM)(c)&&(l=i?1000499:1000500);break;case"Clickthrough":l=((e,t)=>{if(t){if((0,a.rz)(e))return 1000541;else if((0,a._p)(e))return 1000542;else if((0,a.dM)(e))return 1000140}else if((0,a.rz)(e))return 1000544;else if((0,a._p)(e))return 1000543;else if((0,a.dM)(e))return 1000540})(c,i);break;case"NoAction":l=((e,t)=>{if(t&&(0,a.dM)(e))return 1000564})(c,i)}null!=l&&((0,a._p)(c)&&(s={...s,search_query:(0,o.A)(c.search)}),null!=l&&(t[l]||(0,a._u)(c))&&e(l,s,r))},[t,e,c,i])};var d=i(110037),p=i(406661),u=i(106386),h=i(33658),m=i(932369),g=i(616911),f=i(844255),x=i(562615);function b(e,t,i){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let y={dispatchMountActionDuringSSR:!1,isAdvertiserPlacement:!1},_=(e,t={},i)=>s=>(function(e,t,i=!0,s=!1,a){class o extends n.Component{constructor(e){super(e),b(this,"state",{extraContext:void 0}),b(this,"setExtraContextState",e=>{(0,h.Ay)(this.state.extraContext,e)||this.setState({extraContext:e})})}componentDidMount(){this.dispatchPlacementMount()}componentDidUpdate(i,n){let{dispatch:s,experience:r,requestContext:a}=this.props,o=n.extraContext,l=this.state.extraContext||t||{};"function"==typeof t&&(o=t(i,n.extraContext||{}),l=t(this.props,this.state.extraContext||{})),l&&Object.keys(l).length>0&&"object"==typeof l&&!(0,h.Ay)(o,l)&&s((0,m.xL)([e],a.isBot,l)),r&&(!i.experience||r.id!==i.experience.id)&&s((0,m.vI)(e,"object"==typeof l?l:{}))}componentWillUnmount(){this.props.unmountPlacement(e)}dispatchPlacementMount(){let i="function"==typeof t?t(this.props,this.state.extraContext||{}):{...t},n=s&&i?.advertiser_id?{advertiserId:i.advertiser_id}:void 0;this.props.mountPlacement(e,i,n)}render(){let{experience:e,experiencesMulti:t}=this.props,i={[s?"advertiserExperience":"experience"]:e&&(0,g.lC)(e)?e:null};return(0,x.jsx)(a,{...this.props,setPlacementExtraContext:this.setExtraContextState,...i,experiencesMulti:t})}}function l(t){let i=(0,u.d4)(t=>t.experiences[e]),n=(0,u.d4)(t=>t.experiencesMulti?t.experiencesMulti[e]:void 0),s=(0,f._8)(),a=(0,u.wA)(),{mountPlacement:l,unmountPlacement:c,setUsePlacementCalls:d}=(0,r.Ay)();return d(e,!0),(0,x.jsx)(o,{...t,dispatch:a,experience:i,experiencesMulti:n,mountPlacement:l,requestContext:s,unmountPlacement:c})}return l.displayName=`withPlacement(${a.displayName||a.name||"Component"})`,l})(e,t,(i={...y,...i}).dispatchMountActionDuringSSR,i.isAdvertiserPlacement,s)},110037(e,t,i){i.d(t,{A:()=>o});var n=i(859471),s=i(828323),r=i(616911),a=i(844255);function o(e){let{mountedPlacements:t,completeExperience:i,dismissExperience:o,experiences:l,fetchAllExperiences:c,fetchAllExperiencesMulti:d,fetchExperienceForPlacements:p,triggerExperimentsForPlacement:u,viewExperience:h}=(0,s.Ay)(),{isBot:m}=(0,a._8)(),g=e&&!m?(0,r.NW)(l,t,e):null;return(0,n.useMemo)(()=>({completeExperience:i,dismissExperience:o,experienceForPlacement:g,fetchAllExperiences:c,fetchAllExperiencesMulti:d,fetchExperienceForPlacements:p,triggerExperimentsForPlacement:u,viewExperience:h}),[i,o,g,c,d,p,u,h])}},828323(e,t,i){i.d(t,{Ay:()=>a,E3:()=>r,_z:()=>n});let{Provider:n,get:s,getMaybe:r}=(0,i(987628).A)("ExperienceContext"),a=s},406661(e,t,i){i.d(t,{A:()=>u});var n=i(859471),s=i(106386),r=i(828323);let a=(0,i(810972).createSelector)(e=>e.experiences,(e,t)=>t,(e,t)=>e[t]);var o=i(844255),l=i(168079),c=i(81920);let d=(e,t)=>"function"==typeof t?t(e):t,p=(e,t)=>e&&t?.advertiser_id?{advertiserId:t.advertiser_id}:void 0,u=(e,t={},i=!1)=>{let{isBot:u}=(0,o._8)(),{fetchExperienceForPlacements:h,mountPlacement:m,triggerExperimentsForPlacement:g,unmountPlacement:f,setUsePlacementCalls:x}=(0,r.Ay)(),[b,y]=(0,n.useReducer)(d,t),_=(0,s.d4)(t=>a(t,e)),v=(0,s.d4)(t=>t.experiencesMulti[e]),w=JSON.stringify(_?_.triggerable_placed_exps:[]),A=(0,n.useRef)(!0);return(0,n.useDebugValue)(`Placement Hook ID - ${e}`),x(e,!0),(0,l.A)(()=>(m(e,b,p(i,b)),()=>{f(e)})),(0,n.useEffect)(()=>{if(A.current){A.current=!1;return}Object.keys(b).length&&h([e],u,b,p(i,b))},[b,h,u,e,i]),(0,n.useEffect)(()=>{((e,t,i={})=>(0,c.GV)(`${e}.${t}`,{sampleRate:1,tags:i}))("experienceservice","placementHookExperimentTrigger.1",{platform:"web",placement_id:e,triggerable_experiences:w}),g(e,b)},[w,e,b,g]),{experience:_,experiencesMulti:v,setExtraContext:y}}},296221(e,t,i){i.d(t,{ZR:()=>eE,b5:()=>E,Vj:()=>N,rr:()=>eQ,cO:()=>eA,Du:()=>ev.Du,Rf:()=>ev.Rf,Yd:()=>ev.Yd,xe:()=>e5,Jq:()=>eh,j9:()=>H.default,TC:()=>ej,am:()=>e3,SP:()=>e7,Gl:()=>eV,V6:()=>O.V6,En:()=>e0,tc:()=>U,Ts:()=>ev.Ts,X$:()=>e_,hf:()=>g,Je:()=>p.Ay,Kp:()=>h,nU:()=>w,aR:()=>eu,r8:()=>eD,WJ:()=>ev.WJ}),i(358203);var n=i(61163),s=i(859471),r=i(19821),a=i(586733),o=i(538329),l=i(562615);let c={"error-callout":"error","info-callout":"info","warning-callout":"warning"};function d(e){(0,s.useEffect)(()=>{(0,n.A)("ExperienceAnalyticsCalloutBanner","/app/packages/experiences/Experiences/ExperienceAnalyticsCalloutBanner/ExperienceAnalyticsCalloutBanner.tsx")},[]);let t=(0,o.A)(),{logContextEvent:i}=(0,a.o)(),{displayData:d,experienceId:p,onComplete:u,onDismiss:h}=e,m={info:t._('Information icon', 'analyticsCalloutBanner.accessibilityLabel.info', 'accessibility label for info icon'),warning:t._('Warning icon', 'analyticsCalloutBanner.accessibilityLabel.warning', 'accessibility label for warning icon'),error:t._('Error icon', 'analyticsCalloutBanner.accessibilityLabel.error', 'accessibility label for error icon')},g=c[d.type]||"info";return(0,l.jsx)(r.az,{marginTop:6,paddingX:6,children:(0,l.jsx)(r.F_,{dismissButton:{accessibilityLabel:t._('Dismiss banner', 'analyticsCalloutBanner.dismissAccessibilityLabel', 'accessibility label to dismiss banner with metric updates on analytics'),onDismiss:()=>{h(),i({event_type:101,component:14071,element:11925,aux_data:{placed_experience_id:p}})}},iconAccessibilityLabel:m[g],message:(0,l.jsxs)(r.KJ,{children:[d.message,d.link?(0,l.jsx)(r.N_,{display:"inline",href:d.link.href,target:"blank",children:d.link.text}):null]},"message"),primaryAction:d.primaryAction?.label?{label:d.primaryAction.label,accessibilityLabel:d.primaryAction.accessibilityLabel,href:d.primaryAction.href,onClick:({dangerouslyDisableOnNavigation:e})=>{e(),u(),i({event_type:101,component:14071,element:13004,aux_data:{placed_experience_id:p}})},target:"blank",role:"link"}:void 0,secondaryAction:d.secondaryAction?.label?{label:d.secondaryAction.label,accessibilityLabel:d.secondaryAction.accessibilityLabel,href:d.secondaryAction.href,onClick:({dangerouslyDisableOnNavigation:e})=>{e(),h(),i({event_type:101,component:14071,element:13005,aux_data:{placed_experience_id:p}})},target:"blank",role:"link"}:void 0,title:d.title,type:g})})}var p=i(822727);let u=["error-callout","info-callout","warning-callout"];function h(e){(0,s.useEffect)(()=>{(0,n.A)("ExperienceAnalyticsCalloutBannerPlacement","/app/packages/experiences/Experiences/ExperienceAnalyticsCalloutBanner/ExperienceAnalyticsCalloutBannerPlacement.tsx")},[]);let{placementId:t}=e;return(0,l.jsx)(p.Ay,{placementId:t,predicate:e=>e.display_data?.type&&u.includes(e.display_data.type)&&e.display_data?.message,children:({complete:e,dismiss:t,experience:{display_data:i,experience_id:n}})=>(0,l.jsx)(d,{displayData:i,experienceId:n,onComplete:e,onDismiss:t})})}function m(e){(0,s.useEffect)(()=>{(0,n.A)("ExperienceAnalyticsUpsellBanner","/app/packages/experiences/Experiences/ExperienceAnalyticsUpsellBanner/ExperienceAnalyticsUpsellBanner.tsx")},[]);let t=(0,o.A)(),{logContextEvent:i}=(0,a.o)(),{displayData:c,experienceId:d,onComplete:p,onDismiss:u,marginBottom:h}=e;return(0,l.jsx)(r.az,{marginBottom:h,marginTop:6,paddingX:6,children:(0,l.jsx)(r.Sl,{dismissButton:{accessibilityLabel:t._('Dismiss banner', 'analyticsCalloutBanner.dismissAccessibilityLabel', 'accessibility label to dismiss banner with metric updates on analytics'),onDismiss:()=>{u(),i({event_type:101,component:14075,element:11925,aux_data:{placed_experience_id:d}})}},message:c.message,primaryAction:c.primaryAction?.label?{label:c.primaryAction.label,accessibilityLabel:c.primaryAction.accessibilityLabel,href:c.primaryAction.href,onClick:({dangerouslyDisableOnNavigation:e})=>{e(),p(),i({event_type:101,component:14075,element:13004,aux_data:{placed_experience_id:d}})},target:"blank",role:"link"}:void 0,secondaryAction:c.secondaryAction?.label?{label:c.secondaryAction.label,accessibilityLabel:c.secondaryAction.accessibilityLabel,href:c.secondaryAction.href,onClick:({dangerouslyDisableOnNavigation:e})=>{e(),u(),i({event_type:101,component:14075,element:13005,aux_data:{placed_experience_id:d}})},target:"blank",role:"link"}:void 0,title:c.title??""})})}function g(e){(0,s.useEffect)(()=>{(0,n.A)("ExperienceAnalyticsUpsellBannerPlacement","/app/packages/experiences/Experiences/ExperienceAnalyticsUpsellBanner/ExperienceAnalyticsUpsellBannerPlacement.tsx")},[]);let{placementId:t,marginBottom:i}=e;return(0,l.jsx)(p.Ay,{placementId:t,predicate:e=>e.display_data?.type==="upsell"&&e.display_data?.message,children:({complete:e,dismiss:t,experience:{display_data:n,experience_id:s}})=>(0,l.jsx)(m,{displayData:n,experienceId:s,marginBottom:i,onComplete:e,onDismiss:t})})}var f=i(386379),x=i(971289);let b=({children:e,wrapper:t})=>t?t(e):(0,l.jsx)(s.Fragment,{children:e});function y(e){(0,s.useEffect)(()=>{(0,n.A)("MultiPlatformBanner","/app/packages/experiences/Experiences/MultiPlatformBanner/MultiPlatformBanner.tsx")},[]);let t=(0,o.A)(),{displayData:{backgroundColorNarrow:i,backgroundColorWide:a,backgroundImageNarrow:c,backgroundImageWide:d,canClose:p,completeButtonText:u,coverImage:h,dismissButtonText:m,iconImage:g,layoutNarrow:y,layoutWide:_,links:v=[],linkTitles:w=[],message:A,onCompleteRedirectUrl:E,onDismissRedirectUrl:C,textColorNarrow:j,textColorWide:S,titleText:k,external:I},onComplete:P,onDismiss:T}=e,R=!(0,x.qJ)(),z=R?y:_,O=!R&&3!==z,B=R&&4===z,D=R?i:a,L=R?j:S,{altText:M,uri:N}=(R?c:d)||{},{altText:W,uri:F}=h||{},{altText:V,uri:U}=g||{},H=R&&2===z||!R&&2===z||B,$=R&&!B?"96px":"48px",K=R&&3===z,G=u&&!E&&(0,l.jsx)(r.$n,{color:"tertiary",onClick:({event:e})=>{P?.(e)},text:u}),J=(0,f.A)({url:E}),Y=u&&E&&(0,l.jsx)(r.vx,{color:B?"primary":"tertiary",fullWidth:B,href:E,onClick:({event:e})=>{P?.(e)},rel:J?"nofollow":"none",size:B?"md":"lg",target:I?"blank":void 0,text:u},"naglink"),X=(0,f.A)({url:C}),q=m&&C&&(0,l.jsx)(r.vx,{color:"tertiary",href:C,onClick:({event:e})=>{T?.(e)},rel:X?"nofollow":"none",size:"lg",target:I?"blank":void 0,text:m},"naglink"),Q=m&&!C&&(0,l.jsx)(r.$n,{color:"tertiary",onClick:({event:e})=>{T?.(e)},size:"lg",text:m}),Z=p&&(0,l.jsx)(r.K0,{accessibilityLabel:t._('Close', 'accessibility close label', 'accessibility close label'),bgColor:"secondary",icon:"close",iconColor:"subtle",onClick:({event:e})=>{T?.(e)},size:"md"}),ee=v.reduce((e,t,i)=>{let n=t.startsWith("https://")||t.startsWith("http://")?'rel="noreferrer noopener" target="_blank"':"",s=`<a href="${t}" ${n}>${w[i]}</a>`;return e.replace(`{${i}}`,s)},A),et={backgroundColor:D,backgroundImage:!N||H||K?void 0:`url(${N})`,backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"},ei=B?3:4,en=B?0:-1,[es,er]=(0,s.useState)(1);return(0,s.useEffect)(()=>{if(U&&B){let e=new Image;e.src=U,e.onload=()=>{er(e.height/e.width)}}},[U,B]),(0,l.jsx)(r.az,{direction:O?"row":"column",display:"flex",marginBottom:5,marginEnd:2,marginStart:2,marginTop:B?6:2,children:(0,l.jsx)("div",{className:"banner-content",style:{borderRadius:"16px",boxShadow:B?"0px 0px 8px rgba(0, 0, 0, 0.1)":"none",margin:"0 auto"},children:(0,l.jsxs)(r.n1,{rounding:400,width:"100%",children:[K&&F&&(0,l.jsx)(r.so,{alignItems:"start",height:128,justifyContent:"center",width:"100%",children:(0,l.jsx)(r._V,{alt:W||"cover image",fit:"cover",naturalHeight:1,naturalWidth:3,src:F})}),(0,l.jsxs)(r.az,{alignItems:"center","aria-label":M,dangerouslySetInlineStyle:{__style:et},direction:O?"row":"column",display:"flex",justifyContent:"between",marginTop:K?-2:0,padding:B?3:6,children:[(0,l.jsxs)(r.so,{alignItems:"center",direction:O||B?"row":"column",gap:{row:2*!!B,column:2*!!B},justifyContent:"between",maxWidth:O?void 0:"560px",children:[H&&U&&(0,l.jsx)(r.az,{alignItems:"center",direction:"column",display:"flex",justifyContent:"center",marginBottom:6*!O,marginEnd:4*!!O,children:(0,l.jsx)(r.az,{height:B?"unset":$,width:$,children:(0,l.jsx)(r.n1,{rounding:B?0:O?400:600,children:(0,l.jsx)(r._V,{alt:V||"icon",naturalHeight:es,naturalWidth:1,src:U})})})}),(0,l.jsxs)(b,{wrapper:B?e=>(0,l.jsx)(r.so,{alignItems:B?"start":"center",direction:O?"row":"column",justifyContent:"between",children:e}):void 0,children:[!O&&k&&(0,l.jsx)(r.KJ,{align:B?"start":"center",weight:"bold",children:(0,l.jsx)("div",{className:"banner-title",style:{color:L,fontSize:B?"20px":"28px",marginBottom:O?0:"8px"},children:k})}),ee&&(0,l.jsxs)(r.KJ,{align:O||B?"start":"center",overflow:"normal",children:[(0,l.jsx)("style",{dangerouslySetInnerHTML:{__html:`
                        .banner-text a {
                          color: ${L||""};
                          font-weight: bold;
                        }`}}),(0,l.jsx)("div",{className:"banner-text",dangerouslySetInnerHTML:{__html:ee},style:{color:L}})]})]})]}),(0,l.jsx)(r.az,{marginBottom:O?0:en,marginStart:4*!!O,marginTop:O?0:ei,width:B?"100%":void 0,children:(0,l.jsxs)(b,{wrapper:B?void 0:e=>(0,l.jsx)(r.so,{alignItems:"center",gap:{row:2,column:0},justifyContent:"center",wrap:!O,children:e}),children:[Q||q,G||Y,Z]})})]})]})})})}var _=i(62963),v=i(307424);let w=({placementId:e})=>((0,s.useEffect)(()=>{(0,n.A)("ExperienceBanner","/app/packages/experiences/Experiences/ExperienceBanner/ExperienceBanner.tsx")},[]),(0,l.jsx)(p.Ay,{placementId:e,predicate:e=>e.display_data?.component_type===1,children:({complete:e,dismiss:t,experience:{display_data:i}})=>{let n=(0,_.A)(v.A)(i);return(0,l.jsx)(y,{displayData:n,onComplete:()=>e(),onDismiss:t})}})),A=[502312,502320,502321,502322],E=({placementId:e})=>((0,s.useEffect)(()=>{(0,n.A)("ExperienceBlank","/app/packages/experiences/Experiences/ExperienceBlank/ExperienceBlank.tsx")},[]),(0,l.jsx)(p.Ay,{eligibleIds:A,placementId:e,preventRemoval:!0,children:({complete:e})=>(e(),null)}));var C=i(915047),j=i(678863);function S({dismissButton:e,message:t,primaryAction:i,secondaryAction:a,title:c}){(0,s.useEffect)(()=>{(0,n.A)("CalloutNeutral","/app/packages/experiences/Experiences/ExperienceCallout/CalloutNeutral.tsx")},[]);let d=(0,x.qJ)(),p=i||a,u=(0,o.A)(),{setObserverRef:h}=(0,C.NM)(),m=e&&(0,l.jsx)(r.az,{alignSelf:"baseline",children:(0,l.jsx)(r.K0,{accessibilityLabel:e.accessibilityLabel||u._('Dismiss callout', 'experiences.ExperienceCallout.CalloutNeutral.dismissLabel', 'Accessibility label for the X button to dismiss a callout'),icon:"close",iconColor:"default",onClick:e.onDismiss,size:"xs"})});return(0,l.jsxs)(r.az,{ref:h,borderColor:"decorative",borderWidth:"sm",color:"transparent",direction:"row",display:"flex",marginBottom:4,padding:4,rounding:400,children:[(0,l.jsxs)(r.so,{direction:d?"row":"column",width:"100%",wrap:!d,children:[(0,l.jsxs)(r.so,{flex:"grow",justifyContent:"between",minWidth:0,children:[(0,l.jsxs)(r.so,{direction:"column",flex:"shrink",children:[c&&(0,l.jsx)(r.az,{marginBottom:2,children:(0,l.jsx)(r.KJ,{size:"400",weight:"bold",children:c})}),(0,l.jsx)(r.KJ,{children:t})]}),!d&&m]}),p&&(0,l.jsxs)(r.az,{alignItems:"center",display:"flex",flex:"grow",justifyContent:"end",marginTop:2*!d,children:[a&&(0,l.jsx)(j.A,{buttonType:"secondary",data:a,experienceType:27}),i&&(0,l.jsx)(j.A,{buttonType:"primary",data:i,experienceType:27})]})]}),d&&m]})}var k=i(201593);function I({dismissButton:e,imageData:t,message:i,primaryAction:a,secondaryAction:c,title:d}){let p;(0,s.useEffect)(()=>{(0,n.A)("UpsellCallout","/app/packages/experiences/Experiences/ExperienceCallout/UpsellCallout.tsx")},[]);let u=t?.component&&t.component.type===r._V,{isDarkMode:h}=(0,k.D2)(),m=(0,x.qJ)(),g=(0,o.A)(),{setObserverRef:f}=(0,C.NM)(),b=!!(a||c);"string"==typeof i&&(p=(0,l.jsx)(r.KJ,{children:i}));let y=g._('Dismiss callout', 'experiences.ExperienceCallout.UpsellCallout.dismissLabel', 'Accessibility label for the X button to dismiss an upsell callout'),_=e&&(0,l.jsx)(r.az,{alignSelf:m?"center":"baseline",children:(0,l.jsx)(r.K0,{accessibilityLabel:e.accessibilityLabel||y,icon:"close",iconColor:"default",onClick:e.onDismiss,size:"xs"})});return(0,l.jsxs)(r.az,{ref:f,color:h&&!m?void 0:"default",dangerouslySetInlineStyle:h&&!m?{__style:{backgroundColor:"var(--base-color-transparent)"}}:void 0,direction:"row",display:"flex",elevation:"shadowFloating",maxWidth:m?900:348,minWidth:m?380:348,padding:4,position:"relative",rounding:400,children:[(0,l.jsxs)(r.so,{direction:m?"row":"column",width:"100%",wrap:!m,children:[(0,l.jsxs)(r.so,{alignItems:m?"center":"start",flex:"grow",justifyContent:"between",minWidth:0,children:[t&&(0,l.jsx)(r.az,{flex:"none",marginEnd:4,width:u?Math.min(t.width||128,128):void 0,children:(0,l.jsx)(r.n1,{rounding:t.mask?.rounding||0,wash:t.mask?.wash||!1,children:t.component})}),(0,l.jsx)(r.az,{alignItems:"center",direction:"column",display:"flex",marginBottom:"auto",marginEnd:0,marginStart:0,marginTop:"auto",smDisplay:"block",smMarginEnd:6,smMarginStart:6*!!t,children:(0,l.jsxs)(r.az,{maxWidth:648,children:[d&&(0,l.jsx)(r.az,{marginBottom:2,children:(0,l.jsx)(r.KJ,{size:"400",weight:"bold",children:d})}),p||i]})}),!m&&_]}),b&&(0,l.jsxs)(r.az,{alignItems:"center",display:"flex",flex:"grow",justifyContent:"end",marginTop:2*!m,children:[c&&(0,l.jsx)(j.A,{buttonType:"secondary",data:c,experienceType:28}),a&&(0,l.jsx)(j.A,{buttonType:"primary",data:a,experienceType:28})]})]}),m&&_]})}var P=i(279037),T=i(845126),R=i(871702),z=i(701981),O=i(616911),B=i(584342),D=i(809756);let L=new r.rk(B.d1),M=new r.K5([L]),N=({experience:e,placementId:t,customFooterHeight:i})=>{(0,s.useEffect)(()=>{(0,n.A)("ExperienceCallout","/app/packages/experiences/Experiences/ExperienceCallout/ExperienceCallout.tsx")},[]);let a=(0,x.qJ)(),c=(0,o.A)(),{enableExperienceSession:d,endOnSurfaceChange:u}=(0,P.A)(t),{navFooterHeight:h}=(0,D.o)();return(0,l.jsx)(p.Ay,{eligibleTypes:[27,28],enableExperienceSession:d,experience:e,placementId:t,sessionEndOnSurfaceChange:u,children:({complete:e,dismiss:t,experience:n})=>{let o=(0,_.A)(v.A)(n.display_data),d=c._('Dismiss callout', 'experiences.ExperienceCallout.dismissLabel', 'Accessibility label for the X button to dismiss an callout'),p=o.completeButton?(0,T.q)(o.completeButton,()=>e(),d):void 0,u=o.dismissButton&&!o.dismissButton.hideDismissButton?(0,T.q)(o.dismissButton,()=>t(),d):void 0;switch(n.type){case 27:return(0,l.jsx)(r.az,{paddingX:4*!!a,children:(0,l.jsx)(S,{dismissButton:{onDismiss:()=>t(),accessibilityLabel:d},message:(0,O.dz)(o.message),primaryAction:p,secondaryAction:u,title:o.title})});case 28:var m,g;let f,x,b=(m=o.icon,g=o.iconColor,f=(0,z.W)(m),x=(0,R.A)(g),f?(0,l.jsx)(r.In,{accessibilityLabel:"",color:x,icon:f,size:32}):null);return(0,l.jsx)(r.Wd,{zIndex:M,children:(0,l.jsx)(r.az,{bottom:!0,dangerouslySetInlineStyle:{__style:{marginBottom:a?24:(i??h)+8,transition:"margin-bottom 300ms ease-in-out"}},display:"flex",justifyContent:"center",left:!0,position:"fixed",right:!0,children:(0,l.jsx)(r.az,{children:(0,l.jsx)(I,{dismissButton:{onDismiss:()=>t(),accessibilityLabel:d},imageData:b?{component:b}:void 0,message:(0,O.dz)(o.message),primaryAction:p,secondaryAction:u,title:o.title})})})});default:return(0,l.jsx)(s.Fragment,{})}}})};var W=i(110037),F=i(406661);class V extends s.PureComponent{componentDidMount(){let{experience:e}=this.props;if(e&&500500===e.experience_id){let{experience_id:t,placement_id:i}=e;this.props.experienceClient.viewExperience(i,t)}}componentDidUpdate(e){let t=e.experience,i=this.props.experience;if(i&&!t){let{experience_id:e,placement_id:t}=i;this.props.experienceClient.viewExperience(t,e)}}render(){return this.props.children}}function U(e){(0,s.useEffect)(()=>{(0,n.A)("ExperienceCloseupFeatures","/app/packages/experiences/Experiences/ExperienceCloseupFeatures/ExperienceCloseupFeatures.tsx")},[]);let t=(0,W.A)(),{experience:i}=(0,F.A)(1000075);return(0,l.jsx)(V,{...e,experience:i,experienceClient:t})}var H=i(111196),$=i(106386),K=i(408738);let G=new r.rk(B.d1),J=new r.K5([G]),Y=new r.K5([J]),X={modalMargin:24,gestaltModalMargin:6,closeButtonMargin:6},q={width:540,height:363},Q={modalMargin:24,gestaltModalMargin:6,closeButtonMargin:4},Z={width:320,height:215},ee=(0,K.A)(()=>Promise.all([i.e("91796"),i.e("44175"),i.e("57120")]).then(i.bind(i,827847)),void 0,e=>827847,"app-www-video-VideoWrapper",e=>["91796","44175","57120"]),et=e=>{let{isMobile:t,image:i,video:n,handleDismiss:s,title:a}=e,c=(0,o.A)(),d=t?Q:X,p=t?Z:q,u=(0,l.jsx)(r.az,{display:"flex",justifyContent:t?"start":"end",margin:d.closeButtonMargin,position:"absolute",width:p.width-2*d.modalMargin,zIndex:Y,children:(0,l.jsx)(r.K0,{accessibilityLabel:c._('Dismiss', 'experiences.ExperienceModalWindow.modalDismissIconButton', 'Accessibility lable for the X icon button to dismiss the modal window'),bgColor:"secondary",icon:"close",iconColor:"default",onClick:s,size:"sm"})}),h=i?i.imageAlt:a,m=i?i.url:n?.metadata?.thumbnail,g=i?.dominantColor?.length===3?`rgb(${i.dominantColor[0]}, ${i.dominantColor[1]}, ${i.dominantColor[2]})`:"rgb(111, 91, 77)",f=p.width/p.height,x={width:p.width,height:p.height};i&&i.width&&i.height?(f=i.width/i.height,x={width:i.width,height:i.height}):n&&n.metadata.width&&n.metadata.height&&(f=n.metadata.width/n.metadata.height,x={width:n.metadata.width,height:n.metadata.height});let b=m?(0,l.jsx)(r._V,{alt:h||"",color:g,fit:"cover",naturalHeight:x.height,naturalWidth:x.width,src:m}):void 0,y=Math.trunc(p.width/f);return(0,l.jsxs)(r.az,{bottom:!0,height:y,left:!0,overflow:"hidden",right:!0,top:!0,width:p.width,children:[u,i&&b,n&&(0,l.jsx)(ee,{aspectRatio:f,backgroundColor:"transparent",captions:"",controls:!1,fallback:b,isAutoPlay:!0,loop:!0,objectFit:"cover",onPlay:()=>{},onPlayError:()=>{},pinKey:null,playbackRate:1,playing:!0,playsInline:!0,poster:i?.url||n.metadata.thumbnail,preload:"auto",src:n.url,volume:0})]})};function ei(e){(0,s.useEffect)(()=>{(0,n.A)("ExperienceMediaModalContent","/app/packages/experiences/Experiences/ExperienceMediaModal/ExperienceMediaModalContent.tsx")},[]);let{displayData:t,handleComplete:i,handleDismiss:a,isMobile:o}=e,{video:c,image:d,title:p,body:u,completeButton:h,dismissButton:m}=t,g=o?Q:X,x=o?"center":"start",b=(0,f.A)({url:h.url}),{setObserverRef:y}=(0,C.NM)();return(0,l.jsxs)(s.Fragment,{children:[(0,l.jsx)(et,{handleDismiss:a,image:d,isMobile:o,title:p,video:c}),(0,l.jsxs)(r.az,{ref:y,direction:"column",display:"flex",justifyContent:"center",margin:g.gestaltModalMargin,children:[(0,l.jsx)(r._Y,{align:x,children:p}),(0,l.jsx)(r.az,{marginBottom:4,marginTop:2,children:(0,l.jsx)(r.KJ,{align:x,children:(0,O.dz)(u)})}),(0,l.jsxs)(r.az,{dangerouslySetInlineStyle:{__style:{flexWrap:"wrap-reverse"}},display:"flex",justifyContent:o?"center":"end",margin:-1,children:[m&&!m.hideDismissButton&&(0,l.jsx)(r.az,{fit:!0,flex:o?"grow":"none",minWidth:o?130:void 0,padding:1,children:(0,l.jsx)(r.$n,{color:"secondary",fullWidth:o,onClick:a,size:"lg",text:m.text})}),h&&(0,l.jsx)(r.az,{fit:!0,flex:o?"grow":"none",minWidth:o?130:void 0,padding:1,children:h.url?(0,l.jsx)(r.vx,{color:"primary",fullWidth:o,href:h.url,onClick:i,rel:b?"nofollow":"none",size:"lg",text:h.text}):(0,l.jsx)(r.$n,{color:"primary",fullWidth:o,onClick:i,size:"lg",text:h.text})})]})]})]})}var en=i(79906),es=i(642883),er=i(995273),ea=i(123576),eo=i(911127),el=i(826258);function ec({accessibilityModalLabel:e,allowScroll:t=!1,children:i,closeOnOutsideClick:a=!0,footer:c,isOpen:d,modalWidth:p,onDismiss:u,zIndex:h}){(0,s.useEffect)(()=>{(0,n.A)("MobileModalWindow","/app/www/experiences/duplo/ExperienceMobileModalWindow/MobileModalWindow.tsx")},[]);let m=(0,o.A)(),g=(0,s.useRef)(null),{setAppFocusState:f}=(0,el.Y)();return((0,s.useEffect)(()=>(g.current=(0,es.A)(()=>{}),()=>{"u">typeof window&&Object.prototype.hasOwnProperty.call(window,"cancelAnimationFrame")&&g.current&&(window.cancelAnimationFrame(g.current),g.current=null)}),[]),(0,s.useEffect)(()=>(d?(ea.A.pause(),f(!1)):(ea.A.resume(),f(!0)),()=>{d&&(ea.A.resume(),f(!0))}),[f,d]),(0,s.useEffect)(()=>{let e=d&&!t;return e&&(()=>{if(document.body){let{body:{style:e}}=document;e.overflow="hidden",e.touchAction="none"}})(),()=>{e&&(()=>{if(document.body){let{body:{style:e}}=document;e.overflow="visible",e.touchAction="auto"}})()}},[d,t]),d)?(0,l.jsx)(eo.A,{children:(0,l.jsx)(r.Wd,{children:(0,l.jsxs)(r.az,{"aria-label":e,position:"relative",role:"dialog",zIndex:h||er.nH,children:[(0,l.jsx)(r.Rp,{accessibilityLabel:m._('Mobile Popup Modal Mask', 'mweb.experience_popup_modal.mask', 'The acessibility label for the mask of popup modal'),onTap:()=>{a&&u()},tapStyle:"none",children:(0,l.jsx)(r.az,{dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0, 0, 0, .5)",touchAction:"none",transitionProperty:"opacity",transitionTimingFunction:"ease-out"}},height:"100%",left:!0,position:"fixed",top:!0,width:"100%",zIndex:new r.rk(1)})}),(0,l.jsxs)(r.az,{color:"default",dangerouslySetInlineStyle:{__style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)",touchAction:"none",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out"}},overflow:"hidden",position:"fixed",rounding:400,top:!0,width:p,zIndex:new r.rk(1),children:[i,c]})]})})}):null}let ed=new r.rk(B.d1),ep=new r.K5([ed]);function eu(e){(0,s.useEffect)(()=>{(0,n.A)("ExperienceModalWindow","/app/packages/experiences/Experiences/ExperienceMediaModal/ExperienceModalWindow.tsx")},[]);let t=(0,$.d4)(({experiences:t})=>e.experience||(e.placementId?t[e.placementId]:void 0)),i=t?.display_data?.delay_in_millis,[o,c]=(0,s.useState)(t&&!i),{logContextEvent:d}=(0,a.o)(),u=(0,x.qJ)(),{enableExperienceSession:h,endOnSurfaceChange:m}=(0,P.A)(e.placementId),g=(0,s.useCallback)((e,t)=>{let i=new URL(e.display_data.complete_button.url),n=i.searchParams.get("repin_id"),s=i.pathname.split("/").pop(),{pin_count:r,cluster_title:a}=e.metadata?.[e.experience_id]||{};d({event_type:t,aux_data:{cluster_selected_name:a,component_id:s,navigation_source:3,pin_count:r,repin_id:n}})},[d]);return(0,s.useEffect)(()=>{let e=t&&!t.display_data?.delay_in_millis;c(e),e&&t?.experience_id===507669&&g(t,16498)},[t,g]),(0,s.useEffect)(()=>{let e;return i&&(e=setTimeout(()=>{c(!0)},i)),()=>clearTimeout(e)},[i]),(0,l.jsx)(s.Fragment,{children:o&&(0,l.jsx)(p.Ay,{eligibleSchemas:[1],eligibleTypes:[26],enableExperienceSession:h,experience:t,placementId:e.placementId,sessionEndOnSurfaceChange:m,children:({complete:e,dismiss:i,experience:{display_data:n}})=>{let s=(0,_.A)(v.A)(n),a=t?.experience_id===507054,o=t?.experience_id===507669,d=()=>{o&&g(t,16499),c(!1),i()},p=({dangerouslyDisableOnNavigation:t})=>{a&&t(),e(),c(!1)},{title:h,body:m,completeButton:f}=s;return h&&m&&f.text?u?(0,l.jsx)(r.Wd,{zIndex:ep,children:(0,l.jsx)(en.Ay,{accessibilityModalLabel:"",onDismiss:d,size:"sm",children:(0,l.jsx)(ei,{displayData:s,handleComplete:p,handleDismiss:d,isMobile:!1})})}):(0,l.jsx)(ec,{accessibilityModalLabel:s?.title,isOpen:!0,modalWidth:320,onDismiss:d,children:(0,l.jsx)(ei,{displayData:s,handleComplete:p,handleDismiss:d,isMobile:!0})}):null}})})}let eh=e=>{(0,s.useEffect)(()=>{(0,n.A)("ExperienceMetricsUnificationBanner","/app/packages/experiences/Experiences/ExperienceMetricsUnificationBanner/ExperienceMetricsUnificationBanner.tsx")},[]);let t=(0,o.A)(),[i,a]=(0,s.useState)(!0),{placementId:c}=e;return(0,l.jsx)(p.Ay,{eligibleIds:[502527],placementId:c,children:({experience:{display_data:e,type:n}})=>(0,l.jsx)(s.Fragment,{children:i&&5===n&&!!e.buttons&&e.buttons.length>=2&&!!e.title_text&&!!e.subtitle_text&&(0,l.jsx)(r.az,{marginBottom:6,marginTop:6,children:(0,l.jsx)(r.F_,{dismissButton:{accessibilityLabel:e.buttons[1].text,onDismiss:()=>{a(!1)}},iconAccessibilityLabel:t._('Info icon', 'experiences.experienceMetricsUnificationBanner.iconAccessibilityLabel', 'Accessibility label for info icon'),message:e.subtitle_text,primaryAction:{href:e.buttons[0].uri,label:e.buttons[0].text,accessibilityLabel:e.buttons[0].text,onClick:({dangerouslyDisableOnNavigation:e})=>e(),role:"link"},title:e.title_text,type:"info"})})})})};var em=i(668014),eg=i(652709);let ef=B.d1,ex=new r.rk(ef-1);function eb(e){let{button:t,onClick:i}=e;return t.url?(0,l.jsx)(r.vx,{color:"tertiary",fullWidth:!0,href:t.url,onClick:i,rel:(0,f.A)({url:t.url})?"nofollow":"none",text:t.text}):(0,l.jsx)(r.$n,{color:"tertiary",fullWidth:!0,onClick:i,text:t.text})}let ey=e=>{let t,{anchors:i,experience:n,dismiss:a,complete:o,scrollToDismiss:c,onAnchorHover:d,onAnchorTouch:p,idealDirection:u,zIndex:h}=e,m=!0,{message:g,anchor:f,complete_button:x}=(n||{}).display_data,b=i[f],y=()=>{t&&clearTimeout(t),a()},_=()=>{t||m||(t=setTimeout(()=>y(),1500)),m=!1};(0,s.useEffect)(()=>(b&&(c&&(window.addEventListener("scroll",_),window.addEventListener("touchmove",_)),p&&b&&b.addEventListener("click","complete"===p?o:y),d&&b&&b.addEventListener("mouseenter","complete"===d?o:y)),()=>{c&&(window.removeEventListener("scroll",_),window.removeEventListener("touchmove",_),t&&clearTimeout(t)),p&&b&&b.removeEventListener("click","complete"===p?o:y),d&&b&&b.removeEventListener("mouseenter","complete"===d?o:y)}),[b]);let{setObserverRef:v}=(0,eg.A)(),w=(0,l.jsx)(r.fT,{anchor:b,idealDirection:u,onDismiss:y,zIndex:ex,children:(0,l.jsx)(r.az,{ref:v,padding:4,tabIndex:0,children:(0,l.jsxs)(r.so,{direction:"column",gap:3,children:[(0,l.jsx)(r.KJ,{color:"light",children:g}),x&&(0,l.jsx)(eb,{button:x,onClick:o})]})})});return h?(0,l.jsx)(r.az,{position:"fixed",zIndex:h,children:w}):w},e_=e=>{(0,s.useEffect)(()=>{(0,n.A)("ExperiencePopover","/app/packages/experiences/Experiences/ExperiencePopover/ExperiencePopover.tsx")},[]);let{placementId:t,anchors:i,advertiserId:r}=e,[a,o]=(0,s.useState)(!0),{enableExperienceSession:c,endOnSurfaceChange:d}=(0,C.wQ)(t);return(0,l.jsx)(em.A,{name:"ExperiencePopoverEducational",children:a&&(0,l.jsx)(p.Ay,{enableExperienceSession:c,placementId:t,predicate:e=>{if(e?.type!==29)return!1;let{anchor:t}=(e||{}).display_data;return!!t&&!!i[t]},sessionEndOnSurfaceChange:d,targeting:r?{advertiserId:parseInt(r,10)}:null,children:({complete:t,dismiss:i,experience:n})=>(0,l.jsx)(ey,{...e,complete:()=>{o(!1),t()},dismiss:()=>{o(!1),i()},experience:n})})})};var ev=i(731237);let ew=(e,t)=>{let i=RegExp("\\b"+t+"\\b","i");return e===t||e.match(i)};function eA({children:e,experiences:t,placementId:i,searchTerm:n,suggestions:r}){let{viewExperience:a}=(0,ev.WJ)(),[o,l]=(0,s.useState)(null),[c,d]=(0,s.useState)(new Set),p=t?.filter(e=>e.display_data?.component_type===3).map(e=>({...e.display_data,id:e.experience_id}))||[];return(0,s.useEffect)(()=>{if(!n||!r)return void l(null);if(!o?.search_query_list.find(e=>r.some(({label:t})=>ew(t??"",e)))){let e=p.find(e=>e.id!==o?.id&&e.search_query_list?.find(e=>r.some(({label:t})=>ew(t??"",e))));if(e){l(e);let{id:t}=e;c.has(t)||("number"==typeof t&&a(i,t),d(new Set(c).add(t)))}}},[n]),e({searchDelightConfig:o})}function eE(e,t){return t.map(t=>((e,t)=>{let i=RegExp("\\b"+t+"\\b","i");if(!e.match(i))return null;let n=e.toLowerCase().indexOf(t.toLowerCase());return[e.slice(0,n),e.slice(n,n+t.length)]})(e,t)).filter(Boolean).sort((e,t)=>e&&t?t[1].length-e[1].length:0).shift()}function eC({searchDelightText:e,searchDelightConfig:t}){(0,s.useEffect)(()=>{(0,n.A)("SearchDelightText","/app/packages/experiences/Experiences/ExperienceSearchDelight/search-delight/SearchDelightText.tsx")},[]);let{text_background_color:i,text_colors:r=[]}=t,a=i?{backgroundColor:i,margin:"-2px",padding:"2px"}:void 0;if(!(r.length>1))return(0,l.jsx)("span",{style:{color:r[0],whiteSpace:"pre-wrap",...a},children:e},`searchDelight-${e}`);{let t=0;return(0,l.jsx)("span",{style:{whiteSpace:"pre-wrap",...a},children:e.split("").map((e,i)=>{let n=r[t];return" "!==e&&(t=(t+1)%r.length),(0,l.jsx)("span",{style:{color:n},children:e},`searchDelight-${i}`)})})}}function ej({allBold:e,searchDelightParts:t,searchDelightConfig:i,text:a,weightPivot:o}){(0,s.useEffect)(()=>{(0,n.A)("HighlightTermWithSearchDelight","/app/packages/experiences/Experiences/ExperienceSearchDelight/search-delight/HighlightTermWithSearchDelight.tsx")},[]);let c=t[1],d=a.indexOf(c),p=d+c.length;return o<=d?(0,l.jsxs)(s.Fragment,{children:[(0,l.jsx)(r.KJ,{color:"subtle",inline:!0,weight:e?"bold":"normal",children:a.substring(0,o)}),(0,l.jsxs)(r.KJ,{inline:!0,weight:"bold",children:[a.substring(o,d),(0,l.jsx)(eC,{searchDelightConfig:i,searchDelightText:c}),a.substring(p)]})]}):o<=p?(0,l.jsxs)(s.Fragment,{children:[(0,l.jsx)(r.KJ,{color:"subtle",inline:!0,weight:e?"bold":"normal",children:a.substring(0,d)}),(0,l.jsxs)(r.KJ,{inline:!0,weight:"bold",children:[(0,l.jsx)(eC,{searchDelightConfig:i,searchDelightText:c}),a.substring(p)]})]}):(0,l.jsxs)(s.Fragment,{children:[(0,l.jsx)(r.KJ,{color:"subtle",inline:!0,weight:e?"bold":"normal",children:a.substring(0,d)}),(0,l.jsx)(r.KJ,{inline:!0,weight:"bold",children:(0,l.jsx)(eC,{searchDelightConfig:i,searchDelightText:c})}),(0,l.jsx)(r.KJ,{color:"subtle",inline:!0,weight:e?"bold":"normal",children:a.substring(p,o)}),(0,l.jsx)(r.KJ,{inline:!0,weight:"bold",children:a.substring(o)})]})}function eS(e,t,i){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class ek extends s.Component{constructor(...e){super(...e),eS(this,"state",{surveyLoaded:!1}),eS(this,"loadSurvey",()=>{this.setState({surveyLoaded:!0}),this.props.view?.()}),eS(this,"handleDismiss",()=>{this.props.dismiss(),this.setState({surveyLoaded:!1})}),eS(this,"handleComplete",()=>{this.props.complete(),this.setState({surveyLoaded:!1})})}componentDidMount(){(0,n.A)("ExternalSurvey","/app/packages/experiences/Experiences/ExperienceSurvey/ExternalSurvey.tsx");let{displayData:{delay:e}}=this.props;this.surveyTimer=window.setTimeout(this.loadSurvey,e)}componentWillUnmount(){clearTimeout(this.surveyTimer)}render(){if(!this.state.surveyLoaded)return null;let{displayData:{buttons:e,detailed_text:t,title_text:i},setObserverRef:n}=this.props;return(0,l.jsx)(en.Ay,{accessibilityModalLabel:this.props.i18n._('Would you mind taking a survey?', 'User eval survey', 'User eval survey'),footer:(0,l.jsx)(r.so,{alignItems:"stretch",justifyContent:"end",children:e.map(e=>{if(!e.uri)return(0,l.jsx)(r.az,{marginStart:1,children:(0,l.jsx)(r.$n,{fullWidth:!0,onClick:this.handleDismiss,text:e.text})},e.text);{let t=e.uri,i=(0,f.A)({url:t});return(0,l.jsx)(r.az,{marginStart:1,children:(0,l.jsx)(r.vx,{color:"primary",fullWidth:!0,href:t,onClick:this.handleComplete,rel:i?"nofollow":"none",target:"blank",text:e.text})},e.text)}})}),heading:i,onDismiss:this.handleDismiss,size:"sm",children:(0,l.jsx)(r.az,{ref:n,padding:3,children:(0,l.jsx)(r.KJ,{children:t})})})}}function eI(e){(0,s.useEffect)(()=>{(0,n.A)("ExternalSurvey","/app/packages/experiences/Experiences/ExperienceSurvey/ExternalSurvey.tsx")},[]);let t=(0,o.A)();return(0,l.jsx)(ek,{...e,i18n:t})}var eP=i(979638);function eT(e,t,i){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class eR extends s.Component{constructor(...e){super(...e),eT(this,"isOnClose",this.props.onCloseEnabled&&2===this.props.actionTrigger),eT(this,"state",{surveyAccepted:!1,surveyLoaded:!1,surveyLoadFailed:!1,showSurveyOnClose:this.isOnClose}),eT(this,"loadSurvey",(e=!0)=>{let{onView:t}=this.props;e&&t?.(),this.setState({surveyLoaded:!0})}),eT(this,"processIFrameMessage",e=>{let{presentationDelay:t=5e3,onComplete:i,surveyLink:n,onCloseEnabled:s}=this.props,r=e.origin||e.originalEvent.origin;n.startsWith(r)&&("surveyFinished"===e.data?i():"surveyLoaded"===e.data&&(window.clearTimeout(this.loadSurveyFailureTimeout),this.isOnClose&&this.showSurveyOnLeavingPage(),s?this.actionTriggerHandler():this.loadSurveyTimeout=window.setTimeout(this.loadSurvey,t)))}),eT(this,"handleShowSurvey",()=>{this.setState({surveyAccepted:!0})})}componentDidMount(){(0,n.A)("AnketSurvey","/app/www/common/AnketSurvey/AnketSurvey.tsx"),window.addEventListener("message",this.processIFrameMessage),this.loadSurveyFailureTimeout=window.setTimeout(()=>{this.state.surveyLoaded||(window.clearTimeout(this.loadSurveyTimeout),this.setState({surveyLoadFailed:!0}))},15e3)}componentWillUnmount(){window.removeEventListener("message",this.processIFrameMessage),window.clearTimeout(this.loadSurveyTimeout),window.clearTimeout(this.loadSurveyFailureTimeout),this.isOnClose&&this.props.unblock()}actionTriggerHandler(){let{actionTrigger:e,presentationDelay:t=5e3}=this.props;switch(e){case 1:this.loadSurvey();break;case 2:this.loadSurvey(!1);break;default:this.loadSurveyTimeout=window.setTimeout(this.loadSurvey,t)}}showSurveyOnLeavingPage(){let{onView:e,block:t}=this.props;t(()=>{e?.(),this.setState({showSurveyOnClose:!1})})}render(){let{surveyAccepted:e,surveyLoadFailed:t,surveyLoaded:i,showSurveyOnClose:n}=this.state;if(t)return null;let{acceptButtonText:s,bodyText:a,declineButtonText:o,onDismiss:c,subtitleText:d,surveyLink:p,titleText:u,setObserverRef:h}=this.props,m=(0,l.jsx)("iframe",{"data-test-id":"anket-iframe",src:p,style:e?{border:0,minHeight:810,paddingBottom:4,width:"100%"}:{display:"none"},title:this.props.i18n._('Pinterest Survey', 'Accessible label for survey frame', 'Accessible label for survey frame')});return i&&!n?(0,l.jsx)(r.az,{position:"absolute",zIndex:new r.rk(1e3),children:(0,l.jsxs)(r.aF,{accessibilityModalLabel:this.props.i18n._('Have a few minutes to take a survey?', 'User evaluation survey', 'User evaluation survey'),footer:!e&&(0,l.jsxs)(r.az,{display:"flex",justifyContent:"end",paddingX:1,children:[(0,l.jsx)(r.az,{dangerouslySetInlineStyle:{__style:{padding:"6px 8px"}},children:(0,l.jsx)(r.$n,{fullWidth:!0,onClick:()=>{this.setState({surveyAccepted:!1}),c()},text:o})}),(0,l.jsx)(r.az,{dangerouslySetInlineStyle:{__style:{padding:"6px 8px"}},children:(0,l.jsx)(r.$n,{color:"primary",fullWidth:!0,onClick:this.handleShowSurvey,text:s})})]}),heading:e?"":u,onDismiss:c,padding:"none",role:"alertdialog",size:e?"lg":"md",children:[(0,l.jsx)(r.az,{ref:h,children:m}),!e&&(0,l.jsxs)(r.az,{padding:3,children:[(0,l.jsx)(r.KJ,{children:d}),(0,l.jsx)(r.KJ,{children:a})]})]})}):m}}let ez=function(e){let t=(0,o.A)(),[i,n]=(0,s.useState)(!1),r=(0,s.useRef)(null),a=(0,eP.KP)(i);return(0,s.useEffect)(()=>{"blocked"===a.state&&r.current?.()},[a.state]),(0,l.jsx)(eR,{...e,block:e=>{r.current=e,n(!0)},i18n:t,onCloseEnabled:!1,unblock:()=>{n(!1),r.current=null,"blocked"===a.state&&a.proceed()}})},eO=e=>{let{complete:t,dismiss:i,view:n,displayData:s}=e,{setObserverRef:r}=(0,C.NM)(),{anket:a,buttons:o,delay:c,detailed_text:d,subtitle_text:p,title_text:u,action_trigger:h=3}=s,[m,g]=o;return a?(0,l.jsx)(ez,{acceptButtonText:g?.text||"",actionTrigger:h,bodyText:d,declineButtonText:m?.text||"",onComplete:t,onDismiss:i,onView:n,presentationDelay:c,setObserverRef:r,subtitleText:p,surveyLink:g?.uri||"",titleText:u}):(0,l.jsx)(eI,{complete:t,dismiss:i,displayData:s,setObserverRef:r,view:n})},eB=e=>{let{experienceId:t,displayData:i}=e,{delay:n=0}=i,r={...i,delay:0},a={...e,displayData:{...r}},o=(0,s.useRef)(void 0),[c,d]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let e=["/pin-builder","/idea-pin-builder"],t=e=>window.location.pathname.includes(e),i=()=>{e.some(t)?o.current=setTimeout(()=>i(),3e3):d(!0)};return o.current=setTimeout(()=>i(),n),()=>{clearTimeout(o.current)}},[t,n]),c?(0,l.jsx)(eO,{...a}):null};function eD(e){(0,s.useEffect)(()=>{(0,n.A)("ExperienceSurvey","/app/packages/experiences/Experiences/ExperienceSurvey/ExperienceSurvey.tsx")},[]);let{placementId:t,experience:i,targeting:r,eligibleIds:a}=e,{enableExperienceSession:o,endOnSurfaceChange:c}=(0,C.wQ)(t);return(0,l.jsx)(p.Ay,{disableAutoView:!0,eligibleIds:a||[],eligibleTypes:[5],enableExperienceSession:o,experience:i,placementId:t,sessionEndOnSurfaceChange:c,targeting:r,children:({complete:e,dismiss:i,view:n,experience:s})=>{let r=s.display_data,a=s.experience_id;return 1000421===t?(0,l.jsx)(eB,{complete:e,dismiss:i,displayData:r,experienceId:a,view:n}):(0,l.jsx)(eO,{complete:e,dismiss:i,displayData:r,experienceId:a,view:n})}})}var eL=i(567176);let eM=e=>{(0,s.useEffect)(()=>{(0,n.A)("ExperienceToast","/app/packages/experiences/Experiences/ExperienceToast/ExperienceToast.tsx")},[]);let{logContextEvent:t}=(0,a.o)();return(0,l.jsx)(p.Ay,{eligibleIds:e.eligibleIds,eligibleTypes:[10],placementId:e.placementId,children:({complete:i,dismiss:n,experience:{display_data:s}})=>{let r=s.link||e.linkUrl;return(0,l.jsx)(eL.A,{duration:s.duration,href:r,onClick:()=>{i(),e.onClick&&e.onClick(),e.shouldLogClicks&&e.shouldLogClicks&&t({event_type:101,object_id_str:e.objectId,component:e.thriftComponentType,element:e.thriftElementType})},onHide:()=>{e.onHide(),e.completionOnDismissal?i():n()},text:s.text||""})}})};var eN=i(706466);function eW(e,t,i){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class eF extends s.Component{constructor(...e){super(...e),eW(this,"componentDidMount",()=>{let{delay:e=2e3}=this.props;this.experienceToastsTimeout=window.setTimeout(()=>this.triggerEducationToasts(),e)})}componentWillUnmount(){window.clearTimeout(this.experienceToastsTimeout)}triggerEducationToasts(){let{toastManagerContext:e,completionOnDismissal:t,placementId:i,experienceIds:n}=this.props;e.showToast(({hideToast:e})=>(0,l.jsx)(eM,{completionOnDismissal:t,eligibleIds:n,onHide:e,placementId:i,shouldLogClicks:!1}))}render(){return null}}function eV(e){return(0,s.useEffect)(()=>{(0,n.A)("ExperienceToastLaunchWrapper","/app/packages/experiences/Experiences/ExperienceToast/ExperienceToastLaunchWrapper.tsx")},[]),(0,l.jsx)(eF,{...e,toastManagerContext:(0,eN.CG)()})}function eU(e,t,i){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}eW(eF,"defaultProps",{completionOnDismissal:!1});class eH extends s.PureComponent{constructor(...e){super(...e),eU(this,"onScroll",()=>{let{dismiss:e}=this.props;this.dismissed||this.timer||(this.timer=setTimeout(()=>{e(),this.dismissed=!0,this.timer=void 0},3e3))}),eU(this,"dismissed",!1)}componentDidMount(){window.addEventListener("scroll",this.onScroll)}componentWillUnmount(){this.timer&&clearTimeout(this.timer)}render(){let{anchor:e,text:t,thumbnails:i,idealDirection:n,forceDirection:s}=this.props,a=i.slice(-3);return(0,l.jsx)(r.AM,{anchor:e,color:"white",forceDirection:s,idealDirection:n,onDismiss:this.onScroll,shouldFocus:!1,size:"md",children:(0,l.jsxs)(r.az,{alignContent:"center",display:"flex",justifyContent:"between",padding:3,width:"100%",children:[(0,l.jsx)(r.az,{alignItems:"center",display:"flex",flex:"grow",justifyContent:"center",marginStart:-3,paddingX:3,children:(0,l.jsx)(r.KJ,{color:"default",weight:"bold",children:t})}),(0,l.jsx)(r.az,{display:"flex",marginEnd:-2,paddingX:2,children:a.map(e=>(0,l.jsx)(r.az,{height:60,paddingX:1,width:50,children:(0,l.jsx)(r.n1,{height:60,rounding:200,children:(0,l.jsx)(r._V,{alt:"More Ideas Thumbnail",color:"rgb(86, 152, 239)",fit:"cover",naturalHeight:60,naturalWidth:60,src:e})})},e))})]})})}}var e$=i(650083),eK=i(932369),eG=i(250325),eJ=i(671996),eY=i(828323),eX=i(81920),eq=i(856748);function eQ({children:e}){let t,i,{isSessionEnabledPlacement:n}=(0,C.wQ)(),r=(0,x.Ay)(),a=(0,s.useMemo)(()=>({device:r,platform:(0,x.bh)(r)?5:6}),[r]),o=(0,s.useRef)({}),c=(0,s.useCallback)((e,t)=>{e&&!o.current[e]&&(0,eX.GV)(eJ.Hi,{sampleRate:.1,tags:{...a,placementId:e,experienceId:t||"none"}})},[o,a]),d=(0,s.useCallback)((e,t)=>{o.current[e]=t},[o]),[p,u]=(0,s.useReducer)((e,t)=>{let i=t.payload;if("MOUNT_PLACEMENT"===t.type)return e.mountedPlacements[i]&&(0,eX.GV)(eJ.al,{sampleRate:.1,tags:{...a,placementId:i}}),{...e,mountedPlacements:{...e.mountedPlacements,[i]:!0}};if("UNMOUNT_PLACEMENT"===t.type){let t={...e};return delete t.mountedPlacements[i],delete t.registeredAfterActionPlacements[i],t}return"REGISTER_AFTER_ACTION_PLACEMENT"===t.type?{...e,registeredAfterActionPlacements:{...e.registeredAfterActionPlacements,[i]:!0}}:e},{mountedPlacements:{},registeredAfterActionPlacements:{}}),{mountedPlacements:h,registeredAfterActionPlacements:m}=p,g=(0,$.wA)(),f=(0,$.d4)(e=>e.experiences),b=(0,eK.Hy)(),y=(0,eK._4)(),_=(0,eK.Dz)(),{checkSurfaceForRefresh:v}=(t=(0,eP.zy)(),i=(0,$.d4)(e=>e.experiences),{checkSurfaceForRefresh:(e,n,s={})=>{let{dontRefreshSSRPlacements:r=!1,experimentType:a,checkIfMounted:o=!0}=s,l=(0,O.C3)(t);l&&l.placements.forEach(t=>{((e,t,n,s,r=!0,a,o)=>{let{shouldRefresh:l,refreshReasoning:c}=(0,O.Pf)(n,t,a,i[n],s,r);l||(e[n]=i[n]),o&&(0,eX.GV)(`${o}.${l?"refreshed":"not_refreshed"}`,{tags:{placementId:n,refreshReasoning:c}})})(e,n,t,r,o,l,a)})}}),w=async(e,t,i=!1)=>{try{let{resource_response:n}=await (0,eK.Y4)(e,t),{data:s}=n||{};s&&(v(s,p,{dontRefreshSSRPlacements:i,experimentType:"experience_framework_home_feed_init_fetch"}),g((0,eq.vv)(s)))}catch(e){(0,eX.GV)("experience_framework_home_feed_init_fetch.error",{tags:{...a,type:e instanceof Error?e.name:"unknown"}})}},A=(e,t,i)=>{let{isExperienceInitFetch:n,dontRefreshSSRPlacements:s}=i||{};n?w(e,t,s):g((0,eG.$O)(e,t))},E=(0,s.useMemo)(()=>({...(0,e$.bindActionCreators)({completeExperience:b,dismissExperience:y,fetchAllExperiencesMulti:eK.EZ,fetchExperienceForPlacements:eK.xL,mountPlacement:eK.hG,triggerExperimentsForPlacement:eK.vI,viewExperience:_},g),fetchAllExperiences:A,mountPlacement:(e,t,i,s)=>{let{enableExperienceSession:r}=n(e);g((0,eK.hG)(e,t,i,s||r)),u({type:"MOUNT_PLACEMENT",payload:e})},unmountPlacement:e=>{u({type:"UNMOUNT_PLACEMENT",payload:e})},registerAfterActionPlacement:e=>{u({type:"REGISTER_AFTER_ACTION_PLACEMENT",payload:e})},checkUsePlacementCalls:c,setUsePlacementCalls:d}),[b,y,g,u,_]),j=(0,s.useMemo)(()=>({experiences:f,mountedPlacements:h,registeredAfterActionPlacements:m,...E}),[f,h,m,E]);return(0,l.jsx)(eY._z,{value:j,children:e})}function eZ(e,t,i){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class e0 extends s.Component{constructor(...e){super(...e),eZ(this,"dismissRef",(0,s.createRef)()),eZ(this,"state",{paused:!1}),eZ(this,"dismissCb",()=>{this.dismissRef.current?.()})}componentWillUnmount(){let{anchor:e}=this.props;this.timer&&clearTimeout(this.timer),e?.removeEventListener("click",this.dismissCb)}setDefaultTooltip(e){e.has_tooltip=null==e.has_tooltip||e.has_tooltip}getText(e,t,i){return(t&&e.text.replace("{boardName}",t),i)?i(e):e.text}render(){let{anchor:e,customWrapper:t,experienceIds:i,boardTextOverride:n,fontSize:a,forceDirection:o,hasFullWidthButton:c=!0,idealDirection:d,useMasonryFlyout:u,noClickToDismiss:h,onClickComplete:m,onClickDismiss:g,placementId:f,shouldTimeoutDismiss:x,textAlign:b,textOverflow:y,textOverrideFn:_,textWeight:v,customizedComplete:w,advertiserId:A,dismissButtonLocation:E,dismissButtonMarginTop:C,zIndex:j}=this.props,S=t||(({children:e})=>u?(0,l.jsx)(r.Wd,{children:e}):e);return(0,l.jsx)(p.Ay,{eligibleIds:i,eligibleTypes:[8],placementId:f,targeting:A?{advertiserId:parseInt(A,10)}:null,children:({complete:t,dismiss:i,experience:p})=>{let{display_data:{scroll_to_dismiss:u,scroll_to_dismiss_delay_in_seconds:f=0,...A}}=p,k=u&&e,I=()=>{P(),this.timer||(this.timer=setTimeout(i,1e3*f))},P=()=>{k&&(window.removeEventListener("scroll",I),window.removeEventListener("touchmove",I))},T=()=>{P(),t()};return(k&&(window.addEventListener("scroll",I),window.addEventListener("touchmove",I)),this.setDefaultTooltip(A),A.has_tooltip)?(x&&A.disappearTime&&A.disappearTime>0&&(this.timer=setTimeout(()=>(I(),null),A.disappearTime)),A.has_tooltip&&(this.dismissRef.current=I,e?.addEventListener("click",this.dismissCb)),(0,l.jsx)(s.Fragment,{children:A.has_tooltip&&!this.state.paused&&(A.thumbnail_urls?(0,l.jsx)(eH,{anchor:e,dismiss:I,forceDirection:o,idealDirection:d||"down",text:A.text,thumbnails:A.thumbnail_urls}):(0,l.jsx)(S,{children:(0,l.jsx)(r.fT,{anchor:e,forceDirection:o,idealDirection:d||"down",onDismiss:h?()=>{}:I,shouldFocus:!1,size:"sm",zIndex:j,children:(0,l.jsxs)(r.az,{column:12,padding:3,children:[(0,l.jsxs)(r.KJ,{align:"right"===b?"end":b,color:"light",overflow:y,size:a,weight:v||"bold",children:[this.getText(A,n,_),A.secondary_cta_link&&(0,l.jsx)(r.az,{display:"inlineBlock",marginStart:1,children:(0,l.jsx)(r.KJ,{color:"light",size:a,weight:"bold",children:(0,l.jsx)(r.N_,{display:"inlineBlock",href:A.secondary_cta_link.url,target:"blank",underline:"hover",children:A.secondary_cta_link.text})})})]}),A.sub_text&&(0,l.jsx)(r.az,{paddingY:2,children:(0,l.jsx)(r.KJ,{color:"light",size:a,children:A.sub_text})}),(A.dismiss_button_text||A.complete_button_text)&&(0,l.jsxs)(r.az,{alignItems:"center",display:"flex",justifyContent:E||"start",marginTop:C||2,children:[A.dismiss_button_text&&(0,l.jsx)(r.az,{column:6,marginEnd:1,children:(0,l.jsx)(r.$n,{color:"tertiary",fullWidth:c,onClick:()=>{g&&g(),I()},size:"md",text:A.dismiss_button_text})}),A.complete_button_text&&(0,l.jsx)(r.az,{column:A.dismiss_button_text?6:12,children:w?(0,l.jsx)(r.Rp,{fullHeight:!0,onTap:()=>{T(),m&&m()},rounding:200,children:(0,l.jsx)(r.az,{color:"default",dangerouslySetInlineStyle:{__style:{padding:"10px"}},display:"flex",justifyContent:"center",padding:2,rounding:200,children:(0,l.jsx)(r.KJ,{color:"light",weight:"bold",children:A.complete_button_text})})}):(0,l.jsxs)(r.so,{justifyContent:"center",children:[A.complete_button_cta_url&&(0,l.jsx)(r.vx,{color:"tertiary",fullWidth:c,href:A.complete_button_cta_url,onClick:({event:e})=>{e.preventDefault(),e.stopPropagation(),T(),m&&m()},size:"md",target:A.complete_button_cta_url?"blank":null,text:A.complete_button_text}),!A.complete_button_cta_url&&(0,l.jsx)(r.$n,{color:"tertiary",fullWidth:c,onClick:()=>{T(),m&&m()},size:"md",text:A.complete_button_text})]})})]})]})})}))})):(T(),null)}})}componentDidMount(){(0,n.A)("ExperienceTooltip","/app/packages/experiences/Experiences/ExperienceTooltip/ExperienceTooltip.tsx")}}eZ(e0,"defaultProps",{fontSize:"300",positionRelativeToAnchor:!0});let e1=new r.rk(669),e2={1:"up",2:"right",3:"down",4:"left"},e6=({anchors:e={},complete:t,dismiss:i,displayData:a,idealDirection:o,platform:c,touchToDismiss:d=!0,useMasonryFlyout:p=!1})=>{(0,s.useEffect)(()=>{(0,n.A)("Tooltip","/app/packages/experiences/Experiences/ExperienceTooltip/tooltip/Tooltip.tsx")},[]);let{anchors_by_platform:u,button_text:h,button_uri:m,display_type:g,flyout_direction:f,scroll_to_dismiss:x,scroll_to_dismiss_delay_in_seconds:b=0,text:y}=a||{},_=e[u[c]?.anchor],v=(0,s.useCallback)(()=>{x&&(window.removeEventListener("scroll",v),window.removeEventListener("touchmove",v)),d&&_&&_.removeEventListener("click",v),setTimeout(()=>i(),1e3*b)},[_]);if((0,s.useEffect)(()=>{_&&(x&&(window.addEventListener("scroll",v),window.addEventListener("touchmove",v)),d&&_.addEventListener("click",v))},[_]),!_)return null;let w=e2[f],A=m&&(m.startsWith("https://")||m.startsWith("http://")),E=()=>{x&&(window.removeEventListener("scroll",v),window.removeEventListener("touchmove",v)),d&&_.removeEventListener("click",v),t()};return(0,l.jsx)(s.Fragment,{children:1===g&&(0,l.jsx)(({children:e})=>p?(0,l.jsx)(r.Wd,{zIndex:e1,children:e}):(0,l.jsx)(r.az,{zIndex:e1,children:e}),{children:(0,l.jsx)(r.fT,{anchor:_,idealDirection:w||o||"down",onDismiss:v,shouldFocus:!1,size:"sm",children:(0,l.jsxs)(r.az,{padding:4,width:"220px",children:[(0,l.jsx)(r.KJ,{align:"center",color:"light",weight:"bold",children:y}),h?(0,l.jsx)(r.az,{display:"flex",justifyContent:"center",marginTop:4,children:(0,l.jsx)(r.az,{column:8,children:m?(0,l.jsx)(r.vx,{color:"tertiary",fullWidth:!0,href:m,onClick:({dangerouslyDisableOnNavigation:e})=>{e(),E()},size:"md",target:A?"blank":null,text:h}):(0,l.jsx)(r.$n,{color:"tertiary",fullWidth:!0,onClick:E,size:"md",text:h})})}):null]})})})})},e5=({anchors:e,idealDirection:t,onCompleteByAnchor:i,placementId:r,positionRelativeToAnchor:a,touchToDismiss:o,useMasonryFlyout:c})=>{(0,s.useEffect)(()=>{(0,n.A)("ExperienceTooltipAnchor","/app/packages/experiences/Experiences/ExperienceTooltip/ExperienceTooltipAnchor.tsx")},[]);let d=(0,x.M)();return(0,l.jsx)(p.Ay,{placementId:r,predicate:t=>{let{display_data:i}=t;if(i?.component_type===2){let{anchors_by_platform:t}=i;if(t?.web){let{anchor:i,placement:n}=t.web;return n===r&&i in e}}return!1},children:({complete:n,dismiss:s,experience:r})=>(0,l.jsx)(e6,{anchors:e,complete:n,dismiss:s,displayData:r.display_data,idealDirection:t,onCompleteByAnchor:i,platform:d?"web_mobile":"web",positionRelativeToAnchor:a,touchToDismiss:o,useMasonryFlyout:c})})};class e3 extends s.Component{constructor(...e){var t,i,n;super(...e),i={paused:!1},(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t="state","string"))?n:n+"")in this?Object.defineProperty(this,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[t]=i}componentDidMount(){(0,n.A)("ExperienceTooltipNoButtons","/app/packages/experiences/Experiences/ExperienceTooltip/ExperienceTooltipNoButtons.tsx"),this.props.onExperienceMount&&this.experience&&this.props.onExperienceMount(this.experience)}componentWillUnmount(){this.timer&&clearTimeout(this.timer)}renderFlyout(e){let{anchor:t,flyoutSize:i,idealDirection:n}=this.props;return(0,l.jsx)(r.fT,{anchor:t,idealDirection:n||"down",message:e,onDismiss:()=>{},size:i})}render(){let{experienceIds:e,placementId:t,shouldTimeoutDismiss:i}=this.props;return(0,l.jsx)(p.Ay,{eligibleIds:e,eligibleTypes:[8],placementId:t,children:({complete:e,dismiss:t,experience:n})=>{this.experience=n;let{display_data:s}=n;return s.has_tooltip?(i&&s.disappearTime&&s.disappearTime>0&&(this.timer=setTimeout(()=>(t(),null),s.disappearTime)),(0,l.jsx)(r.az,{"data-test-id":"experience-tooltip-no-buttons",zIndex:new r.rk(10),children:s.has_tooltip&&!this.state.paused&&this.renderFlyout(s.text)})):(e(),null)}})}}function e8(e){(0,s.useEffect)(()=>{(0,n.A)("PinnerUpgradeToBusinessBanner","/app/packages/experiences/Experiences/ExperienceUpsellPinnersToPartner/PinnerUpgradeToBusinessBanner.tsx")},[]);let t=(0,o.A)(),{handleComplete:i,handleDismiss:a}=e;return(0,l.jsx)(r.az,{marginBottom:2,marginEnd:"auto",marginStart:"auto",marginTop:2,width:"55%",children:(0,l.jsx)(r.Sl,{dismissButton:{accessibilityLabel:t._('Dismiss Banner Button', 'PinnerUpgradeToBusinessBanner.primaryAction.accesibility', 'Dismis Banner Button accesibility Label of the Banner to upgrade pinners to business account'),onDismiss:a},imageData:{component:(0,l.jsx)(r.In,{accessibilityLabel:"graph",color:"default",icon:"graph-bar",size:45})},message:t._('Upgrade to a free Pinterest business account to unlock tools that help drive traffic, grow your audience and sell more products', 'PinnerUpgradeToBusinessBanner.message', 'Message of the Banner to upgrade pinners to business account'),primaryAction:{label:t._('Upgrade', 'PinnerUpgradeToBusinessBanner.primaryAction', 'Upgrade action of the Banner to upgrade pinners to business account'),href:"/business/convert/",accessibilityLabel:t._('Upgrade Button', 'PinnerUpgradeToBusinessBanner.primaryAction.accesibility', 'Upgrade Button accesibility Label of the Banner to upgrade pinners to business account'),onClick:i,role:"link"},title:t._('Discover your top performing Pins', 'PinnerUpgradeToBusinessBanner.title.variant_a', 'Title of the Banner to upgrade pinners to business account')})})}let e7=({placementId:e})=>((0,s.useEffect)(()=>{(0,n.A)("ExperiencePinnerUpgradeToBusinessBanner","/app/packages/experiences/Experiences/ExperienceUpsellPinnersToPartner/ExperiencePinnerUpgradeToBusinessBanner.tsx")},[]),(0,l.jsx)(p.Ay,{eligibleIds:[503755],placementId:e,children:({complete:e,dismiss:t})=>(0,l.jsx)(e8,{handleComplete:e,handleDismiss:t})}))},625844(e,t,i){i.d(t,{Dq:()=>s,KP:()=>a,RQ:()=>o,XB:()=>r,yU:()=>n});let n="REFRESH_ALL_EXPERIENCES_MULTI",s="UPDATE_EXPERIENCE_MULTI",r="FETCH_EXPERIENCES",a="REFRESH_ALL_EXPERIENCES",o="UPDATE_EXPERIENCE"},856748(e,t,i){i.d(t,{$d:()=>r,Uh:()=>a,YT:()=>l,iN:()=>s,vv:()=>o});var n=i(625844);let s=e=>({type:n.yU,payload:{experiencesMulti:e}}),r=(e,t,i)=>({type:n.Dq,payload:{placementId:e,experienceId:t,status:i}}),a=(e,t,i)=>({type:n.RQ,payload:{placementId:e,experienceId:t,status:i}}),o=e=>({type:n.KP,payload:{experiences:e}}),l=e=>({type:n.XB,payload:{experiences:e}})},616911(e,t,i){i.d(t,{lC:()=>g,Du:()=>j,V6:()=>m,dz:()=>A,al:()=>b,NW:()=>x,JY:()=>E,Pf:()=>f,$1:()=>C,C3:()=>y});var n=i(859471),s=i(19821),r=i(671996),a=i(115795);let o=[11,1000168,40001],l={1:{id:1,route:"/",onRoute:a.rz,placements:[11,1000541,1000503,40001]},13:{id:13,route:"/business/hub/",onRoute:a.Zm,placements:[1000168]}};var c=i(307079),d=i(386379),p=i(81920),u=i(562615);let h={display_data:{},experience_id:1,id:"noop",placement_id:0,type:0};function m(e,t){let i=!!(e&&"object"==typeof e&&Object.keys(e).length>0&&Object.keys(h).every(t=>t in e))&&1!==e.experience_id&&0!==e.type;if(t){if(!i)return!1;if("experience_id"in t)return e.experience_id===t.experience_id;if("type"in t)return e.type===t.type;if("status"in t)return"status"in e&&e.status===t.status;throw Error("Invalid options provided to isExperience. Options must be one of: { experience_id: number }, { type: number }, or { status: ExperienceStatus }")}return i}function g(e){return!!e&&0!==e.type}let f=(e,t,i,n,s,r=!0)=>{let a="existingExperience";return n?g(n)?i&&(a="placementInSurface",!i.placements.includes(e))?{shouldRefresh:!0,refreshReasoning:"placementNotInSurface"}:s?(a="inSSRPlacement",o.includes(e)?{shouldRefresh:!1,refreshReasoning:a}:{shouldRefresh:!0,refreshReasoning:"notAnSSRPlacement"}):!r||(a="placementMounted",t.mountedPlacements[e]||t.registeredAfterActionPlacements[e])?{shouldRefresh:!1,refreshReasoning:a}:{shouldRefresh:!0,refreshReasoning:"placementNotMounted"}:{shouldRefresh:!0,refreshReasoning:"experienceNotRenderable"}:{shouldRefresh:!0,refreshReasoning:"noExistingExperience"}},x=(e,t,i)=>{let n=e[i];return t[i]&&g(n)?n:null};function b(e){return e.display_data?.anchor}function y(e){return Object.values(l).find(t=>t.onRoute?t.onRoute(e):t.route===e.pathname)}let _=/<(\w+)\s*([^>]*)>([^<]*)<\/\1>/gim,v=/(?:href)=["']?([^"'>\s\\]*)["']?/im,w=/(?:target)=["']?([^"'>\s\\]*)["']?/im,A=(e,t)=>{let i=function(e){let t=[],i=0;for(let n of Array.from(e.matchAll(_))){if(n.index>i){let s=e.slice(i,n.index);s&&t.push({type:"text",content:s})}let[s,r,a,o]=n;switch(r){case"a":t.push({type:"link",content:o||"",attrs:a||""});break;case"b":t.push({type:"bold",content:o||""});break;default:t.push({type:"text",content:s})}i=n.index+s.length}if(i<e.length){let n=e.slice(i);n&&t.push({type:"text",content:n})}return t}(e);return(0,u.jsx)(s.KJ,{inline:!0,size:t,children:i.map(({type:e,content:i,attrs:r},a)=>{switch(e){case"text":return(i?.split(`
`)||[]).map((e,r)=>(0,u.jsxs)(n.Fragment,{children:[r>0&&(0,u.jsx)("br",{}),(0,u.jsx)(s.KJ,{inline:!0,size:t,children:e})]},`${i}-${r}`));case"bold":return(0,u.jsx)(s.KJ,{inline:!0,size:t,weight:"bold",children:i},`${i}-${a}`);case"link":let o=r?.match(v),l=o&&o.length>1?o[1]:void 0,c=r?.match(w),p=c&&c.length>1?c[1]:void 0;if(!l)return(0,u.jsx)(s.KJ,{inline:!0,size:t,children:i},`${i}-${a}`);let h=!1;return h=(0,d.A)({url:l}),(0,u.jsx)(s.N_,{display:"inline",externalLinkIcon:h?"default":"none",href:l,rel:h?"nofollow":"none",target:"_blank"===p?"blank":void 0,children:i},`${l}-${a}`);default:return null}})})},E=()=>"u">typeof window&&performance&&performance.now?Math.floor(performance.now()):Math.floor(Date.now()),C=(0,c.A)()&&(0,c.A)().debug_experience_session?console:{log:(...e)=>{},error:(...e)=>{},warn:(...e)=>{}};function j(e,t,i,n=1){(0,p.GV)(r.pv,{sampleRate:1,tags:{experience_id:e,placement_id:t,reason:i,platform:n}})}},298146(e,t,i){i.d(t,{A:()=>s});var n=i(427471);function s({url:e,method:t,data:i,ignoreBookmark:s,callOptions:r,headers:a}){let o={url:e,data:i,...null!=s?{ignore_bookmark:s}:{},..."PATCH"===t?{patchInsteadOfPut:!0}:{}},l=n.A.create("ApiResource",o);switch(t){case"POST":return l.callCreate(r,a);case"PUT":case"PATCH":return l.callUpdate(r,a);case"DELETE":return l.callDelete(r,a);default:return l.callGet(r,a)}}},995273(e,t,i){i.d(t,{GV:()=>p,QN:()=>c,aj:()=>h,m2:()=>d,nH:()=>l,ou:()=>u});var n=i(19821),s=i(283652),r=i(201593),a=i(628001),o=i(770697);let l=new n.rk(1e3),c=new n.K5([o.f,a.U7,s.gJ]),d=new n.K5([c]),p=12,u=({variant:e,isDarkMode:t})=>{let i=t?r.be:"#FFFFFF";return{__style:"fullpage"===e?{backgroundColor:i,touchAction:"none",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",width:"100%",height:"100%",left:0,right:0,top:0,bottom:0,zIndex:1,overflowY:"hidden"}:"fullscreen"===e?{backgroundColor:i,touchAction:"none",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",width:"90vw",height:"70vh",borderRadius:"8px",zIndex:1,left:"5vw",bottom:"13vh",overflowY:"hidden"}:"tablet"===e?{backgroundColor:i,border:void 0,borderRadius:"32px",top:"50%",left:"50%",minWidth:"350px",overflow:"hidden",touchAction:"none",transform:"translate(-50%, -50%)",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",zIndex:1}:"footer"===e?{backgroundColor:i,border:t?void 0:"1px solid #efefef",borderRadius:"32px 32px 0 0",bottom:0,boxShadow:"0 0 16px rgba(0,0,0, 0.16)",left:0,touchAction:"none",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",width:"100vw",zIndex:1}:"signup"===e||"euPrompt"===e?{backgroundColor:i,border:void 0,borderRadius:"32px",top:"50%",touchAction:"none",transform:"translate(0%, -50%)",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",zIndex:1,left:"euPrompt"===e?"5%":"8px",right:"euPrompt"===e?"5%":"8px",overflow:"auto"}:"repinPage"===e?{backgroundColor:t?r.ee:"#FFFFFF",borderRadius:"32px 32px 0 0",border:t?void 0:"1px solid #efefef",bottom:0,boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.1)",left:"0px",maxHeight:"100%",overflow:"hidden",touchAction:"none",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",width:"100vw",zIndex:1}:{backgroundColor:i,borderRadius:"32px 32px 0 0",border:t?void 0:"1px solid #efefef",bottom:0,boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.1)",left:"0px",maxHeight:"100%",overflow:"hidden",touchAction:"none",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",width:"100vw",zIndex:1}}},h=({isFullscreen:e,isTablet:t,isShowing:i,isRelatedInterestsModal:n,isDarkMode:s})=>{let r={border:s?void 0:"1px solid #efefef",touchAction:"none",width:"100vw",height:"",zIndex:1,left:0,bottom:0,borderRadius:"32px 32px 0px 0px",boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.1)"},a=i?"translateY(0)":"translateY(100vh)";return r.height=e?"100vh":"",t&&n&&(r={...r,width:425,left:"50%",transform:"translateX(-50%)"},a=i?"translate(-50%, 0)":"translate(-50%, 100vh)"),{__style:{...r,transition:"all 225ms cubic-bezier(0.0,0.0,0.2,1) 500ms",transform:a}}}},718882(e,t,i){function n(e,t,i){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,{YA:()=>p,Ay:()=>h,EQ:()=>u});let s=window.location.search.includes("debug_impressions=1")||document.cookie&&document.cookie.indexOf("debug_impressions=1")>-1,r={paused:"Pause",resumed:"Resume",stopped:"Flush",enter:"Enter viewport",exit:"Exit viewport"},a={},o={background:"#FF8A8A",transform:"scale(.98)"},l={init:e=>({transform:`scale(${a[e]?.8:.99})`,transition:"transform .2s ease-in-out",background:"#8E8E8E"}),[r.enter]:{background:"#A0DCC8",transform:"scale(.99)"},[r.exit]:o,[r.stopped]:o,[r.paused]:o,[r.resumed]:{background:"#0FA573",transform:"scale(.99)"}};class c{constructor(e){n(this,"lastIntersectionChange",null),n(this,"setMutationObserver",e=>(this.mutationObserver=e,this)),n(this,"startMutationObserver",e=>{this.mutationObserver&&this.mutationObserver.observe(this.node,e)}),n(this,"stopMutationObserver",()=>{this.mutationObserver&&this.mutationObserver.disconnect()}),n(this,"handleIntersectionVisibilityChange",(e,t)=>{this.lastIntersectionChange=e,[{type:1,isVisible:e=>{let t=e.rootBounds?.bottom??window.innerHeight;return e.isIntersecting&&e.boundingClientRect.top>=143&&e.boundingClientRect.top<t},isHidden:e=>{let t=e.rootBounds?.bottom??window.innerHeight;return!e.isIntersecting||e.boundingClientRect.top<143||e.boundingClientRect.top>=t}},{type:50,isVisible:e=>e.intersectionRatio>=.5,isHidden:e=>e.intersectionRatio<.5},{type:80,isVisible:e=>e.intersectionRatio>=.8,isHidden:e=>e.intersectionRatio<.8},{type:2,isVisible:e=>{let t=e.rootBounds?.bottom??window.innerHeight;return e.isIntersecting&&e.boundingClientRect.bottom<=t&&e.boundingClientRect.bottom>=143},isHidden:e=>{let t=e.rootBounds?.bottom??window.innerHeight;return!e.isIntersecting||e.boundingClientRect.bottom<143||e.boundingClientRect.bottom>t}}].forEach(({type:i,isVisible:n,isHidden:s})=>{n(e)?this.lastLoggedVisibleEvent[i]||(this.addVisibleEvent(i,t),this.lastLoggedVisibleEvent[i]=!0):s(e)&&this.lastLoggedVisibleEvent[i]&&(this.addHiddenEvent(i,t),this.lastLoggedVisibleEvent[i]=!1)})}),n(this,"handleIntersectionChange",e=>{let t=e.intersectionRatio>0||e.isIntersecting,i=Date.now();this.handleIntersectionVisibilityChange(e,i),t&&!this.inViewport?(this.startTime=i,this.pinCellWidth=this.node.offsetWidth,this.pinCellHeight=this.node.offsetHeight,this._debug(r.enter,{startTime:i,node:this.node}),this.enterCallbacks.forEach(e=>e())):!t&&this.inViewport&&(this._debug(r.exit,!0),this.exitCallbacks.forEach(e=>e(this.toJSON()))),this.inViewport=t}),this.enterCallbacks=[],this.exitCallbacks=[],this.inViewport=!1,this.node=e,this.startTime=0,this.debugId="",this.pinCellWidth=0,this.pinCellHeight=0,this.visibleEvents=new Map,this.hiddenEvents=new Map,this.lastLoggedVisibleEvent={1:!1,50:!1,80:!1,2:!1}}addVisibleEvent(e,t){let i=this.visibleEvents.get(e)||[];i.push(1e6*t),this.visibleEvents.set(e,i)}addHiddenEvent(e,t){let i=this.hiddenEvents.get(e)||[];i.push(1e6*t),this.hiddenEvents.set(e,i)}hasVisibleEvent(e){return this.visibleEvents.has(e)}hasHiddenEvent(e){return this.hiddenEvents.has(e)}onEnterViewport(e){return this.enterCallbacks.push(e),this}onExitViewport(e){return this.exitCallbacks.push(e),this}setDebugId(e){return this.debugId=e,s&&Object.assign(this.node.style,l.init(e)),this}pause(){return this.inViewport&&(this.addHiddenEvent(102,Date.now()),this._debug(r.paused,!0),this.exitCallbacks.forEach(e=>e(this.toJSON()))),this}resume(){if(this.inViewport){let e=Date.now();this._debug(r.resumed,{startTime:e}),this.startTime=e,this.addVisibleEvent(102,e),Object.keys(this.lastLoggedVisibleEvent).forEach(e=>{this.lastLoggedVisibleEvent[e]=!1}),this.lastIntersectionChange&&this.handleIntersectionVisibilityChange(this.lastIntersectionChange,e)}return this}stop(e){return this.inViewport&&(this._debug(r.stopped,!0),this.exitCallbacks.forEach(t=>t(this.toJSON(e)))),this}toJSON(e=""){return{startTime:1e6*this.startTime,endTime:1e6*Date.now(),forcedExit:e,pinCellWidth:this.pinCellWidth,pinCellHeight:this.pinCellHeight,visibleEvents:this.visibleEvents,hiddenEvents:this.hiddenEvents}}toDebugJSON(){return{pinID:this.debugId,startTime:this.startTime,endTime:Date.now(),duration:`${(Date.now()-this.startTime)/1e3} seconds`,pinCellWidth:this.pinCellWidth,pinCellHeight:this.pinCellHeight}}_debug(e,t){if(s)switch(window.console.log(` ${e} -- ${this.debugId}`),!0===t&&window.console.log(this.toDebugJSON()),"object"==typeof t&&window.console.log(t),l[e]&&Object.assign(this.node.style,l[e]),e){case r.flushed:case r.paused:case r.exit:a[this.debugId]=!0}}}function d(e,t,i){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let p=!0,u=!1;class h{constructor(){d(this,"_delegateChange",e=>{e.forEach(e=>{let t=this.activeImpressions.get(e.target);t&&t.handleIntersectionChange(e)})}),d(this,"_handleMutations",(e,t)=>{let i=this.mutationObservers.get(t);i&&i.offsetHeight<1&&i&&this.stop(i,"removed")}),this.activeImpressions=new Map,this.mutationObservers=new Map,this.bottomHeight=0,this.bottomObstructions=new Set,this.pausePriority=u,this.observer=new window.IntersectionObserver(this._delegateChange),window.Cypress&&!window.activeImpressions&&(window.activeImpressions=new Map),this.paused=!1,this.topHeight=0,this.topObstructions=new Set,this.inExperiment=!1}setExperimentStatus(e){this.inExperiment!==e&&(this.inExperiment=e)}stop(e,t=""){let i=this.activeImpressions.get(e);i&&(i.stop(t),i.mutationObserver&&this.mutationObservers.delete(i.mutationObserver),i.stopMutationObserver(),this.activeImpressions.delete(e),window.activeImpressions?.delete(e),this.observer?.unobserve(e))}start(e){let t=this.activeImpressions.get(e);if(!t){t=new c(e),this.activeImpressions.set(e,t),window.activeImpressions?.set(e,t),this.observer?.observe(e);let i=(e,t)=>this._handleMutations(e,t);t.setMutationObserver(new window.MutationObserver(i)),t.mutationObserver&&this.mutationObservers.set(t.mutationObserver,e),t.startMutationObserver({subtree:!0,attributes:!0,attributeFilter:["style"]})}return t}pause(e=p){this.paused||(Array.from(this.activeImpressions.values()).forEach(e=>e.pause()),this.paused=!0,this.pausePriority===u&&(this.pausePriority=e))}resume(e=p){(e!==u||this.pausePriority!==p)&&this.paused&&(Array.from(this.activeImpressions.values()).forEach(e=>e.resume()),this.paused=!1,this.pausePriority=u)}addObstruction(e,t){"top"===e?this.topObstructions.add(t):"bottom"===e&&this.bottomObstructions.add(t),this._calculateRootMargins()}removeObstruction(e,t){"top"===e?this.topObstructions.delete(t):"bottom"===e&&this.bottomObstructions.delete(t),this._calculateRootMargins()}updateObstructions(){this._calculateRootMargins()}_calculateRootMargins(){let e=Array.from(this.topObstructions).reduce((e,t)=>{let{bottom:i}=t.getBoundingClientRect();return i>e?i:e},0),t=window.innerHeight-Array.from(this.bottomObstructions).reduce((e,t)=>{let{top:i}=t.getBoundingClientRect();return i<e?i:e},window.innerHeight);if(e!==this.topHeight||t!==this.bottomHeight){let i={rootMargin:`${-e}px 0px ${-t}px`,threshold:[0,.5,.8,1]};this.observer?.disconnect(),this.observer=new window.IntersectionObserver(this._delegateChange,i),Array.from(this.activeImpressions.values()).forEach(e=>this.observer?.observe(e.node)),this.topHeight=e,this.bottomHeight=t}}}},123576(e,t,i){i.d(t,{A:()=>n});let n=new(i(718882)).Ay},861929(e,t,i){i.d(t,{A:()=>n});function n(e){if(!e)return!1;let t=new Date(e);return t.setDate(t.getDate()+28),new Date().getTime()<t.getTime()}},722731(e,t,i){i.d(t,{A:()=>n});function n(e){return"object"==typeof e&&null!==e&&e.constructor===Object&&"[object Object]"===Object.prototype.toString.call(e)}},978149(e,t,i){i.d(t,{A:()=>n});function n(e,t,i=28){if(!e?.resurrection_info&&!(t?.isAuth&&t.resurrectionInfo))return!1;let s=t?t.isAuth&&t.resurrectionInfo?.resurrectionDate:e?.resurrection_info?.resurrection_dt,r=new Date,a=s?new Date(s):r;return a.setDate(a.getDate()+i),new Date().getTime()<a.getTime()}},985761(e,t,i){i.d(t,{A:()=>n});let n={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,F5:116,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}},115795(e,t,i){i.d(t,{p9:()=>Z,MT:()=>$,od:()=>k,kU:()=>el,Dj:()=>R,NF:()=>eD,_N:()=>er,iG:()=>ev,_C:()=>eV,j9:()=>eh,$G:()=>eg,FW:()=>b,Kl:()=>j,br:()=>D,dM:()=>Q,vo:()=>eT,L6:()=>eU,Ir:()=>ek,zB:()=>z,CL:()=>y,eH:()=>B,OH:()=>G,G3:()=>eI,wj:()=>ez,Oy:()=>M,H9:()=>H,St:()=>S,tV:()=>K,Fg:()=>I,dT:()=>eb,eZ:()=>eS,vb:()=>eL,_p:()=>ee,Zm:()=>eB,Bj:()=>O,ZE:()=>L,nV:()=>ei,Nz:()=>em,Es:()=>Y,d3:()=>ex,L0:()=>ep,lQ:()=>g,Tb:()=>P,rO:()=>J,uD:()=>ef,GA:()=>eu,wd:()=>es,VF:()=>u,Nm:()=>E,wP:()=>q,_u:()=>ew,gk:()=>C,CX:()=>w,Gg:()=>eR,mi:()=>et,ic:()=>p,fF:()=>W,BG:()=>V,VX:()=>eP,I7:()=>h,BP:()=>f,MF:()=>T,aC:()=>_,mg:()=>e_,bI:()=>d,os:()=>ea,SM:()=>N,zU:()=>eF,vw:()=>eN,Jw:()=>en,TS:()=>U,nN:()=>X,a$:()=>eo,CT:()=>ej,Tp:()=>x,jH:()=>c,gg:()=>l,zJ:()=>eA,rz:()=>F,iK:()=>o,HA:()=>eE,pn:()=>ed,_G:()=>eM,qi:()=>v,ux:()=>eO,ZX:()=>ey,xE:()=>m,BU:()=>A,kL:()=>eW,ml:()=>eC,mX:()=>ec});var n=i(479123),s=i(477823);let r=new RegExp(/^\/(?!(?:pin|categories|report|search|password|terms|discover|help|email|topics|explore|pw|login|signup|about|business|source|ideas|today|tv|shopping|videos|age-apeal|oauth)\/)[\w\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\-]+\/(?!(?:following|followers|_tools|_created|_saved|tried))[\w\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\-]+(?=\/|$)/);var a=i(598948);let o=e=>r.test(e.pathname),l=(e,t)=>{let{pathname:i}=e;return o(e)&&i.match(t||"?")},c=e=>{let{pathname:t}=e;return!!(0,n.B6)({path:"/:username/:boardId/:boardSectionId",end:!0},t)&&!t.match(/^\/.+\/.+\/(_tools)/i)},d=(e,t)=>{let{pathname:i}=e;return c(e)&&i.match(t||"?")},p=e=>!!(0,n.B6)({path:"/board/:id/edit",end:!0},e.pathname),u=e=>!!(0,n.B6)({path:"/board/:id/edit/collaborators",end:!0},e.pathname),h=e=>!!(0,n.B6)({path:"/board/:id/edit/add_collaborators",end:!0},e.pathname),m=e=>!!(0,n.B6)({path:"/boardsection/:id/edit",end:!0},e.pathname),g=e=>!!(0,n.B6)({path:"/pin/:id/comments",end:!0},e.pathname),f=e=>!!(0,n.B6)({path:"/pin/:id/edit",end:!0},e.pathname),x=e=>!!(0,n.B6)({path:"/conversation/:id",end:!0},e.pathname),b=e=>!!(0,n.B6)({path:"/appealed-pin/",end:!0},e.pathname),y=e=>!!(0,n.B6)({path:"/reports-and-violations/",end:!0},e.pathname),_=e=>e.pathname.startsWith("/age-appeal"),v=e=>e.pathname.startsWith("/business/"),w=e=>!!(0,n.B6)({path:"/business/business-access/:userBizId/dashboard",end:!0},e.pathname)||!!(0,n.B6)({path:"/business/business-manager/:userBizId/dashboard",end:!0},e.pathname)||!!(0,n.B6)({path:"/business/business-hierarchy/:businessHierarchyId/dashboard",end:!0},e.pathname),A=e=>!!(0,n.B6)({path:"/business/business-hierarchy/:businessHierarchyId/hierarchy",end:!0},e.pathname),E=e=>!!(0,n.B6)({path:"/business/business-hierarchy/:businessHierarchyId/dashboard",end:!0},e.pathname),C=e=>!!(0,n.B6)({path:"/business/business-access/:userBizId/asset-groups",end:!0},e.pathname)||!!(0,n.B6)({path:"/business/business-manager/:userBizId/asset-groups",end:!0},e.pathname),j=e=>!!(0,n.B6)({path:"/business/business-manager/:userBizId/catalogs",end:!0},e.pathname),S=e=>!!(0,n.B6)({path:"/business/catalogs/:userBizId/",end:!1},e.pathname),k=e=>!!(0,n.B6)({path:"/business/business-access/:userBizId/shared-tags",end:!0},e.pathname)||!!(0,n.B6)({path:"/business/business-manager/:userBizId/shared-tags",end:!0},e.pathname),I=e=>!!(0,n.B6)({path:"/business/business-access/:userBizId/brand-safety",end:!0},e.pathname)||!!(0,n.B6)({path:"/business/business-manager/:userBizId/brand-safety",end:!0},e.pathname),P=e=>!!(0,n.B6)({path:"/business/business-hierarchy/:businessHierarchyId/business_security",end:!0},e.pathname),T=e=>!!(0,n.B6)({path:"/business/business-hierarchy/:businessHierarchyId/managers",end:!0},e.pathname),R=e=>!!(0,n.B6)({path:"/business/business-hierarchy/:businessHierarchyId/",end:!1},e.pathname)||!!(0,n.B6)({path:"/business/business-access/:businessId/",end:!1},e.pathname)||!!(0,n.B6)({path:"/business/business-manager/:businessId/",end:!1},e.pathname)||!!(0,n.B6)(e.pathname,"/business/business-manager"),z=e=>!!(0,n.B6)({path:"/business/business-access/:businessId/invoice-management",end:!0},e.pathname)||!!(0,n.B6)({path:"/business/business-manager/:businessId/invoice-management",end:!0},e.pathname),O=e=>!!(0,n.B6)({path:"/business/business-access/:businessId/audiences",end:!0},e.pathname)||!!(0,n.B6)({path:"/business/business-manager/:businessId/audiences",end:!0},e.pathname),B=e=>!!(0,n.B6)({path:"/business/business-access/:businessId/security",end:!0},e.pathname)||!!(0,n.B6)({path:"/business/business-manager/:businessId/security",end:!0},e.pathname),D=e=>!!(0,n.B6)({path:"/business/business-manager/:businessId/ad-accounts/cee-migration",end:!0},e.pathname),L=e=>e.pathname.startsWith("/business/invite/"),M=e=>!!(0,n.B6)({path:"/pin/:id/visual-search/",end:!0},e.pathname),N=e=>!!(0,n.B6)({path:"/pin/:id/visual-search/products/",end:!0},e.pathname),W=e=>"/"===e.pathname,F=e=>"/"===e.pathname||"/homefeed/"===e.pathname,V=e=>e.pathname.startsWith("/login"),U=e=>e.pathname.startsWith("/invited"),H=e=>!!(0,n.B6)({path:"/today",end:!0},e.pathname),$=e=>e.pathname.startsWith("/password/reset")||!!(0,n.B6)({path:"/pw/:username",end:!0},e.pathname),K=e=>e.pathname.startsWith("/secure/panic"),G=e=>e.pathname.startsWith("/signup"),J=e=>e.pathname.startsWith("/email/subscription"),Y=e=>e.pathname.startsWith("/email/user_survey"),X=e=>e.pathname.startsWith("/email_verification_error"),q=e=>e.pathname.startsWith("/notifications/"),Q=e=>!!(0,n.B6)({path:"/pin/:id",end:!0},e.pathname),Z=e=>e.pathname.startsWith("/pin_redirect"),ee=e=>e.pathname.startsWith("/search"),et=e=>e.pathname.startsWith("/search/my_pins"),ei=e=>!!(0,n.B6)({path:"/ideas",end:!0},e.pathname),en=e=>!!(0,n.B6)({path:"/ideas/:interest/:id",end:!0},e.pathname),es=e=>ei(e)||en(e),er=e=>!!(0,n.B6)({path:"/videos/:category/:id",end:!0},e.pathname),ea=e=>!!(0,n.B6)({path:"/videos/",end:!0},e.pathname),eo=e=>!!(0,n.B6)({path:"/shopping/",end:!0},e.pathname),el=e=>!!(0,n.B6)({path:"/shopping/:category/:id",end:!0},e.pathname),ec=e=>eo(e)||el(e),ed=e=>e.pathname.startsWith("/topics"),ep=e=>e.pathname.startsWith("/today/article/")||e.pathname.startsWith("/today/best/")||e.pathname.startsWith("/today/trending/"),eu=e=>e.pathname.startsWith("/today/shop/"),eh=e=>H(e)||ep(e)||e.pathname.startsWith("/today/popular/"),em=e=>/^\/discover\/article\/\S+\/?/i.test(e.pathname),eg=e=>e.pathname.startsWith("/pin/create/"),ef=e=>e.pathname.startsWith("/unauth-profile"),ex=e=>e.pathname.startsWith("/pin/"),eb=e=>"#imgViewer"===e.hash,ey=e=>/invite_code/.test(e.search),e_=e=>!!(0,n.B6)({path:"/pin/:id",end:!1},e.pathname)&&(e.pathname.includes("/sent/")||e.pathname.includes("/feedback/")),ev=e=>e.pathname.includes("/repin/x"),ew=e=>!!(0,n.B6)({path:"/pin/:id/repin"},e.pathname)&&!ev(e),eA=e=>e.pathname.startsWith("/_/storyboard"),eE=e=>e.pathname.startsWith("/oauth"),eC=e=>e.pathname.startsWith("/app-factory-oauth"),ej=e=>e.pathname.startsWith("/business/convert"),eS=e=>e.pathname.startsWith("/pin-editor"),ek=e=>e.pathname.startsWith("/pin-builder"),eI=e=>e.pathname.startsWith("/idea-ads-tool"),eP=e=>e.pathname.startsWith("/story-pin-builder")||e.pathname.startsWith("/idea-pin-builder")||e.pathname.startsWith("/pin-creation-tool")||eI(e),eT=e=>e.pathname.startsWith("/settings"),eR=e=>void 0!==e.pathname&&(e.pathname.startsWith("/business/business-access/")||e.pathname.startsWith("/business/business-manager/"))&&e.pathname.includes("/dashboard/"),ez=e=>void 0!==e.pathname&&e.pathname.startsWith("/tv/studio"),eO=e=>void 0!==e.pathname&&e.pathname.startsWith("/business/commerce-integrations/"),eB=e=>void 0!==e.pathname&&e.pathname.startsWith("/business/hub"),eD=e=>void 0!==e.pathname&&e.pathname.startsWith("/signup/sso-business-account/"),eL=(e,t)=>s.Jd(t,"2025-02-08","mweb_notif_settings_redesign")?e.pathname.startsWith("/settings"):e.pathname.startsWith("/settings")&&!e.pathname.startsWith("/settings/notifications"),eM=e=>void 0!==e.pathname&&!!(0,n.B6)({path:"/advertiser/:id/ads/edit/",end:!0},e.pathname),eN=e=>void 0!==e.pathname&&!!(0,n.B6)({path:"/advertiser/:id/ads/edit_draft/",end:!0},e.pathname),eW=e=>void 0!==e.pathname&&!!(0,n.B6)({path:"/advertiser/:id/ads/duplicate/",end:!0},e.pathname),eF=e=>void 0!==e.pathname&&!!(0,n.B6)({path:"/advertiser/:id/ads/bulk_edit/",end:!0},e.pathname),eV=e=>!!(0,n.B6)({path:"/collage-creation-tool/",end:!0},e.pathname),eU=({url:e="",state:t=null}={})=>{let i=(0,a.A)(e);return{pathname:i.path,search:i.query,hash:i.anchor,state:t}}},477823(e,t,i){i.d(t,{Jd:()=>r});var n=i(81920);let s=(e,t)=>{switch(t){case 2025:return e.checkExperiment("notifications_holdout_2025").group;case 2026:return e.checkExperiment("notifications_holdout_2026").group;case 2027:return e.checkExperiment("notifications_holdout_2027").group;case 2028:return e.checkExperiment("notifications_holdout_2028").group;default:return""}},r=(e,t,i)=>{let r=new Date(Date.parse(t)),a=r.getFullYear(),o=r.getMonth()+1,l=o<7?"h1":"h2",c=new Date(Date.now()),d=c.getMonth()+1,p=c.getFullYear(),u=p-1,h=`notifications_holdout_${u}`,m=`notifications_holdout_${p}`;if(a<u||a===u&&d>=2||a===u&&o<=6)return(0,n.GV)("in_notifications_older_holdout_group",{sampleRate:1,tags:{source:i}}),!1;let g=s(e,p)||"",f=s(e,u)||"";if(""!==g&&(0,n.GV)("in_notifications_holdout_group.info",{sampleRate:1,tags:{exp_name:m,exp_group:g,source:i}}),""!==f&&(0,n.GV)("in_notifications_holdout_group.info",{sampleRate:1,tags:{exp_name:h,exp_group:f,source:i}}),1===d||7===d){if(1===d){if(a===u&&"h2"===l)return f.startsWith(`holdout_${l}`);if(a===p&&1===o&&(f.startsWith("holdout_h2")||f.startsWith("production_h2")))return!0}if(7===d){if(a===p&&"h1"===l)return g.startsWith(`holdout_${l}`);if(a===p&&7===o&&(g.startsWith("holdout_h1")||g.startsWith("production_h1")))return!0}}return!!(d>=1&&d<=6&&g.includes("h1")||d>=7&&d<=12&&g.includes("h2"))&&g.startsWith(`holdout_${l}`)}},647602(e,t,i){i.d(t,{A:()=>function e(t,i=!1){return s=>{if(!(0,n.A)(s))if(i&&Array.isArray(s))return s.map(e(t,i));else return s;let r={};return Object.keys(s).forEach(a=>{let o=t(s[a],a);(0,n.A)(s[a])||i&&Array.isArray(s[a])?r[o]=e(t,i)(s[a]):r[o]=s[a]}),r}}});var n=i(722731)},62963(e,t,i){i.d(t,{A:()=>s});var n=i(647602);function s(e,t=!1){let i=(t,i)=>e(i);return e=>(0,n.A)(i,t)(e)}},506581(e,t,i){i.d(t,{LI:()=>_,N9:()=>w,UK:()=>v});var n=i(958548),s=i(487555),r=i(873713),a=i(986466),o=i(307437),l=i(58667),c=i(282222),d=i(554081),p=i(697695),u=i(33702),h=i(123733),m=i(936981),g=i(872590),f=i(127032),x=i(771317),b=i(37742),y=i(122968);let _=["goodIdea","love","thanks","wow","haha"],v={7:"goodIdea",1:"love",13:"thanks",11:"wow",5:"haha"},w=(e,t,i="darkGray")=>{let _={default:{staticAsset:"white"===i?h:u},goodIdea:{staticAsset:r,animatedAsset:n,gridAsset:s,label:t._('Good idea', 'Reaction label to tell a creator that their pin is a good idea', 'Reaction label to tell a creator that their pin is a good idea'),htmlStyle:`
    @keyframes play90 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -3600px 0px;
        }
    }
    `,animationStyle:"play90 3000ms steps(90) infinite forwards",type:7},haha:{staticAsset:l,animatedAsset:a,gridAsset:o,label:t._('Haha', 'Reaction label to tell a creator that the pinner laughed because of their pin', 'Reaction label to tell a creator that the pinner laughed because of their pin'),htmlStyle:`
    @keyframes play60 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -2400px 0px;
        }
    }
    `,animationStyle:"play60 2000ms steps(60) infinite forwards",type:5},love:{staticAsset:p,animatedAsset:c,gridAsset:d,label:t._('Love', 'Reaction label to tell a creator that the pinner loved their pin', 'Reaction label to tell a creator that the pinner loved their pin'),htmlStyle:`
    @keyframes play90 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -3600px 0px;
        }
    }
    `,animationStyle:"play90 3000ms steps(90) infinite forwards",type:1},thanks:{staticAsset:f,animatedAsset:m,gridAsset:g,label:t._('Thanks', 'Reaction label to tell a creator thank you', 'Reaction label to tell a creator thank you'),htmlStyle:`
    @keyframes play60 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -2400px 0px;
        }
    }
    `,animationStyle:"play60 2000ms steps(60) infinite forwards",type:13},wow:{staticAsset:y,animatedAsset:x,gridAsset:b,label:t._('Wow', 'Reaction label to tell a creator that the pinner was wowed by their pin', 'Reaction label to tell a creator that the pinner was wowed by their pin'),htmlStyle:`
    @keyframes play90 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -3600px 0px;
        }
    }
    `,animationStyle:"play90 3000ms steps(90) infinite forwards",type:11}};return e&&_[e]?_[e]:_.default}},75840(e,t,i){i.d(t,{A:()=>r});var n=i(212244),s=i(734509);function r(e){let{enabledRouteRefresh:t,headers:i,name:r,noCache:a,options:o,schema:l}=e??{name:n.W,options:null},c=!e,{fetchResource:d,ref:p,fetchMore:u,isFetching:h,isLoaded:m,isRefreshing:g,refresh:f}=(0,s.A)({enabledRouteRefresh:t,headers:i,name:r,noCache:a,options:o,schema:l},c,!1);return c||d(),{ref:p,fetchMore:u,isFetching:h,isLoaded:m,isRefreshing:g,refresh:f}}},218358(e,t,i){i.d(t,{r:()=>n});let n={REGISTRATION:"registration",SETTINGS:"settings",GOOGLE_PEOPLE_API:"google_people_api",HOLISTIC_PROFILE_PROMPT:"holistic_profile_prompt",IN_APP_BIRTHDAY_PROMPT:"in_app_birthday_prompt",FIX_EMAIL_PROMPT:"fix_email_prompt",NUX:"nux",BUSINESS_HUB:"business_hub",UNKNOWN:"unknown"}},911127(e,t,i){i.d(t,{A:()=>c});var n=i(61163),s=i(859471),r=i(985761),a=i(775593),o=i(562615);let l=()=>{};function c({allowClickAndDrag:e,allowEsc:t,allowMediaPlay:i,allowScroll:c,children:d}){(0,s.useEffect)(()=>{(0,n.A)("StopEventPropagation","/app/packages/stop-event-propagation/StopEventPropagation.tsx")},[]);let p=e=>{t&&e.keyCode===r.A.ESCAPE||(0,a.A)(e)};return(0,o.jsx)("div",{onAbort:a.A,onAnimationEnd:a.A,onAnimationIteration:a.A,onAnimationStart:a.A,onBlur:l,onCanPlay:i?l:a.A,onCanPlayThrough:a.A,onChange:a.A,onClick:e?l:a.A,onCompositionEnd:a.A,onCompositionStart:a.A,onCompositionUpdate:a.A,onContextMenu:a.A,onCopy:a.A,onCut:a.A,onDoubleClick:a.A,onDurationChange:a.A,onEmptied:a.A,onEncrypted:a.A,onEnded:a.A,onError:a.A,onFocus:l,onInput:a.A,onInvalid:a.A,onKeyDown:p,onKeyPress:p,onKeyUp:p,onLoad:a.A,onLoadedData:a.A,onLoadedMetadata:a.A,onLoadStart:a.A,onMouseDown:a.A,onMouseEnter:a.A,onMouseLeave:a.A,onMouseMove:e?l:a.A,onMouseOut:a.A,onMouseOver:a.A,onMouseUp:e?l:a.A,onPaste:a.A,onPause:a.A,onPlay:a.A,onPlaying:a.A,onProgress:a.A,onRateChange:a.A,onScroll:c?l:a.A,onSeeked:a.A,onSeeking:a.A,onSelect:a.A,onStalled:a.A,onSubmit:a.A,onSuspend:a.A,onTimeUpdate:a.A,onTouchCancel:a.A,onTouchEnd:e?l:a.A,onTouchMove:e?l:a.A,onTouchStart:e?l:a.A,onTransitionEnd:a.A,onVolumeChange:a.A,onWaiting:a.A,onWheel:a.A,children:d})}},775593(e,t,i){i.d(t,{A:()=>n});let n=e=>{e.stopPropagation(),e.nativeEvent&&e.nativeEvent.stopImmediatePropagation&&e.nativeEvent.stopImmediatePropagation()}},484409(e,t,i){i.d(t,{Ay:()=>u,V2:()=>p,hq:()=>d});var n=i(714447),s=i(822950),r=i(85657);let a=({type:e,accessAllowed:t})=>Object.assign((0,n.A)({type:e}),{accessAllowed:t}),o=a({type:"session",accessAllowed:!0}),l=a({type:"session-stub",accessAllowed:!1}),c=l,d=({countryFromHostName:e,countryFromIp:t,regionFromIp:i,isAuthenticated:n})=>{let a=(0,s.A)({countryFromHostName:e,countryFromIp:t,regionFromIp:i,isAuthenticated:n});return(r.A.setGdprAccess(t,e),a)?c=o:(c=l,o.clear(),c)},p=()=>c,u=o},307424(e,t,i){i.d(t,{A:()=>n});function n(e){return e.replace(/[_.-](\w|$)/g,(e,t)=>t.toUpperCase())}},804395(e,t,i){i.d(t,{A:()=>n});function n(e,t){if("u">typeof window)try{let i=new URL(window.location.href).searchParams.get("consoleTra");if(window.PINTEREST_DEV_LOG||i){let i=window.PINTEREST_DEV_REGEX||"";(!i||(e||"").match(i))&&(t&&"object"==typeof t&&Object.keys(t).length?console.log(e+": %O",t):console.log(e))}}catch(e){}}},752159(e,t,i){let n;i.d(t,{Ms:()=>p,OH:()=>f,OW:()=>x,PM:()=>h,XB:()=>b,bX:()=>c,fu:()=>u,mY:()=>y,uq:()=>g});var s=i(427471),r=i(401691),a=i(484409),o=i(804395);let l=[];function c(e){l.length&&(s.A.create("UserRegisterTrackActionResource",{actions:l}).callUpdate({showError:!1,async:!e}),l=[],n=null)}function d(e,t){let i=(0,a.V2)(),n=i.getItem(r.ub)||null;if(i.removeItem(r.ub),n)return;let s=i.getItem(e)||null,o=s?s.split(","):[];if(o.length){let e=`${t}.${o.reduce((e,t)=>e+"-"+t)}`;l.push({name:e,aux_data:{}})}i.removeItem(e)}let p=e=>{d(r.jW,e),d(r.Yn,`${e}_auth`),l.length&&c(!0)};function u(e,t){let i="u">typeof window&&window.encodeURIComponent&&encodeURIComponent(e)||e;t||(t={}),-1!==i.indexOf("%")&&(t.invalid_action&&(t.invalid_action_original=t.invalid_action),t.invalid_action=i,i="track_register_action.web.invalid_action.with_percent"),l.push({name:i,aux_data:t}),n||(n=setTimeout(()=>c(),5e3)),(0,o.A)(e,t)}function h(e,t){u(e,{tags:t?{...t}:Object.freeze({})})}function m(e,t,i=!1){if("u"<typeof window)return;let n=(0,a.V2)().getItem(e)||null,s=n?n.split(","):[];s.push(t),(0,a.V2)().setItem(e,s.join()),e!==r.Yn&&h(`lex.${t}`),i&&(0,a.V2)().setItem(r.ub,!0)}function g(e,t=!1){m(r.jW,e,t)}function f(e,t=!1){m(r.Yn,e,t)}let x=({event:e,provider:t})=>{h(`pinner_conversion.autologin.${t}.${e}`)},b=({event:e,provider:t})=>{h(`pinner_conversion.login.${t}.${e}`)},y=({event:e,provider:t})=>{h(`pinner_conversion.signup.${t}.${e}`)}},742375(e,t,i){i.d(t,{A:()=>d});var n=i(61163),s=i(859471),r=i(19821),a=i(788792),o=i(538329),l=i(131094),c=i(562615);function d({color:e="dark",completeButtonText:t,completeUrl:i,dismissButtonText:d,experienceId:p,external:u,message:h,onComplete:m,onDismiss:g}){(0,s.useEffect)(()=>{(0,n.A)("Banner","/app/packages/ui/Banner.tsx")},[]);let f=(0,o.A)(),x=(0,s.useRef)(null),b=h&&!t,y=500735===p,_=t&&(!i||y)&&(0,c.jsx)(r.$n,{color:"tertiary",onClick:({event:e})=>{m&&m(e)},text:t}),v=t&&i&&(0,c.jsx)(a.A,{anchor:".HomeButton2",anchorElementRef:x.current,containerBoxConfig:{display:"flex",height:"100%"},children:(0,c.jsx)(r.vx,{ref:x,accessibilityLabel:t,color:"tertiary",href:i,onClick:({event:e})=>{m&&m(e)},rel:u?"nofollow":"none",size:"md",text:t})}),w=d&&g&&(0,c.jsx)(r.az,{mdPaddingX:2,children:(0,c.jsx)(r.$n,{color:"shopping"===e?"tertiary":"secondary",onClick:({event:e})=>{g&&g(e)},text:d})}),A=b&&!y&&g&&!d&&(0,c.jsx)(r.K0,{accessibilityLabel:f._('Close', 'accessibility close label', 'accessibility close label'),bgColor:"secondary",icon:"close",iconColor:"subtle",onClick:({event:e})=>{g&&g(e)},size:"md"});return(0,c.jsxs)(r.az,{alignItems:"center",color:{dark:"washDark",shopping:"default",default:"default"}[e],dangerouslySetInlineStyle:{__style:{backgroundColor:"#dadada"}},direction:"column",display:"flex",justifyContent:"between",paddingX:6,paddingY:3,smDirection:"row",children:[(0,c.jsx)(r.az,{column:12,smColumn:b?11:8,children:(0,c.jsxs)(r.KJ,{color:"inverse",weight:y?"normal":"bold",children:[(0,c.jsx)(l.A,{unsafeCSS:".Banner--message a { color: #fff; text-decoration: underline; }"}),(0,c.jsx)("div",{className:"Banner--message",children:(0,c.jsx)("span",{dangerouslySetInnerHTML:{__html:h}})})]})}),(0,c.jsxs)(r.so,{alignItems:"center",justifyContent:"end",children:[w,_||v,A]})]})}},706466(e,t,i){i.d(t,{CG:()=>s,z:()=>n});let{Provider:n,get:s}=(0,i(987628).A)("toastManagerContext")},286622(e,t,i){i.d(t,{A:()=>n});function n(e){if(!e)return"";try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return""}}},386379(e,t,i){i.d(t,{A:()=>s});var n=i(201447);let s=({url:e})=>!!(e&&e.match(/^https{0,1}:\/\//)&&!(0,n.A)(e))},803489(e,t,i){i.d(t,{A:()=>s});var n=i(286622);function s(e,t={shouldDecode:!0}){return e?("?"===e[0]&&(e=e.substr(1)),e.split("&").reduce((e,i)=>{let[s,r]=i.split(/=(.+)/);return t?.shouldDecode?e[(0,n.A)(s)]=(0,n.A)(r):e[s]=r,e},{})):{}}},17964(e,t,i){i.d(t,{K:()=>f,C:()=>x});var n=i(859471),s=i(987628),r=i(693154),a=i(430705),o=i(39165),l=i(401691),c=i(484409),d=i(307424);let p=e=>{let t={};for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&("object"!=typeof e[i]||null===e[i]||Array.isArray(e[i])?t[(0,d.A)(i)]=e[i]:t[(0,d.A)(i)]=p(e[i]));return t},u={profiles:new Map,headerVisible:!1,orbacVisibility:!1,activeProfile:void 0,disableProfileChanger:!1},h=(e,t)=>{switch(t.type){case"LOAD_PROFILES":return{...e,profiles:t.payload};case"SET_ACTIVE_PROFILE":return{...e,activeProfile:t.payload};case"TOGGLE_HEADER_VISIBILITY":return{...e,headerVisible:t.payload};case"TOGGLE_ORBAC_VISIBILITY":return{...e,orbacVisibility:t.payload};case"TOGGLE_DISABLE_PROFILE_CHANGER":return{...e,disableProfileChanger:t.payload};default:return e}};var m=i(562615);let{Provider:g,getMaybe:f}=(0,s.A)("RoleBasedAccessControlContext"),x=({children:e})=>{let t=(0,r.A)(),i=!!(t.isAuth&&t.isPartner),{state:s,actions:d,receiveProfiles:f}=(e=>{let[t,i]=(0,n.useReducer)(h,u),s=(({dispatch:e,isEnabled:t,state:i})=>{let{orbacVisibility:s,disableProfileChanger:r,headerVisible:a}=i,o=(0,n.useCallback)(i=>{t&&e({type:"SET_ACTIVE_PROFILE",payload:i})},[t,e]);return{changeProfile:o,toggleORBACVisibility:(0,n.useCallback)(i=>{t&&e({type:"TOGGLE_ORBAC_VISIBILITY",payload:i??!s})},[t,e,s]),toggleDisableProfileChanger:(0,n.useCallback)(i=>{t&&e({type:"TOGGLE_DISABLE_PROFILE_CHANGER",payload:i??!r})},[t,e,r]),toggleHeaderVisibility:(0,n.useCallback)(i=>{t&&e({type:"TOGGLE_HEADER_VISIBILITY",payload:i??!a})},[t,e,a])}})({dispatch:i,isEnabled:e,state:t}),{activeProfile:r,orbacVisibility:a}=t;return(0,n.useEffect)(()=>{let e=(0,c.V2)().getItem(l.b6)||!1;e&&i({type:"SET_ACTIVE_PROFILE",payload:e})},[]),(0,n.useEffect)(()=>{let e=(0,c.V2)().getItem(l.t5)||!1;e&&i({type:"TOGGLE_ORBAC_VISIBILITY",payload:e})},[]),(0,n.useEffect)(()=>{(0,c.V2)().setItem(l.t5,a)},[a]),(0,n.useEffect)(()=>{(0,c.V2)().setItem(l.b6,r)},[r]),{state:t,actions:s,receiveProfiles:(0,n.useCallback)((e,t)=>{i({type:"LOAD_PROFILES",payload:((e,t)=>{let i=[];for(let n in e)n!==t&&i.push({id:n,...p(e[n])});let n=i.sort(({user:{businessName:e}},{user:{businessName:t}})=>e.localeCompare(t)),s=new Map;for(let e of n)s.set(e.id,e);return s})(e,t)})},[i])}})(i),{activeProfile:x,headerVisible:b,profiles:y}=s,_=(0,n.useMemo)(()=>y?Array.from(y.values()):[],[y]),v=(0,o.A)(_),w=!!t.isAuth&&_.length>0&&v,A=t.isAuth?t.id:"",E=t.isAuth?t.username:"",{changeProfile:C,toggleORBACVisibility:j,toggleDisableProfileChanger:S,toggleHeaderVisibility:k}=d;(0,n.useEffect)(()=>{!i||("string"==typeof v?C(v):x||C(A))},[v,A,i,C,x]),(0,n.useEffect)(()=>{i&&(w&&!b&&k(!0),!w&&b&&k(!1))},[k,w,i,b,y]);let{data:I}=(0,a.A)(i?{name:"ApiResource",options:{url:"/vx/business_access/profiles/",disable_auth_failure_redirect:!0}}:null),P=I?.profiles,T=(0,n.useMemo)(()=>t&&t.isAuth&&x===t.id?{id:t.id,permissions:["OWNER"],user:{username:E,businessName:t.fullName,imgUrl:t.imageSmallUrl}}:x&&y?y.get(x):void 0,[x,y,t,E]);(0,n.useEffect)(()=>{P&&f(P,A)},[f,P,A]);let R=(0,n.useMemo)(()=>({profiles:_,headerVisible:b,activeProfile:T,changeProfile:C,toggleORBACVisibility:j,toggleDisableProfileChanger:S,toggleHeaderVisibility:k}),[_,b,T,C,j,S,k]);return(0,m.jsx)(g,{value:R,children:e})}},870540(e,t,i){i.d(t,{A:()=>l});var n=i(859471),s=i(601185),r=i(17964),a=i(39165);let o=Object.freeze({}),l=()=>{let{checkExperiment:e}=(0,s.A)(),t=(0,r.K)(),{activeProfile:i}=t||{},l=(0,a.A)(t?.profiles||[]),{anyEnabled:c}=e("useorbacroutematcher_in_useorbacactingas");return(0,n.useMemo)(()=>c&&!l?o:i&&(i.viewerMeetsMfaRequirement||(i.permissions||[]).includes("OWNER"))?i:o,[c,l,i])}},39165(e,t,i){i.d(t,{A:()=>o});var n=i(979638),s=i(693154),r=i(115795),a=i(699613);let o=e=>{let t=(0,n.zy)(),i=(0,s.A)(),o=(0,a.HR)(),l=(0,n.RQ)("/:username"),c=(0,n.RQ)("/:username/*"),d=(l||c)?.params?.username,p=(0,n.RQ)("/pin/:id"),u=(0,n.RQ)("/pin/:id/*"),h=p||u,m=!!h?.params?.id&&o(h.params.id)?.pinner?.id;if((0,r.vo)(t))return!1;if((0,r.Ir)(t)||(0,r.VX)(t)||(0,r._C)(t))return!0;let g=[...e,...i.isAuth?[{user:{username:i.username},id:i.id}]:[]].find(e=>{if(!e)return!1;let{user:t,id:i}=e;return(!!t&&"username"in t&&!!t.username&&!!d||!!m&&!!i)&&(t.username===d||m===i)});return!!g&&g.id}},847753(e,t,i){i.d(t,{D9:()=>u,EL:()=>a,EQ:()=>l,H7:()=>o,Hs:()=>d,Nn:()=>p,Qp:()=>r,TO:()=>s,if:()=>h,uF:()=>n,wf:()=>c});let n=(e,t)=>{let i=e&&e.isAuth?e.fullName:"";return e&&t&&t.user&&t.user.businessName&&(i=t.user.businessName),i},s=(e,t)=>{let i=e&&e.isAuth?e.username:"";return e&&t&&t.user&&t.user.username&&(i=t.user.username),i},r=(e,t)=>{let i=e&&e.isAuth?e.imageMediumUrl:"";return e&&t&&t.user&&t.user.imgUrl&&(i=t.user.imgUrl),i},a=(e,t)=>!!(t&&t.user&&e&&e.isAuth&&t.id!==e.id?t.user.eligibleForStlTool:e&&e.isAuth&&e.eligibleForStlTool),o=(e,t)=>e&&e.isAuth&&t&&t.id&&t.id!==e.id?t.id:"",l=(e,t,i)=>i&&i.user&&t&&t.isAuth&&i.id!==t.id?i.user.merchantId:e.advertiser?.merchant_id,c=(e,t,i)=>i&&i.user&&e.isAuth&&i.id!==e.id?i.user.scheduledPinCount||0:e.isAuth&&t&&t.scheduled_pin_count||0,d=(e,t,i)=>!!(e&&e.isAuth&&i&&i.id&&i.id!==e.id&&i.id===t),p=(e,t,i)=>!!(d(e,t,i)||e&&e.isAuth&&t===e.id),u=(e,t,i)=>p(e,t&&t.owner&&t.owner.id||"",i);function h(e,t,i){return p(e,t?t.id:"",i)}},826258(e,t,i){i.d(t,{f:()=>u,Y:()=>p});var n=i(859471),s=i(987628),r=i(445205),a=i(319491);let o={appInFocus:!0,footerPlusButtonVisible:!0,isAutoplay:!1,showTypeaheadOverlay:!1,videosAutoplaying:{currentlyPlayingOrganicVideoId:null,organicVideosAutoplaying:{},promotedVideosAutoplaying:{},videoCarouselModuleAutoplaying:{}},viewportSize:"lg"},l=(e=o,t)=>{if("TOGGLE_TYPEAHEAD_OVERLAY"===t.type&&e.showTypeaheadOverlay!==t.payload)return{...e,showTypeaheadOverlay:t.payload};if("SET_CURRENT_VIDEO"===t.type){let{payload:i}=t,{pinId:n,isPromoted:s,currentTime:r,surface:o}=i,{videosAutoplaying:l}=e,{currentlyPlayingOrganicVideoId:c,promotedVideosAutoplaying:d,organicVideosAutoplaying:p,videoCarouselModuleAutoplaying:u}=l,h=(0,a.A)(d),m=(0,a.A)(p),g=(0,a.A)(u);return!s&&c&&"VideoCarouselModule"!==o?e:(s?h[n]={pinId:n,currentTime:r,paused:!1}:"VideoCarouselModule"===o?g[n]={pinId:n,currentTime:r,paused:!1}:m[n]={pinId:n,currentTime:r,paused:!1},{...e,videosAutoplaying:{currentlyPlayingOrganicVideoId:s?c:n,promotedVideosAutoplaying:h,organicVideosAutoplaying:m,videoCarouselModuleAutoplaying:g}})}if("SET_IS_AUTOPLAY"===t.type&&e.isAutoplay!==t.payload)return{...e,isAutoplay:t.payload};if("PAUSE_CURRENT_VIDEO"===t.type){let{payload:i}=t,{pinId:n,isPromoted:s,currentTime:r,surface:o}=i,{videosAutoplaying:l}=e,{promotedVideosAutoplaying:c,organicVideosAutoplaying:d,videoCarouselModuleAutoplaying:p}=l,u=(0,a.A)(c),h=(0,a.A)(d),m=(0,a.A)(p);return s?u[n]={...u[n],paused:!0,currentTime:r}:"VideoCarouselModule"===o?m[n]={...m[n],paused:!0,currentTime:r}:h[n]={...h[n],paused:!0,currentTime:r},{...e,videosAutoplaying:{currentlyPlayingOrganicVideoId:null,promotedVideosAutoplaying:u,organicVideosAutoplaying:h,videoCarouselModuleAutoplaying:m}}}if("SET_APP_FOCUS_STATE"===t.type&&e.appInFocus!==t.payload)return{...e,appInFocus:t.payload};if("SET_VIEWPORT_SIZE"===t.type&&e.viewportSize!==t.payload)return{...e,viewportSize:t.payload};if("SET_FOOTER_VISIBILITY_STATE"===t.type&&e.footerPlusButtonVisible!==t.payload)return{...e,footerPlusButtonVisible:t.payload};return e};var c=i(562615);let{Provider:d,get:p}=(0,s.A)("AppUI");function u({children:e}){let[t,i]=(0,n.useReducer)(l,o),s=(0,n.useCallback)(e=>i({type:"PAUSE_CURRENT_VIDEO",payload:e}),[]),a=(0,n.useCallback)(e=>i({type:"SET_APP_FOCUS_STATE",payload:e}),[]),p=(0,n.useCallback)(e=>i({type:"SET_CURRENT_VIDEO",payload:e}),[]),u=(0,n.useCallback)(e=>i({type:"SET_FOOTER_VISIBILITY_STATE",payload:e}),[]),h=(0,n.useCallback)(e=>i({type:"SET_IS_AUTOPLAY",payload:e}),[]),m=(0,n.useCallback)(e=>i({type:"SET_VIEWPORT_SIZE",payload:e}),[]),g=(0,n.useCallback)(e=>i({type:"TOGGLE_TYPEAHEAD_OVERLAY",payload:e}),[]),f=(0,n.useMemo)(()=>({pauseAutoplay:s,setCurrentVideo:p,setFooterPlusButtonVisible:u,setIsAutoplay:h,setViewportSize:m,toggleTypeaheadOverlay:g,setAppFocusState:a,appUI:t}),[s,p,u,h,m,g,a,t]);return(0,n.useEffect)(()=>{r.A.onSessionResume(()=>{a(!0)}).onSessionPause(()=>{a(!1)})},[a]),(0,c.jsx)(d,{value:f,children:e})}},584342(e,t,i){i.d(t,{AT:()=>r,Bf:()=>c,Ku:()=>s,OI:()=>a,Wk:()=>64,Xr:()=>u,d1:()=>l,hL:()=>d,pV:()=>h,rc:()=>p,x9:()=>m,yG:()=>o});var n=i(19821);let s=80,r=12,a=24,o="HeaderContent",l=671,c=new n.rk(l),d=l+5,p=new n.rk(d),u="NagHeaderContent",h=188,m={boxShadow:"0px 8px 8px -8px rgba(0, 0, 0, 0.1)",transition:"box-shadow 300ms ease-in-out"}},994795(e,t,i){i.d(t,{A:()=>o});var n=i(61163),s=i(859471),r=i(19821),a=i(562615);function o({children:e,onMouseEnter:t,onMouseLeave:i,onTouch:o,rounding:l,fullWidth:c=!1,pressState:d="none",accessibilityLabel:p,role:u,dataTestId:h}){(0,s.useEffect)(()=>{(0,n.A)("LegacyTapArea","/app/www/LegacyTapArea.tsx")},[]);let m=(Array.isArray(d)?d:[d]).includes("compress"),g=(0,s.useCallback)(e=>t?.(e.event),[t]),f=(0,s.useCallback)(e=>i?.(e.event),[i]),x=(0,s.useCallback)(e=>o?.(e.event),[o]);return(0,a.jsx)(r.Rp,{accessibilityLabel:p,dataTestId:h,fullWidth:c,onMouseEnter:t?g:void 0,onMouseLeave:i?f:void 0,onTap:o?x:void 0,role:u,rounding:l,tapStyle:m?"compress":"none",children:e})}},809756(e,t,i){i.d(t,{D:()=>u,o:()=>p});var n=i(859471),s=i(106386),r=i(987628),a=i(693154),o=i(861929),l=i(978149),c=i(562615);let{Provider:d,get:p}=(0,r.A)("NavFooterContext");function u({children:e}){let[t,i]=(0,n.useState)(),[r,p]=(0,n.useState)(!1),[u,h]=(0,n.useState)(!1),[m,g]=(0,n.useState)(!1),[f,x]=(0,n.useState)(!1),[b,y]=(0,n.useState)(!1),_=(0,n.useRef)(null),v=(0,s.d4)(e=>e.currentUserTracker.savedPins.length),w=(0,l.A)(null,(0,a.A)()),A=(0,s.d4)(e=>e.session.isAuthenticated),E=(0,s.d4)(e=>A?e.users[e.session.userId]:void 0),C=(0,o.A)(E?.created_at);return(0,c.jsx)(d,{value:{completeNudgeUsersToHomeExperienceRef:_,forceShowNavFooter:f,homeFlyoutText:t,isNavFooterHiddenAfterScroll:r,isNavFooterHiddenByPinActionBar:b,navFooterHeight:r?0:A&&(w||C)?64:52,numUnauthSavedPins:v,setForceShowNavFooter:x,setHomeFlyoutText:i,setIsNavFooterHiddenAfterScroll:p,setIsNavFooterHiddenByPinActionBar:y,setShowHomeBadge:h,setShowHomeFlyoutWithButton:g,showHomeBadge:u,showHomeFlyoutWithButton:m},children:e})}},770697(e,t,i){i.d(t,{f:()=>r,n:()=>a});var n=i(19821),s=i(969030);let r=new n.K5([s.A]),a=160},634041(e,t,i){i.d(t,{Kk:()=>v,LI:()=>y,N9:()=>w,UK:()=>_});var n=i(958548),s=i(487555),r=i(873713),a=i(986466),o=i(307437),l=i(58667),c=i(282222),d=i(554081),p=i(697695),u=i(33702),h=i(936981),m=i(872590),g=i(127032),f=i(771317),x=i(37742),b=i(122968);let y=["goodIdea","love","thanks","wow","haha"],_={7:"goodIdea",1:"love",13:"thanks",11:"wow",5:"haha"},v={goodIdea:"7",love:"1",thanks:"13",wow:"11",haha:"5"},w=({i18n:e,type:t})=>{let i={default:{staticAsset:u},goodIdea:{backgroundColor:"yellow-caramellow-50",staticAsset:r,animatedAsset:n,gridAsset:s,label:e._('Good idea', 'Reaction label to tell a creator that their pin is a good idea', 'Reaction label to tell a creator that their pin is a good idea'),htmlStyle:`
      @keyframes play90 {
        0% {
          background-position: 0px 0px;
        }
        100% {
          background-position: -7380px 0px;
        }
      }
    `,animationStyle:"play90 3000ms steps(90) infinite forwards",type:7},haha:{backgroundColor:"purple-mysticool-100",staticAsset:l,animatedAsset:a,gridAsset:o,label:e._('Haha', 'Reaction label to tell a creator that the pinner laughed because of their pin', 'Reaction label to tell a creator that the pinner laughed because of their pin'),htmlStyle:`
      @keyframes play60 {
        0% {
          background-position: 0px 0px;
        }
        100% {
          background-position: -4920px 0px;
        }
      }
    `,animationStyle:"play60 2000ms steps(60) infinite forwards",type:5},love:{backgroundColor:"red-pushpin-100",staticAsset:p,animatedAsset:c,gridAsset:d,label:e._('Love', 'Reaction label to tell a creator that the pinner loved their pin', 'Reaction label to tell a creator that the pinner loved their pin'),htmlStyle:`
      @keyframes play90 {
        0% {
          background-position: 0px 0px;
        }
        100% {
          background-position: -7380px 0px;
        }
      }
    `,animationStyle:"play90 3000ms steps(90) infinite forwards",type:1},thanks:{backgroundColor:"teal-spabattical-100",staticAsset:g,animatedAsset:h,gridAsset:m,label:e._('Thanks', 'Reaction label to tell a creator thank you', 'Reaction label to tell a creator thank you'),htmlStyle:`
      @keyframes play60 {
        0% {
          background-position: 0px 0px;
        }
        100% {
          background-position: -4920px 0px;
        }
      }
    `,animationStyle:"play60 2000ms steps(60) infinite forwards",type:13},wow:{backgroundColor:"orange-firetini-50",staticAsset:b,animatedAsset:f,gridAsset:x,label:e._('Wow', 'Reaction label to tell a creator that the pinner was wowed by their pin', 'Reaction label to tell a creator that the pinner was wowed by their pin'),htmlStyle:`
      @keyframes play90 {
        0% {
          background-position: 0px 0px;
        }
        100% {
          background-position: -7380px 0px;
        }
      }
    `,animationStyle:"play90 3000ms steps(90) infinite forwards",type:11}};return t&&i[t]?i[t]:i.default}},11464(e,t,i){i.r(t),i.d(t,{default:()=>T});var n,s=i(61163),r=i(859471),a=i(106386);i(825193);var o=i(19821),l=i(743372),c=i(535273),d=i(538329),p=i(601185),u=i(75840),h=i(43326),m=i(226150),g=i(634041),f=i(844255),x=i(562615);let b="cubic-bezier(0, 0, 0.58, 1)",y={loaded:{opacity:1,transitionDuration:"0.20s",transitionTimingFunction:b,transitionProperty:"transform, opacity",transform:"translate(0, 5px)",transformOrigin:"center"},fade:{opacity:.1,transitionDuration:"0.30s",transitionTimingFunction:b,transitionProperty:"transform, opacity",transform:"translate(0, 5px)",transformOrigin:"center"}};function _({reactionLabel:e,handleHideConfirmation:t}){(0,r.useEffect)(()=>{(0,s.A)("ReactionConfirmation","/app/www/Reactions/ReactionConfirmation.tsx")},[]);let{isRTL:i}=(0,f._8)(),[n,a]=(0,r.useState)("loaded"),[l,c]=(0,r.useState)({}),d=(0,r.useRef)(null),p=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(p.current=requestAnimationFrame(()=>{setTimeout(()=>a("fade"),1e3),setTimeout(()=>t(),1300)}),d.current){let e=d.current.getBoundingClientRect();(i?e.left<0:e.right>window.innerWidth)&&c(i?{left:0}:{right:0})}},[]),(0,x.jsx)(o.az,{alignItems:"center",display:"flex",justifyContent:"center",position:"relative",children:(0,x.jsx)(o.az,{ref:d,alignItems:"center",color:"selected",dangerouslySetInlineStyle:{__style:{...y[n],whiteSpace:"nowrap",...l}},display:"flex",height:"20px",justifyContent:"center",paddingX:2,paddingY:1,position:"absolute",rounding:"pill",children:(0,x.jsx)(o.KJ,{color:"inverse",overflow:"normal",size:"100",weight:"bold",children:e})})})}var v=i(131094),w=i(994795);let A="cubic-bezier(0.25, 0.1, 0.25, 1)",E={icon:{backgroundRepeat:"no-repeat",backgroundSize:"cover"},loading:{opacity:0,transitionDuration:"0.25s",transitionTimingFunction:A,transitionProperty:"transform, opacity",transform:"translateZ(0) translateY(25px) scale(1.28)"},loaded:{opacity:1,transitionDuration:"0.25s",transitionTimingFunction:A,transitionProperty:"transform, opacity",transform:"translateZ(0) translateY(0px) scale(1.28)"},clicked:{transitionDuration:"0.25s",transitionTimingFunction:A,transitionProperty:"transform",transform:"translateZ(0) translateY(-50px) scale(1.2)"},flying:{transitionDuration:"0.25s",transitionTimingFunction:A,transitionProperty:"transform"},label:{transitionDuration:"0.25s",transitionTimingFunction:A,transitionProperty:"transform",transform:"translateZ(0) translateY(0) scale(0.8)",whiteSpace:"nowrap"},fading:{opacity:0,transitionDuration:"0.25s",transitionTimingFunction:A}},C={boxShadow:"0 9px 26px rgba(0, 0, 0, 0.4)"};function j({handleReactionClick:e,isCentered:t=!1,isIdeaPinCloseUp:i,marginTop:n,reactionButtonRect:a,shouldShowReactionTrayUp:c,viewType:p,viewParameter:u,reactionPickerRef:h}){(0,r.useEffect)(()=>{(0,s.A)("ReactionTray","/app/www/Reactions/ReactionTray.tsx")},[]);let m=(0,d.A)(),f=(0,l.A)(),[b,y]=(0,r.useState)("loading"),[_,A]=(0,r.useState)(""),[j,S]=(0,r.useState)(),[k,I]=(0,r.useState)(),[P,T]=(0,r.useState)(!1),[R,z]=(0,r.useState)({}),O=(0,r.useRef)(void 0),B=(0,r.useRef)({}),D=()=>{T(!0);let e={...R};g.LI.forEach(t=>{B.current[t]&&!e[t]&&(e[t]=B.current[t].getBoundingClientRect())}),z(e)};(0,r.useEffect)(()=>{let e;"loading"===b&&(O.current=requestAnimationFrame(()=>y("loaded"))),!j&&P&&(e={...j},g.LI.forEach(t=>{let i=R[t],{left:n,top:s}=a,{left:r,top:o}=i,l=n-r-7+1.25*g.LI.indexOf(t);e[t]={translateX:l,translateY:s-o-8.5}}),S(e))},[P]);let L=()=>{document.body&&document.body.style&&(document.body.style.overflow="hidden")},M=()=>{document.body&&document.body.style&&(document.body.style.overflow="unset")},N=e=>{let t;return P&&g.LI.forEach(i=>{let n=R[i];if(n&&n.left&&n.right){let{left:s,right:r}=n;e>=s&&e<=r&&(t=i)}}),t||null},W=t=>{D(),L();let{clientX:i}=t,n=N(i);if(n!==_&&n){if(k&&_){let{type:e}=(0,g.N9)(n);f({event_type:105,element:11354,view_type:p,view_parameter:u,aux_data:{reaction_type:e,duration:`${(Date.now()-k)/1e3} seconds`}})}else!k&&_&&I(Date.now());A(n),y("clicked"),setTimeout(()=>{y("flying"),setTimeout(()=>{e(n)},800),M()},750)}},F=g.LI.map((e,t)=>{let i={transitionDelay:`${.2*(t/g.LI.length)}s`},n={};j&&(n={transform:`translateZ(0) translateX(${j[e].translateX}px) translateY(${j[e].translateY}px) scale(1)`});let{staticAsset:s,animatedAsset:r,label:a,htmlStyle:l,animationStyle:c}=(0,g.N9)({i18n:m,type:e});return(0,x.jsx)(o.az,{alignSelf:"center",display:"flex",children:(0,x.jsx)(o.az,{dangerouslySetInlineStyle:{__style:{zIndex:e===_&&"clicked"===b?"3":"2"}},children:(0,x.jsxs)(o.az,{alignItems:"center",dangerouslySetInlineStyle:{__style:{..."loading"===b||"loaded"===b||_===e&&"clicked"===b||_===e&&"flying"===b?E[b]:{},..._!==e&&("clicked"===b||"flying"===b)?E.loaded:{},..."loading"===b||"loaded"===b?i:{},..._===e&&"flying"===b?n:{},..._!==e&&"flying"===b?E.fading:{},transformOrigin:"left"}},display:"flex",justifyContent:"center",maxHeight:"flying"===b?24:32,maxWidth:"flying"===b?24:32,position:"relative",children:[_!==e&&(0,x.jsx)(o.az,{bottom:!0,left:!0,position:"absolute",right:!0,top:!0,children:(0,x.jsx)(o.az,{dangerouslySetInlineStyle:{__style:{backgroundImage:`url(${s})`,backgroundPosiiton:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"}},height:32,width:32})}),(0,x.jsxs)(o.az,{alignItems:"center",direction:"column",display:"flex",justifyContent:"center",position:"relative",children:[(0,x.jsx)(v.A,{unsafeCSS:l}),_===e&&"clicked"===b&&(0,x.jsx)(o.az,{alignItems:"center",color:"selected",dangerouslySetInlineStyle:{__style:E.label},display:"flex",height:20,justifyContent:"center",paddingX:2,paddingY:1,rounding:"pill",children:(0,x.jsx)(o.KJ,{color:"inverse",overflow:"normal",size:"100",weight:"bold",children:a})}),(0,x.jsx)(w.A,{onTouch:W,pressState:"none",children:(0,x.jsx)(o.az,{ref:t=>{B.current[e]=t},alignItems:"center",dangerouslySetInlineStyle:{__style:{...E.icon,..._===e&&"clicked"===b?{animation:c}:{},backgroundImage:`url(${r})`}},display:"flex",height:_===e&&"flying"!==b?82:"flying"===b?24:32,justifyContent:"center",width:_===e&&"flying"!==b?82:"flying"===b?24:32})})]})]})})},t)});return(0,x.jsx)(o.az,{children:(0,x.jsx)(o.az,{ref:h,alignItems:"center",dangerouslySetInlineStyle:{__style:{marginLeft:i?-295:0,marginTop:n||(c?-80:80),userSelect:"none"}},"data-test-id":"reaction-tray",display:"flex",justifyContent:"center",left:!0,position:"absolute",right:t,top:!0,children:(0,x.jsx)(o.ib,{top:0,children:(0,x.jsx)(o.az,{alignItems:"center",color:"flying"===b?"transparent":"default",dangerouslySetInlineStyle:{__style:{..."flying"!==b?C:{},userSelect:"none"}},display:"flex",height:80,justifyContent:"center",rounding:"pill",width:300,children:(0,x.jsx)(o.az,{width:"100%",children:(0,x.jsx)(o.az,{display:"flex",justifyContent:"evenly",onTouchEnd:()=>{_&&(y("flying"),setTimeout(()=>{e(_)},325)),M()},onTouchMove:e=>{L();let{clientX:t}=e.touches[0],i=N(t);if(i!==_){if(k&&_&&i&&(0,g.N9)(i)){let{type:e}=(0,g.N9)(i);f({event_type:105,element:11354,view_type:p,view_parameter:u,aux_data:{reaction_type:e,duration:`${(Date.now()-k)/1e3} seconds`}})}else!k&&_&&I(Date.now());A(i)}y("clicked")},onTouchStart:()=>{D()},children:F})})})})})})}var S=i(280667);function k(e,t,i){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let I=(void 0!==n||(n=i(138015)).hash&&"bd3117d2ad737afd60bcf377d60eb57f"!==n.hash&&console.error("The definition of 'ReactionPickerContainer_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n);class P extends r.PureComponent{static getDerivedStateFromProps(e,t){let{reactions:i,viewer:n}=e,{isReactionsLoaded:s}=t;if(i.length>0&&!s){let e=!1,t=0;i.forEach(i=>{n&&"id"in n&&n.id&&i&&(i.user.id??i.user)===n.id&&(e=!0,t=i.reaction_type)});let s=t&&g.UK[t]||"";return{didViewerReact:e,userReaction:s,isReactionsLoaded:!0}}return null}constructor(e){super(e),k(this,"state",{isReactionTrayShowing:!1,reactionButtonRect:null,showConfirmation:!1,didViewerReact:!1,userReaction:null,isReactionsLoaded:!1}),k(this,"trayCloseTimer",null),k(this,"observer",null),k(this,"reactionPickerRef",(0,r.createRef)()),k(this,"handleClickOutside",e=>{let{isReactionTrayShowing:t}=this.state;t&&this.reactionPickerRef&&e.target instanceof Element&&!this.reactionPickerRef.current?.contains(e.target)&&this.setState({isReactionTrayShowing:!1})}),k(this,"setReactionButtonRect",()=>{if(!this.reactionButton)return;let e=this.reactionButton.getBoundingClientRect(),{height:t,width:i,top:n,right:s}=e,r=document.createElement("div");r.style.height=t+"px",r.style.width=i+"px",r.style.top=n+"px",r.style.right=s+"px",r.style.position="absolute",r.style.zIndex="-1",document.body?.append(r),this.setState({reactionButtonRect:e})}),k(this,"handleIconPositionChange",e=>{e.forEach(e=>{e.intersectionRatio<1&&this.setReactionButtonRect()})}),k(this,"handleScroll",()=>{let{isReactionTrayShowing:e}=this.state;e&&this.hideReactionTray(),this.setReactionButtonRect()}),k(this,"onReactionClick",async e=>{let{addReaction:t,i18n:i,reactionPinId:n,userId:s,clientTrackingParams:r,incrementReactionCount:a,onReactionUpdated:o,pinId:l}=this.props,{type:c}=(0,g.N9)({i18n:i,type:e});await t(c,n,s,r),o&&o(),a(l,c),this.handleShowConfirmation()}),k(this,"handleShowConfirmation",()=>{this.setState({showConfirmation:!0})}),k(this,"handleHideConfirmation",()=>{this.setState({showConfirmation:!1})}),k(this,"handleReactionClick",e=>{this.setState({userReaction:e,didViewerReact:!0},()=>{this.onReactionClick(e),this.trayCloseTimer=setTimeout(this.hideReactionTray,250)})}),k(this,"hideReactionTray",()=>{this.setState({isReactionTrayShowing:!1})}),k(this,"handleOneClickReact",()=>{let{didViewerReact:e,userReaction:t}=this.state,{removeReaction:i,reactionPinId:n,userId:s,requireAuthForLimitedLogin:r,decrementReactionCount:a,onReactionUpdated:o,pinId:l,logContextEvent:c}=this.props;e||c({event_type:103,element:11354,object_id_str:this.props.pinId,view_type:3,view_parameter:156}),r({fn:async()=>{e?(await i(n,s),t&&(a(l,g.Kk[t]),o&&o()),this.setState({userReaction:null,didViewerReact:!1})):this.handleReactionClick("love")}})()}),this.reactionPickerRef=(0,r.createRef)(),this.handleClickOutside=this.handleClickOutside.bind(this)}componentDidMount(){this.observer=new window.IntersectionObserver(this.handleIconPositionChange),this.reactionButton&&this.observer.observe(this.reactionButton),this.setReactionButtonRect(),window.addEventListener("scroll",this.handleScroll),window.addEventListener("mouseover",this.setReactionButtonRect),window.addEventListener("mousedown",this.handleClickOutside)}componentWillUnmount(){window.removeEventListener("scroll",this.handleScroll),window.removeEventListener("mouseover",this.setReactionButtonRect),window.removeEventListener("mousedown",this.handleClickOutside),this.trayCloseTimer&&clearTimeout(this.trayCloseTimer)}render(){let{isReactionTrayShowing:e,reactionButtonRect:t,userReaction:i,showConfirmation:n,didViewerReact:s}=this.state,{experience:r,i18n:a,nativePinType:l,hasBackground:c,hasReactionTray:d,inExpandTapTargetExp:p,isIdeaPinCloseUp:u,iconColor:m,isTextButton:f=!1,isTrayPositionRelative:b}=this.props,{animatedAsset:y,staticAsset:v,label:w}=(0,g.N9)({i18n:a,type:s&&i?i:"default"});return(0,x.jsxs)(o.az,{position:b?"relative":void 0,children:[d&&e&&!!t&&!!t.left&&!!t.top&&(0,x.jsx)(j,{handleReactionClick:this.handleReactionClick,isCentered:!b,isIdeaPinCloseUp:u,marginTop:b?void 0:48,reactionButtonRect:t,reactionPickerRef:this.reactionPickerRef,shouldShowReactionTrayUp:"storyPin"===l,viewParameter:156,viewType:3}),(0,x.jsx)(o.Rp,{dataTestId:"react-button",onTap:this.handleOneClickReact,children:f?(0,x.jsx)(o.KJ,{weight:"bold",children:a._('React', 'Closeup.ReactionPicker.Text', 'Text for button to react to current pin')}):(0,x.jsx)(o.az,{ref:d?e=>{this.reactionButton=e}:void 0,alignItems:"center",display:"flex",height:p?40:24,justifyContent:"center",rounding:"circle",width:24,children:s&&i?(0,x.jsx)(o.az,{dangerouslySetInlineStyle:{__style:{backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundImage:`url(${s&&y?y:v})`}},height:20,width:20}):(0,x.jsx)(o.K0,{accessibilityLabel:a._('React', 'Accessibility label for reacting to a Pin', 'Accessibility label for reacting to a Pin'),bgColor:c?"secondary":"transparent",icon:"heart",iconColor:m||"default",padding:1,size:"xl"})})}),!e&&!n&&!s&&(0,x.jsx)(o.az,{left:!0,position:"absolute",right:!0,top:!0,children:(0,x.jsx)(h.A,{color:"blue",eligibleIds:[501979,501996],experience:r,children:()=>null})}),n&&!!i&&w&&(0,x.jsx)(_,{handleHideConfirmation:this.handleHideConfirmation,reactionLabel:w})]})}}function T(e){(0,r.useEffect)(()=>{(0,s.A)("ReactionPickerContainer","/app/www/Reactions/ReactionPickerContainer.tsx")},[]);let t=(0,a.wA)(),i=(0,c.A)(I,e.pinKey);(0,u.A)({name:"ReactionsResource",options:{pin_id:i?.entityId,user_id:e.userId}});let n=(0,a.d4)(({feeds:e})=>e[`reactions:${i?.entityId}`]||[]),o=(0,a.d4)(({reactions:e})=>n.length>0?n.map(t=>e[t.id]):[]),h=(0,a.d4)(({session:e,users:t})=>t[e.userId]),g=(0,a.d4)(({session:e})=>e.userId),{checkExperiment:f}=(0,p.A)();return(0,x.jsx)(P,{...e,addReaction:(e,n,s,r)=>t((0,S.wz)(i?.entityId??"",e,n,s,r)),checkExperiment:f,decrementReactionCount:(e,i)=>t((0,S.yo)(e,i)),i18n:(0,d.A)(),incrementReactionCount:(e,i)=>t((0,S.mI)(e,i)),logContextEvent:(0,l.A)(),pinId:i?.entityId??"",reactionPinId:e.aggregatedPinDataId??"",reactions:o,removeReaction:(e,n,s)=>t((0,S.PG)(i?.entityId??"",e,n,s)),requireAuthForLimitedLogin:(0,m.A)(),userId:g,viewer:h})}k(P,"defaultProps",{hasBackground:!1,hasReactionTray:!0,isTrayPositionRelative:!0})},678358(e,t,i){i.d(t,{_G:()=>d,oh:()=>c});var n=i(61163),s=i(859471),r=i(162497),a=i(562615);let o={showCloseupContentRight:!0,showProductDetailPage:!1,viewportSize:"lg",paneWidth:r.qr,maxWidth:r.QH,descriptionPaneWidth:r.QH-r.qr,isCommentAttachmentSelectorOpen:!1,isCommentComposerFocused:!1,isCommentPopoverInteractionActive:!1,isCommentThreadExpanded:!1,isCloseupMediaViewerOpen:!1,isMediaViewerOpen:!1,isShoppingModuleExpanded:!1,closeupWithinMasonryEnabled:!1,peekCloseupEnabled:!1,calculatedImageHeight:0,setAbortNoActionPlacementTimeout:()=>{},setIsCloseupMediaViewerOpen:()=>{},setIsCommentAttachmentSelectorOpen:()=>{},setIsCommentComposerFocused:()=>{},setIsCommentPopoverInteractionActive:()=>{},setIsMediaViewerOpen:()=>{},setIsShoppingModuleExpanded:()=>{},setCalculatedImageHeight:()=>{},setViewportSize:()=>{}},l=(0,s.createContext)(o);function c({children:e,value:t}){(0,s.useEffect)(()=>{(0,n.A)("Context","/app/www/closeup/desktop/Context.tsx")},[]);let i=(0,s.useMemo)(()=>({...o,...t}),[t]);return(0,a.jsx)(l,{value:i,children:e})}function d(){let e=(0,s.use)(l);if(!e)throw Error("useCloseupContext must be used within CloseupContextProvider");return e}},162497(e,t,i){i.d(t,{DG:()=>o,Em:()=>b,En:()=>_,Ii:()=>w,M1:()=>u,MI:()=>x,QH:()=>r,Ye:()=>d,Z:()=>h,bZ:()=>m,bo:()=>a,gr:()=>v,h3:()=>c,n0:()=>p,nb:()=>g,qr:()=>s,t4:()=>A,tb:()=>l,vg:()=>f,w$:()=>y});var n=i(19821);let s=508,r=1016,a=488,o=992,l=672,c=1176,d=40,p=72,u=740,h=32,m=16,g=24,f=2,x=1,b=new n.rk(5),y={ARTICLE:"https://schema.org/Article",BRAND:"https://schema.org/Brand",PRODUCT:"https://schema.org/Product",RECIPE:"https://schema.org/Recipe",OFFER:"https://schema.org/Offer",OUT_OF_STOCK:"https://schema.org/OutOfStock",PERSON:"https://schema.org/Person"},_={boxShadow:"0 2px 5px rgba(0, 0, 0, 0.06)",transition:"box-shadow 200ms ease-in-out"},v="calc(90vh - 80px)",w="calc(55vh + 80px)",A="calc(75vh - 80px)"},969030(e,t,i){i.d(t,{A:()=>r});var n=i(19821),s=i(628001);let r=new n.K5([s.nS])},628001(e,t,i){i.d(t,{U7:()=>a,nS:()=>r,nf:()=>o,qn:()=>s});var n=i(19821);let s=2,r=new n.rk(1),a=new n.rk(1),o=new n.rk(1)},43326(e,t,i){i.d(t,{A:()=>h});var n=i(61163),s=i(859471),r=i(106386),a=i(19821),o=i(296221),l=i(932369),c=i(994795),d=i(562615);function p(e,t,i){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class u extends s.PureComponent{constructor(...e){super(...e),p(this,"state",{paused:!1,showPulsar:!1,hasMounted:!1}),p(this,"handleDismiss",()=>{let{onClickDismiss:e,dismissExperience:t,experience:i}=this.props;if(!i)return;let{experience_id:n,placement_id:s}=i;t(s,n),e&&e()}),p(this,"wrapperRef",(0,s.createRef)())}componentDidMount(){this.props.experience&&(this.mountPulsar(),this.setState({hasMounted:!0}))}componentDidUpdate(e){this.props.experience&&e.experience!==this.props.experience&&(this.mountPulsar(),this.setState({hasMounted:!0}))}mountPulsar(){let{experience:e}=this.props;if(!e)return;let{display_data:t}=e;t.has_pulsar&&this.setState({showPulsar:!0})}renderPulsar(){let e=this.wrapperRef,{paused:t}=this.state;if(!e||!e.current)return null;let{height:i,width:n}=e.current.getBoundingClientRect();return(0,d.jsx)(c.A,{pressState:"none",children:(0,d.jsx)(a.az,{dangerouslySetInlineStyle:{__style:{marginTop:-(68+i/2),marginLeft:-(68-n/2),pointerEvents:"none"}},position:"absolute",zIndex:new a.rk(1),children:(0,d.jsx)(a.EV,{paused:t,size:136})})})}render(){let{children:e,eligibleIds:t,experience:i,idealDirection:n,onClickComplete:s,textWeight:r="bold",textAlign:l,textOverflow:c,fontSize:p}=this.props,{showPulsar:u,hasMounted:h}=this.state;if(!i||!t.includes(i.experience_id)||!h)return e({experience:i});let{display_data:{scroll_to_dismiss:m,scroll_to_dismiss_delay_in_seconds:g=0,...f}}=i;return(0,d.jsx)(o.Je,{eligibleIds:t,experience:i,children:({complete:t,dismiss:o})=>{let h=()=>(x(),o(),setTimeout(this.handleDismiss,1e3*g)),x=()=>{m&&(window.removeEventListener("scroll",h),window.removeEventListener("touchmove",h))};return m&&(window.addEventListener("scroll",h),window.addEventListener("touchmove",h)),(0,d.jsxs)(a.az,{ref:this.wrapperRef,children:[e({experience:i}),u?this.renderPulsar():f.has_tooltip&&(0,d.jsx)(a.fT,{anchor:this.wrapperRef.current,idealDirection:n||"down",onDismiss:this.handleDismiss,size:"sm",children:(0,d.jsx)(a.az,{padding:3,children:(0,d.jsxs)(a.so,{direction:"column",gap:{row:0,column:3},children:[(0,d.jsx)(a.az,{column:12,children:(0,d.jsxs)(a.KJ,{align:"right"===l?"end":l,color:"light",overflow:c,size:p,weight:r||"bold",children:[f.text,f.secondary_cta_link&&(0,d.jsx)(a.az,{display:"inlineBlock",marginStart:1,children:(0,d.jsx)(a.KJ,{color:"light",size:p,weight:"bold",children:(0,d.jsx)(a.N_,{display:"inlineBlock",href:f.secondary_cta_link.url,target:"blank",underline:"hover",children:f.secondary_cta_link.text})})})]})}),f.complete_button_text&&(0,d.jsx)(a.so,{alignItems:"stretch",justifyContent:"center",children:f.complete_button_text&&(0,d.jsx)(a.so,{alignContent:"center",children:(0,d.jsx)(a.$n,{color:"tertiary",onClick:()=>{x(),t(1),s&&s()},size:"md",text:f.complete_button_text})})})]})})})]})}})}}function h(e){(0,s.useEffect)(()=>{(0,n.A)("ExperienceTooltip","/app/www/experiences/duplo/ExperienceTooltip.tsx")},[]);let t=(0,r.wA)(),i=(0,l.Hy)(),a=(0,l._4)();return(0,d.jsx)(u,{...e,completeExperience:(e,n)=>t(i(e,n)),dismissExperience:(e,i)=>t(a(e,i))})}},168620(e,t,i){i.d(t,{e:()=>n,x:()=>s});let{Provider:n,get:s}=(0,i(987628).A)("LimitedLogin")},143455(e,t,i){i.d(t,{Bh:()=>r,i:()=>s,wC:()=>n});let n=e=>e._('Log in to continue', 'limitedLogin.modalHeader.default', 'Default title on mobile web limited login modal'),s=e=>e._('You\'re almost there! Log in to access all of Pinterest', 'loginModal.limitedLogin.subheader', 'Subheader text on personalized login modal/flyout to remind users to log in'),r=({i18n:e,toFollow:t})=>t?e._('Log in to follow', 'limitedLogin.modalHeader.follow', 'Title on mobile web limited login modal to prompt users to login to follow a user or board.'):e._('Log in to unfollow', 'limitedLogin.modalHeader.unfollow', 'Title on mobile web limited login modal to prompt users to login to unfollow a user or board.')},226150(e,t,i){i.d(t,{A:()=>o});var n=i(538329),s=i(971289),r=i(168620),a=i(143455);let o=()=>{let e=(0,n.A)(),t=(0,s.qJ)(),{viewer:i,loginForMore:o,limitedLoginModalSubheader:l,limitedLoginModalNextLocation:c}=(0,r.x)();return"LIMITED_LOGIN"===i.type?({modalHeader:i,nextLocation:n})=>s=>{let r=null;s&&(s.nativeEvent&&s.nativeEvent instanceof Event?r=s:s.event&&(r=s.event)),r&&(r.preventDefault&&r.preventDefault(),r.stopPropagation&&r.stopPropagation()),o?.setVisible(!0),l?.setText(i||(t?(0,a.i)(e):(0,a.wC)(e))),n&&c?.setRoute(n)}:({fn:e})=>e}},280667(e,t,i){i.d(t,{PG:()=>p,XZ:()=>u,mI:()=>c,wz:()=>d,yo:()=>l});var n=i(581296),s=i(427471),r=i(703672),a=i(201408);function o(e,t,i){return{type:"UPDATE_PIN_REACTION_COUNT",payload:{increment:t,reactionType:i,pinId:e}}}function l(e,t){return o(e,!1,t)}function c(e,t){return o(e,!0,t)}let d=(e,t,i,o,l)=>c=>{let d={pin_id:e,user_id:o,reaction_type:t,reaction_pin_id:i,action_type:"reaction",client_tracking_parameters:l},p="ReactionsResource";return s.A.create(p,d).callUpdate().then(e=>{let t=(0,n.S8)(e.resource_response.data,a.A[p]);c((0,r.md)(p,d,e,t))})},p=(e,t,i,o)=>l=>{let c={pin_id:e,user_id:i,reaction_pin_id:t,action_type:"unreaction",client_tracking_parameters:o},d="ReactionsResource";return s.A.create(d,c).callDelete().then(e=>{let t=(0,n.S8)(e.resource_response.data,a.A[d]);l((0,r.md)(d,c,e,t))})};function u(e,t,i){return{type:"PIN_UPDATE_REACTION_COUNT",payload:{id:e,increment:t,reactionType:i}}}},958548(e){e.exports="https://s.pinimg.com/webapp/goodIdeaAnimated-f903b976.svg"},487555(e){e.exports="https://s.pinimg.com/webapp/goodIdeaGrid-2a227605.svg"},873713(e){e.exports="https://s.pinimg.com/webapp/goodIdeaStatic-121fdcba.svg"},986466(e){e.exports="https://s.pinimg.com/webapp/hahaAnimated-d6004e23.svg"},307437(e){e.exports="https://s.pinimg.com/webapp/hahaGrid-b8bf2497.svg"},58667(e){e.exports="https://s.pinimg.com/webapp/hahaStatic-1979fb1f.svg"},282222(e){e.exports="https://s.pinimg.com/webapp/loveAnimated-770acddb.svg"},554081(e){e.exports="https://s.pinimg.com/webapp/loveGrid-13945ebd.svg"},697695(e){e.exports="https://s.pinimg.com/webapp/loveStatic-4c2b47a3.svg"},33702(e){e.exports="https://s.pinimg.com/webapp/reactionHeartOutline-b9589793.svg"},123733(e){e.exports="https://s.pinimg.com/webapp/reactionHeartOutlineWhite-ccd91f5b.svg"},936981(e){e.exports="https://s.pinimg.com/webapp/thanksAnimated-b06b6c44.svg"},872590(e){e.exports="https://s.pinimg.com/webapp/thanksGrid-bff9b054.svg"},127032(e){e.exports="https://s.pinimg.com/webapp/thanksStatic-6b4271a0.svg"},771317(e){e.exports="https://s.pinimg.com/webapp/wowAnimated-393fb709.svg"},37742(e){e.exports="https://s.pinimg.com/webapp/wowGrid-b07efb6f.svg"},122968(e){e.exports="https://s.pinimg.com/webapp/wowStatic-acea36b1.svg"},109346(e,t,i){i.d(t,{A:()=>n});function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)({}).hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(null,arguments)}},203632(e,t,i){function n(e,t){return(n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,n(e,t)}i.d(t,{A:()=>s})},121533(e,t,i){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach(function(t){!function(e,t,i){var s;(s=function(e,t){if("object"!=n(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=n(s))return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==n(s)?s:s+"")in e)?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}i.d(t,{A:()=>r})},408789(e,t,i){i.d(t,{A:()=>n});function n(e,t){if(null==e)return{};var i={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;i[n]=e[n]}return i}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/ReactionPickerContainer-492f8c666a8f19da.mjs.map