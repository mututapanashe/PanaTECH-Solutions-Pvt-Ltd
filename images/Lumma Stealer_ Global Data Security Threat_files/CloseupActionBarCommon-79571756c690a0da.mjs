(self.modernJsonp=self.modernJsonp||[]).push([["34777"],{924509(e,n,t){t.r(n),t.d(n,{default:()=>E});var o=t(859471),i=t(979638),a=t(19821),r=t(526502),s=t(593578),l=t(819985),d=t(548253),c=t(593451),p=t(743372),u=t(676692),m=t(668014),h=t(693154),y=t(653472),g=t(601185),C=t(815938),v=t(844255),x=t(803489),f=t(870540),P=t(847753),b=t(162497),w=t(678358),j=t(854651),_=t(584342),A=t(777064),S=t(408738),k=t(562615);let T=(0,S.A)(()=>Promise.all([t.e("91796"),t.e("2046"),t.e("62155"),t.e("83578"),t.e("93705"),t.e("10804")]).then(t.bind(t,416962)),void 0,e=>416962,"SaveAffordance",e=>["91796","2046","62155","83578","93705","10804"]),z=(0,S.A)(()=>t.e("30486").then(t.bind(t,546277)),void 0,e=>546277,"PostDownloadUpsellPopover",e=>["30486"]),D=(0,S.A)(()=>Promise.resolve().then(t.bind(t,366136)),void 0,e=>366136,"SecondarySendButtonCommon",e=>[]),B=(0,S.A)(()=>Promise.all([t.e("91796"),t.e("23102")]).then(t.bind(t,267707)),void 0,e=>267707,"ReactionPickerContainer",e=>["91796","23102"]),R=(0,S.A)(()=>t.e("40370").then(t.bind(t,891819)),void 0,e=>891819,"CloseupCommentButton",e=>["40370"]),I=(0,S.A)(()=>t.e("39257").then(t.bind(t,458778)),{ssr:!1},e=>458778,"SharePinHoverContent",e=>["39257"]),L=({ref:e})=>{e.current&&(clearTimeout(e.current),e.current=null)},E=function({goBack:e,gridDescription:n,isDeletedStoryPin:t,isEligibleForAggregatedComments:S,isEligibleForPinReactions:E,isOnSecretBoard:M,onEditSubmit:H,pin:O,viewParameter:W,viewType:F,onSaveButtonClick:K,showPromoteBanner:U=!1,showRepinOnInitialRender:J,isStoryPin:q,actionBarContainerRef:G,outerPaddingSize:$=b.Z,maxWidth:Q,showLeadPin:Z,scrollContainerRef:N}){let V=(0,i.zy)(),X=(0,f.A)(),Y=(0,p.A)(),{checkExperiment:ee}=(0,g.A)(),{showEnabledSaveBehavior:en}=(0,A.Gn)(!0),{imgSrc:et}=(0,c.M)(),{clientTrackingParams:eo,showCloseupContentRight:ei,closeupWithinMasonryEnabled:ea,peekCloseupEnabled:er}=(0,w._G)(),{viewType:es,viewParameter:el}=(0,u.WQ)(),ed=(0,h.A)(),ec=(0,P.Hs)(ed,O?.pinner?.id,X),ep=(0,d.A)({showProductDetailPage:!!O.is_eligible_for_pdp}),eu=(0,o.useRef)(null),em=(0,o.useRef)(null),eh=(0,o.useRef)(null),[ey,eg]=(0,o.useState)(!!(0,x.A)(V.search).share),[eC,ev]=(0,o.useState)(!1),[ex,ef]=(0,o.useState)(!1),[eP,eb]=(0,o.useState)(!1),{shareFromPostDownloadUpsell:ew,setShareFromPostDownloadUpsell:ej,saveToBoardFromPostDownloadUpsell:e_,setSaveToBoardFromPostDownloadUpsell:eA}=(0,r.r$)();(0,o.useEffect)(()=>{ew&&(eg(!0),ej(!1))},[ew]);let eS=(0,o.useCallback)(e=>ev(e),[]),ek=(0,o.useCallback)(()=>eg(!1),[]),eT=(0,o.useCallback)(()=>eg(e=>!e),[]),ez=(0,o.useCallback)(()=>{L({ref:eu}),L({ref:em})},[]),eD=(0,o.useCallback)(()=>{Y({event_type:101,component:15565}),ez(),ef(!1),eg(!0)},[ez,Y]),eB=(0,o.useCallback)(()=>{ez(),em.current=setTimeout(()=>{ef(!0)},1e3)},[ez]),eR=(0,o.useCallback)(()=>{ez(),eu.current=setTimeout(()=>{ef(!1),eu.current=null},300)},[ez]),eI=O.board?.owner?.id||O.pinner?.id,{aggregated_pin_data:eL,reaction_counts:eE}=O,{isRTL:eM}=(0,v._8)(),eH=ea?Q:Q||b.qr,eO=(0,l.A)({pinKey:{type:"Legacy",data:O},orbacActingAs:X,viewer:ed}),eW=!!Object.keys(eE||{}).length,eF=eE?(0,C.nc)(eE):0,eK=eL?.did_it_data?.images_count??0,eU=eL?.comment_count??0,eJ=eh.current&&ee("ce_dweb_pin_rep_preview_on_share_icon_hover").anyEnabled&&!ey&&ex;(0,o.useEffect)(()=>{if(eJ){let e=requestAnimationFrame(()=>eb(!0));return()=>cancelAnimationFrame(e)}eb(!1)},[eJ]);let eq=M||t?null:(0,k.jsxs)(m.A,{name:"CloseupActionBar_SecondarySendButton",children:[(0,k.jsx)(D,{anchorRef:eh,closeupWithinMasonryEnabled:ea,controllerOptions:{flyoutDisplayOptions:ea?{shownWithinProfileHeader:!0,idealDirection:"down",forceDirection:!0}:{wrapperPosition:"fixed"},isFlyoutOpen:ey,loggingOptions:{component:194,element:72,viewParameter:W||el,viewType:F||es,sendShareSurface:8},onFlyoutDismiss:ek,onToggleFlyout:eT,sendObject:{type:"pin",description:n,id:O.id,imageUrl:et,ownerId:eI,url:`/pin/${O.id}/`,clientTrackingParams:eo}},experienceAnchor:3025,onMouseEnter:eB,onMouseLeave:eR,shouldHideTooltip:!!eJ,showSendAnimation:!0}),eJ&&(0,k.jsx)(a.Wd,{zIndex:j.CT,children:(0,k.jsx)(a.az,{dangerouslySetInlineStyle:{__style:{opacity:+!!eP,transition:"opacity 300ms ease-out"}},onMouseEnter:eB,onMouseLeave:eR,children:(0,k.jsx)(a.AM,{anchor:eh.current,idealDirection:"down",offset:4,onDismiss:()=>{},size:"flexible",children:(0,k.jsx)(a.Rp,{onTap:eD,children:(0,k.jsx)(m.A,{name:"CloseupActionBar_SharePinHoverContent",children:(0,k.jsx)(I,{pin:O})})})})})})]}),eG=(0,k.jsx)(a.az,{alignItems:"center",color:ea?"transparent":"default","data-test-id":"closeup-action-items",display:"flex",justifyContent:"between",maxWidth:eH,role:"list",rounding:200,children:(0,k.jsxs)(a.so,{alignItems:"stretch",gap:2*!!ea,justifyContent:"start",children:[!ec&&!!E&&(0,k.jsx)(m.A,{name:"CloseupActionBar_ReactionPickerContainer",children:(0,k.jsxs)(a.az,{alignItems:"center",display:"flex",marginEnd:2*!!eW,role:"listitem",children:[(0,k.jsx)(B,{clientTrackingParams:eo,handleReactionTrayHover:eS,idealDirection:ea?"down":void 0,pinId:O.id,reactionByMe:O.reaction_by_me,showTooltip:!0,viewParameter:W,viewType:F}),(0,k.jsx)(a.KJ,{dataTestId:"reactions-count",weight:"bold",children:(0,k.jsx)(y.A,{shortform:!0,shortformMaximumFractionDigits:1,value:eF})})]})}),ea&&(0,k.jsx)(R,{isEligibleForAggregatedComments:!!S,pinKey:{type:"Legacy",data:O},scrollContainerRef:N,totalCommentCount:eU+eK,viewParameter:W,viewType:F}),(0,k.jsx)(a.az,{role:"listitem",children:eq}),(0,k.jsx)(a.az,{"data-test-id":"closeup-more-options",role:"listitem",children:(0,k.jsx)(s.A,{carouselSlotCurrentIndex:O&&O.carousel_data&&O.carousel_data.index,clientTrackingParams:eo,closeupWithinMasonryEnabled:ea,goBack:e,isReactionTrayOpen:eC,onEditSubmit:H,pinKey:{type:"Legacy",data:O},showEditPin:!t&&eO,viewParameter:W,viewType:F})})]})}),e$=ea?void 0:$,eQ=(0,k.jsxs)(a.az,{ref:G,color:"default",dangerouslySetInlineStyle:{__style:{paddingTop:$/2,paddingRight:eM?void 0:e$,paddingLeft:eM?e$:void 0,paddingBottom:ea?$/2:void 0,borderRadius:q?"0px 32px 32px 32px":ei?"0px 32px 32px 0":void 0}},"data-test-id":"closeup-body-sticky-content",marginTop:ea?0:q?-5:0,width:ea?"100%":void 0,children:[(0,k.jsx)(a.az,{"data-test-id":"closeupActionBar",marginStart:ep?-3:void 0,children:(0,k.jsxs)(a.so,{alignItems:"stretch",justifyContent:"between",children:[eG,(0,k.jsx)(a.so,{alignItems:"center",gap:2,children:!t&&!ec&&(0,k.jsx)(a.az,{marginStart:3*!ea,children:(0,k.jsx)(T,{boardCount:ed.isAuth?ed.boardCount:0,clientTrackingParams:eo,onClickCallback:K,pinKey:{type:"Legacy",data:O},saveToBoardFromPostDownloadUpsell:e_,setSaveToBoardFromPostDownloadUpsell:eA,showEnabledSaveBehavior:en,showPromoteBanner:U,showRepinOnInitialRender:J,variant:"closeup",viewParameter:W,viewType:F})})})]})}),(0,k.jsx)(z,{})]});if(Z||ea)return eQ;let eZ=q&&!er?_.Ku+4:_.Wk;return er&&(eZ=0),(0,k.jsx)(a.ib,{top:eZ,zIndex:j.d8,children:eQ})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/CloseupActionBarCommon-79571756c690a0da.mjs.map