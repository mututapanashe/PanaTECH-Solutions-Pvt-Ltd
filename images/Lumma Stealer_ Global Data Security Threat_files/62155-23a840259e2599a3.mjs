(self.modernJsonp=self.modernJsonp||[]).push([["62155"],{82118(e,s,l){var a;l.r(s),l.d(s,{default:()=>o});let t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinSaveRequest_pin",selections:[{alias:"images_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:a=[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"orig")'},{alias:"images_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:a,storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"promotedIsRemovable",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageBase64",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"mediaUploadId",storageKey:null}]}],type:"Pin",abstractKey:null};t.hash="64132b88edd48497e63c9ad85ae5ab66";let o=t},842227(e,s,l){l.r(s),l.d(s,{default:()=>t});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinSaveRequest_shuffle_asset",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],type:"ShuffleAsset",abstractKey:null};a.hash="58c24e25a76e7a1c4533f3b07f490517";let t=a},578849(e,s,l){l.d(s,{A:()=>a});function a(e,s){return({CANCEL:s._('Cancel', 'business.strings', 'A generic translation for \'Cancel\' used for labeling, CTAs, and buttons'),LEARN_MORE:s._('Learn more', 'business.strings', 'A generic translation for \'Learn more\' used for labeling, CTAs, and buttons'),OK:s._('OK', 'business.strings', 'A generic translation for \'OK\' used for labeling, CTAs, and buttons'),DONE:s._('Done', 'business.strings', 'A generic translation for \'Done\' used for labeling, CTAs, and buttons'),NEXT:s._('Next', 'business.strings', 'A generic translation for \'Next\' used for labeling, CTAs, and buttons'),SAVE_ACTION:s._('Save', 'business.strings', 'A generic translation for \'Save\', the action, used for labeling, CTAs, and buttons'),SAVE_NOUN:s._('Save', 'business.strings', 'A generic translation for \'Save\', the noun, used for labeling, CTAs, and buttons'),LOADING:s._('Loading', 'business.strings', 'A generic translation for \'Loading\' used for labeling, CTAs, and buttons'),ALL:s._('All', 'business.strings', 'A generic translation for \'All\' used for labeling, CTAs, and buttons'),EDIT:s._('Edit', 'business.strings', 'A generic translation for \'Edit\' used for labeling, CTAs, and buttons'),BACK:s._('Back', 'business.strings', 'A generic translation for \'Back\' used for labeling, CTAs, and buttons'),DELETE:s._('Delete', 'business.strings', 'A generic translation for \'Delete\' used for labeling, CTAs, and buttons'),NONE:s._('None', 'business.strings', 'A generic translation for \'None\' used for labeling, CTAs, and buttons'),IMPRESSIONS:s._('Impressions', 'business.strings', 'A generic translation for \'Impressions\' used for labeling, CTAs, and buttons'),SEARCH_ACTION:s._('Search', 'business.strings', 'A generic translation for \'Search\', the action,  used for labeling, CTAs, and buttons'),SEARCH_NOUN:s._('Search', 'business.strings', 'A generic translation for \'Search\', the noun,  used for labeling, CTAs, and buttons'),ACTIVE:s._('Active', 'business.strings', 'A generic translation for \'Active\' used for labeling, CTAs, and buttons'),VIDEO:s._('Video', 'business.strings', 'A generic translation for \'Video\' used for labeling, CTAs, and buttons'),SAVES_ACTION:s._('Saves', 'business.strings', 'A generic translation for \'Saves\', the action, used for labeling, CTAs, and buttons'),SAVES_NOUN:s._('Saves', 'business.strings', 'A generic translation for \'Saves\', the noun,  used for labeling, CTAs, and buttons'),CONTINUE:s._('Continue', 'business.strings', 'A generic translation for \'Continue\' used for labeling, CTAs, and buttons'),NO:s._('No', 'business.strings', 'A generic translation for \'No\' used for labeling, CTAs, and buttons'),STATUS:s._('Status', 'business.strings', 'A generic translation for \'Status\' used for labeling, CTAs, and buttons'),PROMOTE:s._('Promote', 'business.strings', 'A generic translation for \'Promote\' used for labeling, CTAs, and buttons'),NAME:s._('Name', 'business.strings', 'A generic translation for \'Name\' used for labeling, CTAs, and buttons'),SUBMIT:s._('Submit', 'business.strings', 'A generic translation for \'Submit\' used for labeling, CTAs, and buttons'),PAUSED:s._('Paused', 'business.strings', 'A generic translation for \'Paused\' used for labeling, CTAs, and buttons'),SEE_MORE:s._('See more', 'business.strings', 'A generic translation for \'See more\' used for labeling, CTAs, and buttons'),FOLLOWING:s._('Following', 'business.strings', 'A generic translation for \'Following\' used for labeling, CTAs, and buttons'),CLOSE:s._('Close', 'business.strings', 'A generic translation for \'Close\' used for labeling, CTAs, and buttons'),INSTALL_TAG:s._('Install tag', 'business.strings', 'A generic translation for \'Install tag\' used for labeling, CTAs, and buttons'),PIN_CLICKS:s._('Pin clicks', 'business.strings', 'A generic translation for \'Pin clicks\' used for labeling, CTAs, and buttons'),CONVERSIONS:s._('Conversions', 'business.strings', 'A generic translation for \'Conversions\' used for labeling, CTAs, and buttons'),SEND:s._('Send', 'business.strings', 'A generic translation for \'Send\' used for labeling, CTAs, and buttons'),KEYWORDS:s._('Keywords', 'business.strings', 'A generic translation for \'Keywords\' used for labeling, CTAs, and buttons'),CREATE:s._('Create', 'business.strings', 'A generic translation for \'Create\' used for labeling, CTAs, and buttons'),REPORT_ACTION:s._('Report', 'business.strings', 'A generic translation for \'Report\', the action, used for labeling, CTAs, and buttons'),REPORT_NOUN:s._('Report', 'business.strings', 'A generic translation for \'Report\', the noun,  used for labeling, CTAs, and buttons'),BOARDS:s._('Boards', 'business.strings', 'A generic translation for \'Boards\' used for labeling, CTAs, and buttons'),PINS:s._('Pins', 'business.strings', 'A generic translation for \'Pins\' used for labeling, CTAs, and buttons'),LINK_CLICKS:s._('Link clicks', 'business.strings', 'A generic translation for \'Link clicks\' used for labeling, CTAs, and buttons'),COMPLETED:s._('Completed', 'business.strings', 'A generic translation for \'Completed\' used for labeling, CTAs, and buttons'),PENDING:s._('Pending', 'business.strings', 'A generic translation for \'Pending\' used for labeling, CTAs, and buttons'),SELECT:s._('Select', 'business.strings', 'A generic translation for \'Select\' used for labeling, CTAs, and buttons'),ARCHIVED:s._('Archived', 'business.strings', 'A generic translation for \'Archived\' used for labeling, CTAs, and buttons'),ACTIONS:s._('Actions', 'business.strings', 'A generic translation for \'Actions\' used for labeling, CTAs, and buttons'),PRODUCT_GROUPS:s._('Product groups', 'business.strings', 'A generic translation for \'Product groups\' used for labeling, CTAs, and buttons'),CUSTOM:s._('Custom', 'business.strings', 'A generic translation for \'Custom\' used for labeling, CTAs, and buttons'),CREATE_PIN:s._('Create Pin', 'business.strings', 'A generic translation for \'Create Pin\' used for labeling, CTAs, and buttons'),COUNTRY:s._('Country', 'business.strings', 'A generic translation for \'Country\' used for labeling, CTAs, and buttons'),VIDEO_VIEWS:s._('Video views', 'business.strings', 'A generic translation for \'Video views\' used for labeling, CTAs, and buttons'),REMOVE:s._('Remove', 'business.strings', 'A generic translation for \'Remove\' used for labeling, CTAs, and buttons'),EMAIL_ADDRESS:s._('Email address', 'business.strings', 'A generic translation for \'Email address\' used for labeling, CTAs, and buttons'),PINTEREST:s._('Pinterest', 'business.strings', 'A generic translation for \'Pinterest\' used for labeling, CTAs, and buttons'),PRIVACY_POLICY:s._('Privacy Policy', 'business.strings', 'A generic translation for \'Privacy Policy\' used for labeling, CTAs, and buttons'),OTHER:s._('Other', 'business.strings', 'A generic translation for \'Other\' used for labeling, CTAs, and buttons'),REQUIRED:s._('Required', 'business.strings', 'A generic translation for \'Required\' used for labeling, CTAs, and buttons'),CLICKS_ACTION:s._('Clicks', 'business.strings', 'A generic translation for \'Clicks\', the action used for labeling, CTAs, and buttons'),CLICKS_NOUN:s._('Clicks', 'business.strings', 'A generic translation for \'Clicks\', the noun, used for labeling, CTAs, and buttons'),ENGAGEMENT:s._('Engagement', 'business.strings', 'A generic translation for \'Engagement\' used for labeling, CTAs, and buttons'),NOT_NOW:s._('Not now', 'business.strings', 'A generic translation for \'Not now\' used for labeling, CTAs, and buttons'),ADS:s._('Ads', 'business.strings', 'A generic translation for \'Ads\' used for labeling, CTAs, and buttons'),ERROR:s._('Error', 'business.strings', 'A generic translation for \'Error\' used for labeling, CTAs, and buttons'),CAMPAIGNS:s._('Campaigns', 'business.strings', 'A generic translation for \'Campaigns\' used for labeling, CTAs, and buttons'),VISIT_ACTION:s._('Visit', 'business.strings', 'A generic translation for \'Visit\', the action, used for labeling, CTAs, and buttons'),VISIT_NOUN:s._('Visit', 'business.strings', 'A generic translation for \'Visit\', the noun, used for labeling, CTAs, and buttons'),OUTBOUND_CLICKS:s._('Outbound clicks', 'business.strings', 'A generic translation for \'Outbound clicks\' used for labeling, CTAs, and buttons'),ADD:s._('Add', 'business.strings', 'A generic translation for \'Add\' used for labeling, CTAs, and buttons'),DESCRIPTION:s._('Description', 'business.strings', 'A generic translation for \'Description\' used for labeling, CTAs, and buttons'),SPEND_ACTION:s._('Spend', 'business.strings', 'A generic translation for \'Spend\', the action, used for labeling, CTAs, and buttons'),SPEND_NOUN:s._('Spend', 'business.strings', 'A generic translation for \'Spend\', the noun, used for labeling, CTAs, and buttons'),CREATE_AD:s._('Create ad', 'business.strings', 'A generic translation for \'Create ad\' used for labeling, CTAs, and buttons'),EXPAND:s._('Expand', 'business.strings', 'A generic translation for \'Expand\' used for labeling, CTAs, and buttons'),MEASURE_YOUR_AD_PERFORMANCE:s._('Measure your ad performance', 'business.strings', 'A generic translation for \'Measure your ad performance\' used for labeling, CTAs, and buttons'),CREATE_BOARD:s._('Create board', 'business.strings', 'A generic translation for \'Create board\' used for labeling, CTAs, and buttons'),SELECTED:s._('Selected', 'business.strings', 'A generic translation for \'Selected\' used for labeling, CTAs, and buttons'),PEOPLE:s._('People', 'business.strings', 'A generic translation for \'People\' used for labeling, CTAs, and buttons'),YES:s._('Yes', 'business.strings', 'A generic translation for \'Yes\' used for labeling, CTAs, and buttons'),TOTAL:s._('Total', 'business.strings', 'A generic translation for \'Total\' used for labeling, CTAs, and buttons'),AUDIENCE_INSIGHTS:s._('Audience insights', 'business.strings', 'A generic translation for \'Audience insights\' used for labeling, CTAs, and buttons'),DISMISS:s._('Dismiss', 'business.strings', 'A generic translation for \'Dismiss\' used for labeling, CTAs, and buttons'),PHONE_NUMBER:s._('Phone number', 'business.strings', 'A generic translation for \'Phone number\' used for labeling, CTAs, and buttons'),TODAY:s._('Today', 'business.strings', 'A generic translation for \'Today\' used for labeling, CTAs, and buttons'),GOT_IT:s._('Got it', 'business.strings', 'A generic translation for \'Got it\' used for labeling, CTAs, and buttons'),SUCCESS:s._('Success', 'business.strings', 'A generic translation for \'Success\' used for labeling, CTAs, and buttons'),AD_GROUPS:s._('Ad groups', 'business.strings', 'A generic translation for \'Ad groups\' used for labeling, CTAs, and buttons')})[e]}},385336(e,s,l){l.d(s,{A:()=>j});var a=l(61163),t=l(859471),o=l(19821),i=l(743372),r=l(257300),n=l(989457),_=l(693154),c=l(578849),d=l(538329),u=l(601185),A=l(844255),g=l(168079),b=l(734696),h=l(653956),p=l(586733),P=l(172150),f=l(264986),m=l(801095);function C(e){return e.map(({id:e})=>e)}function z(e,s){return e.filter(({type:e})=>s.includes(e))}var S=l(562615);function v({boardCreateSource:e,selectedContacts:s,setSelectedContacts:l}){(0,t.useEffect)(()=>{(0,a.A)("BoardCreateGlowupAddCollaborator","/app/www/BoardCreateGlowup/BoardCreateGlowupAddCollaborator.tsx")},[]);let i=(0,t.useRef)(!1),{logContextEvent:r}=(0,p.o)();(0,g.A)(()=>(r({event_type:13,view_type:5,view_parameter:3059,component:13305,aux_data:{source:e}}),()=>{i.current||r({event_type:10521,view_type:5,view_parameter:3059,component:13305,aux_data:{source:e}})}));let{searchValue:n,allContacts:_,handleTextFieldChange:c,handleTypeaheadSuggestionsChange:u,handleCollaboratorClick:A}=(0,m.A)({selectedContacts:s,onSelectedContactsChange:l}),b=C(s),h=(0,d.A)();return(0,S.jsxs)(o.so,{direction:"column",gap:6,children:[(0,S.jsxs)(o.so,{direction:"column",gap:2,children:[(0,S.jsx)(o.KJ,{size:"200",children:h._('Collaborators can...', 'BoardCreateGlowupModal.collaborators.content.paragraph-1', 'Text before explaining current collaborator permission setting')}),(0,S.jsxs)(o.so,{direction:"column",gap:1,children:[(0,S.jsx)(o.KJ,{size:"400",weight:"bold",children:h._('Do (almost) everything', 'BoardCreateGlowupModal.collaborators.content.paragraph-2', 'Text explaining current collaborator permission setting')}),(0,S.jsx)(o.KJ,{size:"200",children:h._('Add, move or delete Pins and sections, comment and react', 'BoardCreateGlowupModal.collaborators.content.paragraph-3', 'Text explaining current collaborator permission setting')})]})]}),(0,S.jsxs)(o.so,{direction:"column",gap:2,children:[(0,S.jsx)(o.KJ,{size:"200",children:h._('Invite someone on Pinterest', 'BoardCreateGlowupModal.collaborators.content.collaborator-picker-label', 'Text before explaining how to invite someone on Pinterest')}),(0,S.jsx)(f.A,{onSearchChange:c,onTypeaheadSuggestionsChange:u,searchValue:n}),(0,S.jsx)(P.A,{contacts:_,itemPadding:2,onCollaboratorToggle:e=>{A(e),i.current=!0},selectedContactIds:b})]})]})}function T({labelId:e,label:s,subtext:l,children:i}){return(0,t.useEffect)(()=>{(0,a.A)("BoardCreateGlowupModalField","/app/www/BoardCreateGlowup/BoardCreateGlowupModalField.tsx")},[]),(0,S.jsxs)(o.so,{alignItems:"center",children:[(0,S.jsx)(o.az,{flex:"grow",children:(0,S.jsxs)(o.JU,{htmlFor:e,children:[(0,S.jsx)(o.KJ,{size:"300",weight:"bold",children:s}),(0,S.jsx)(o.KJ,{color:"subtle",size:"200",children:l})]})}),i]})}var y=l(753771),w=l(457315),E=l(955170),x=l(720407),I=l(937975);let N=[96,58],B=["email","email_share_suggestion"],O=["user","user_share_suggestion"];var k=l(928802),R=l(679530),D=l(896575);function j({boardCreateSource:e,images:s=[],initialValues:l,onBoardCreate:p,onClose:P,pinId:f}){(0,t.useEffect)(()=>{(0,a.A)("BoardCreateGlowupModal","/app/www/BoardCreateGlowup/BoardCreateGlowupModal.tsx")},[]);let{suggestedBoardName:m,completeExperience:j,dismissExperience:M}=(0,k.A)(1000673,0===s.length),{checkExperiment:L}=(0,u.A)(),[G,K]=(0,t.useState)(l?.boardName??"");(0,t.useEffect)(()=>{m&&K(m)},[m]),(0,t.useEffect)(()=>{async function e(){if(f){let e=await (0,r.A)({url:"/v3/pins/{pin}/board_title_suggestions/",urlParams:{pin:f}}),s=e.resource_response?.data?.[0]?.title;s&&K(s)}}l?.boardName||m||G||!L("web_curation_sabr_board_title_suggestion").anyEnabled||e()},[f,l?.boardName,m]);let[U,F]=(0,t.useState)(l?.privacy==="secret"),[V,J]=(0,t.useState)(),[Y,H]=(0,t.useState)(!1),[q,W]=(0,t.useState)(l?.collaborators??[]),$=(0,d.A)(),X=(0,i.A)(),{isRTL:Q}=(0,A._8)(),Z=(0,_.A)(),ee=Z.isAuth?Z?.avatar_color_index:void 0,es=!!V,el=m??l?.boardName,{state:ea,submitAction:et,isPending:eo}=function({boardCreateSource:e,onBoardCreate:s,onRequestComplete:l,selectedCollaborators:a,auxData:o={}}){let i=(0,x.A)(),r=(0,E.mV)(),n=(0,E.lt)(),[_,c,d]=(0,t.useActionState)(async(t,_)=>{let c={name:_.get("boardName"),privacy:null!=_.get("isSecretBoard")?y.A.BoardPrivacy.SECRET:y.A.BoardPrivacy.PUBLIC,aux_data:{...o,source:e}};try{let e=await i({boardCreateOptions:c}),l=z(a,B),t=z(a,O),o=[];l.length>0&&o.push(r(e.id,C(l))),t.length>0&&o.push(n(e.id,C(t)));try{await Promise.all(o)}catch(e){(0,I.c)({name:"BoardCreateGlowupCollaboratorInviteError",message:(0,w.A)(e,"message")??"Failed to invite collaborators",message_detail:(0,w.A)(e,"message_detail"),stack:(0,w.A)(e,"stack")})}s(e)}catch(s){let e=(0,w.A)(s,"api_error_code");if(void 0!==e&&N.includes(e))return{serverBoardNameError:(0,w.A)(s,"message")};(0,I.c)({name:"BoardCreateGlowupFormBoardCreateError",message:(0,w.A)(s,"message")??"Failed to create board",message_detail:(0,w.A)(s,"message_detail"),stack:(0,w.A)(s,"stack")})}finally{l?.()}return{}},{});return{state:_,submitAction:c,isPending:d}}({boardCreateSource:e,onBoardCreate:e=>{e.name===m?j():M(),p(e)},onRequestComplete:()=>{H(!1)},selectedCollaborators:q,auxData:{...el?{suggested_board_name:el}:{}}}),ei=()=>{m&&M(),P()},{serverBoardNameError:er}=ea;(0,g.A)(()=>{X({event_type:13,view_type:5,view_parameter:87,component:13025,aux_data:{source:e}})});let en=()=>!Y&&er?er:es?V:void 0,[e_,ec]=(0,t.useState)("main"),ed=()=>{X({event_type:101,view_type:5,view_parameter:87,component:13025,element:10592,aux_data:{source:e}}),(0,t.startTransition)(()=>{ec("collaborators")})},eu={main:{content:(0,S.jsxs)(o.so,{direction:"column",gap:6,children:[(0,S.jsx)(o.so,{justifyContent:"center",children:(0,S.jsx)(o.az,{paddingY:2,width:213,children:(0,S.jsx)(h.A,{boardKey:null,coverPinKey:null,images:s})})}),(0,S.jsx)(o.A_,{errorMessage:en(),id:"board-name",label:$._('Board name', 'BoardCreateGlowupModal.boardNameInput.label', 'Label for board name input'),name:"boardName",onChange:({value:e})=>{K(e);let s=(0,b.Yl)((0,R.D)($),e);s.length>0?J(s[0]):J(void 0),H(!0)},placeholder:$._('Name your board', 'BoardCreateGlowupModal.boardNameInput.placeholder', 'Placeholder for board name input'),size:"lg",value:G}),(0,S.jsx)(T,{label:$._('Make this board secret', 'BoardCreateGlowupModal.privacySettings.label', 'Label for privacy settings'),labelId:"secret-board-toggle",subtext:$._('Only you and collaborators will see this board', 'BoardCreateGlowupModal.privacySettings.subtext', 'Subtext for privacy settings'),children:(0,S.jsx)(o.dO,{id:"secret-board-toggle",name:"isSecretBoard",onChange:({value:s})=>{F(s),X({event_type:s?106:107,view_type:5,view_parameter:87,component:13025,element:53,aux_data:{source:e}})},switched:U})}),(0,S.jsx)(T,{label:$._('Group board', 'BoardCreateGlowupModal.groupBoardSettings.label', 'Label for group board settings'),labelId:"invite-collaborators-button",subtext:$._('Invite others to collaborate on this board', 'BoardCreateGlowupModal.groupBoardSettings.subtext', 'Subtext for group board settings'),children:q.length>0?(0,S.jsx)(o.az,{"data-test-id":"avatar-group",children:(0,S.jsx)(n.Z7,{addCollaborators:!0,collaborators:q.map(e=>({color:ee,name:e.full_name??"",src:e.image_medium_url??""})),onClick:ed,role:"button",size:"md"})}):(0,S.jsx)(o.K0,{accessibilityLabel:$._('Invite collaborators', 'BoardCreateGlowupModal.groupBoardSettings.accessibilityLabel', 'Accessibility label for invite collaborators button'),bgColor:"secondary",icon:"person-plus",onClick:ed,size:"lg"})})]}),footer:(0,S.jsx)(D.A,{disabled:!!en()||!G.trim(),form:"board-create-glowup-form",fullWidth:!0,onClick:()=>{X({event_type:101,view_type:5,view_parameter:87,component:13025,element:249,aux_data:{source:e}})},size:"lg",submitting:eo,text:$._('Create', 'BoardCreateGlowupModal.createButton', 'The button to submit the board creation form')}),heading:$._('Create a board', 'BoardCreateGlowupModal.heading', 'Heading for board create glowup modal'),accessibilityModalLabel:$._('Create a board', 'BoardCreateGlowupModal.accessibilityModalLabel', 'Accessibility label for board create glowup modal')},collaborators:{content:(0,S.jsx)(v,{boardCreateSource:e,selectedContacts:q,setSelectedContacts:W}),footer:null,heading:$._('Invite collaborators', 'BoardCreateGlowupModal.collaborators.heading', 'Heading for invite collaborators screen'),accessibilityModalLabel:$._('Invite collaborators', 'BoardCreateGlowupModal.collaborators.accessibilityModalLabel', 'Accessibility label for invite collaborators screen')}};return(0,S.jsx)(n.aF,{accessibilityModalLabel:eu[e_].accessibilityModalLabel,align:"center",footer:eu[e_].footer,heading:(0,S.jsx)(o.az,{position:"relative",children:(0,S.jsxs)(o.so,{alignItems:"center",justifyContent:"center",width:"100%",children:["main"!==e_&&(0,S.jsx)(o.az,{left:!Q,position:"absolute",right:Q,children:(0,S.jsx)(o.K0,{accessibilityLabel:$._('Go back', 'BoardCreateGlowupModal.backButton.accessibilityLabel', 'Accessibility label for back button'),icon:"chevron-left",onClick:()=>{(0,t.startTransition)(()=>{ec("main")})},size:"lg"})}),"main"===e_&&(0,S.jsx)(o.az,{left:Q,position:"absolute",right:!Q,children:(0,S.jsx)(o.K0,{accessibilityLabel:(0,c.A)("CLOSE",$),icon:"close",onClick:ei,size:"lg"})}),(0,S.jsx)(o.so.Item,{flex:"grow",children:(0,S.jsx)(o._Y,{accessibilityLevel:1,align:"center",size:"600",children:eu[e_].heading})})]})}),onDismiss:ei,size:"md",children:(0,S.jsx)("form",{id:"board-create-glowup-form",onSubmit:e=>{e.preventDefault();let s=e.currentTarget;(0,t.startTransition)(async()=>{await et(new FormData(s))})},children:(0,S.jsx)(o.az,{minHeight:600,paddingX:6,paddingY:3,children:eu[e_].content})})})}},31973(e,s,l){l.d(s,{A:()=>d});var a=l(61163),t=l(859471),o=l(19821),i=l(586733),r=l(538329),n=l(542975),_=l(678358),c=l(562615);function d({accessibilityControls:e,accessibilityExpanded:s,accessibilityHaspopup:l,clientTrackingParams:d,dropdownRef:u,hideDropdown:A=!1,isSaved:g,onBoardDropdownClick:b,onSaveClick:h,promotedIsLeadAd:p,renderPinSaveTooltip:P,selectedItem:f,selectedTitle:m,showBoardFlyout:C,showPromoteBanner:z=!1,unselectedText:S,variant:v,viewParameter:T,viewType:y,surface:w}){(0,t.useEffect)(()=>{(0,a.A)("BoardSelectionDisplay","/app/www/common/PinBetterSave/BoardSelectionDisplay.tsx")},[]);let E=(0,r.A)(),[x,I]=(0,t.useState)(null),{closeupWithinMasonryEnabled:N}=(0,_._G)(),{logContextEvent:B}=(0,i.o)(),O=(0,t.useEffectEvent)(()=>{B({event_type:13,...y?{view_type:y}:Object.freeze({}),...T?{view_parameter:T}:Object.freeze({}),component:13282,element:14348,object_id_str:f?.boardId,clientTrackingParams:d,aux_data:{is_profile_save:f?.type==="boardless"}})});(0,t.useEffect)(()=>{f&&f?.type==="boardless"&&O()},[f]);let k=m||S,R="closeup"===v,D="media-viewer"===v,j="comparison"===v,M="VideoCarouselModule"===w,L=(0,t.useMemo)(()=>j?"inverse":D?C?"inverse":"default":C||!R?"light":"default",[R,C,D,j]),G=(0,t.useCallback)(({event:e})=>{b(e)},[b]),K=R?"transparent":"transparentInverse";K=D?"tertiarySemiTransparent":K,K=j?"transparentInverse":K;let U=g?E._('Saved', 'PinBetterSave.BoardSelection.SavedButton', 'BetterSave Saved label'):E._('Save', 'PinBetterSave.BoardSelection.SaveButton', 'BetterSave Save label');return(0,c.jsxs)(o.az,{alignItems:D?"start":"center",dangerouslySetInlineStyle:{__style:{gap:"4px"}},display:"flex",paddingX:N?0:void 0,width:"100%",children:[!A&&(0,c.jsx)(o.az,{"data-test-id":m?"board-selection-item-selected":"board-selection-placeholder",flex:"grow",width:"100%",children:(0,c.jsx)(o.$n,{ref:u,accessibilityControls:e,accessibilityExpanded:s,accessibilityHaspopup:l,accessibilityLabel:(0,n.$)(E._('Select a board to save to: {{ boardName }}', 'PinBetterSave.BoardSelection.DropdownIcon', 'Accessibility label used to prompt the user to select the board where the Pin will be saved. boardName: The name of the board'),{boardName:k}),color:K,dataTestId:"PinBetterSaveDropdown",iconEnd:"chevron-down",onClick:G,selected:C,size:M?"sm":"lg",text:(0,c.jsx)(o.KJ,{color:L,lineClamp:1,overflow:"breakAll",size:M?"100":"300",weight:"bold",children:k})})}),(0,c.jsx)(o.az,{alignSelf:R?"center":"start","data-test-id":"PinBetterSaveButton",flex:"none",marginStart:"auto",children:(0,c.jsx)(o.PF,{ref:I,color:p||R&&z?"secondary":"primary",onClick:({event:e})=>{A?b(e):h(e)},selected:g,size:M?"sm":"lg",text:U})}),!!P&&!!x&&R&&P(x)]})}},275953(e,s,l){l.d(s,{a:()=>K});var a,t,o=l(61163),i=l(859471),r=l(106386);l(825193);var n=l(979638),_=l(427471),c=l(243439),d=l(586733),u=l(900303),A=l(296221),g=l(250325),b=l(567176),h=l(693154),p=l(535273),P=l(662449),f=l(538329),m=l(74806),C=l(706466),z=l(987055),S=l(961403),v=l(310065),T=l(48180),y=l(878913),w=l(204398),E=l(96897),x=l(974694),I=l(19821),N=l(542975),B=l(570805),O=l(562615),k=l(96740);let R=";base64,";function D(e,s,l){var a;return(s="symbol"==typeof(a=function(e,s){if("object"!=typeof e||!e)return e;var l=e[Symbol.toPrimitive];if(void 0!==l){var a=l.call(e,s||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===s?String:Number)(e)}(s,"string"))?a:a+"")in e?Object.defineProperty(e,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[s]=l,e}let j=/#[^(\-\\.\s#,\/$%\^&\*;:{}=\`~()\[\]@|<>â€¦)]+/gi,M=(void 0!==a||(a=l(82118)).hash&&"64132b88edd48497e63c9ad85ae5ab66"!==a.hash&&console.error("The definition of 'PinSaveRequest_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a),L=(void 0!==t||(t=l(842227)).hash&&"58c24e25a76e7a1c4533f3b07f490517"!==t.hash&&console.error("The definition of 'PinSaveRequest_shuffle_asset' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),t);class G extends i.Component{constructor(...e){super(...e),D(this,"state",{boardSavedTo:null,displaySuccessAnimation:!1,newPin:null,modalTitle:this.getModalTitle(this.props.showCreate,!!this.props.boardWithSection),pinDescription:this.props.pin&&this.props.pin.description||this.props.urlPinInfo?.description||"",resolve:void 0,sharing:{facebook:!1,twitter:!1}}),D(this,"unmounted",!1),D(this,"setModalTitle",e=>this.safeSetState({modalTitle:e})),D(this,"updateDescription",e=>{this.safeSetState({pinDescription:e})}),D(this,"close",()=>{let{onClose:e}=this.props;e&&e(),this.props.logContextEvent({event_type:2502,component:5,element:610})}),D(this,"safeSetState",(e,s)=>{this.unmounted?s&&s():this.setState(e,s)}),D(this,"getPinResource",(e,s,l)=>{let{color:a,clientTrackingParams:t,currentHistoryStack:o,pin:i,method:r,guid:n,additionalCreateFields:d,advertiser_id:u,urlPinInfo:A,shuffleAsset:g,viewerUserId:b}=this.props,h=i?.entityId?"RepinResource":"PinResource",p=i?.imageUrl||A?.imageUrl,P=i?.link||A?.link,f=!i?.entityId&&p?(0,z.A)(p,P):i?.images_orig?.url||"",{imageBase64:m,imageUrl:C}=function({pinImageBase64:e,imageUrl:s}){let l=s.startsWith("data:"),a=l?function(e){let s=e.indexOf(R);if(!(s<0))return e.slice(s+R.length)||void 0}(s):void 0,t=e??a;return l?{imageBase64:t,imageUrl:void 0}:{imageBase64:t,imageUrl:s}}({pinImageBase64:i?.imageBase64,imageUrl:f}),{trafficSource:S}=(0,c.A)(o??[],!!b),v={...d,board_id:s||"",color:a||"",clientTrackingParams:(0,T.A)(t,i?.trackingParams),description:this.state.pinDescription,guid:n||"",link:P,image_base64:m,image_url:C,is_buyable_pin:!1,is_removable:i?.promotedIsRemovable??void 0,media_upload_id:i?.mediaUploadId??void 0,method:r||"",pin_id:i?.entityId||"",section:l,title:i?.title||"",aux_data:{source:S},...u?{advertiser_id:u}:Object.freeze({}),...g?{shuffle_asset:g.entityId}:{}};if(!e){let{facebook:e,twitter:s}=this.state.sharing;v.share_facebook=e,v.share_twitter=s}return _.A.create(h,v)}),D(this,"triggerPubSubs",e=>{this.props.onPinCreate&&this.props.onPinCreate({boardId:e.board.id,pinId:e.id})}),D(this,"makeCancelablePromise",e=>{let s=!1;return{promise:new Promise((l,a)=>{e.then(e=>s?a({isCanceled:!0}):l(e)),e.catch(e=>s?a({isCanceled:!0}):a(e))}),cancel(){s=!0}}}),D(this,"handleLogToastClick",()=>{this.props.logContextEvent({event_type:101,component:20,view_type:52})}),D(this,"showBoardSavedToast",(e,s)=>{let{toastManagerContext:l,i18n:a}=this.props;l.showToast(({hideToast:l})=>{var t;return(0,O.jsx)(b.A,{duration:4e3,href:s?`${e.url??""}${s.slug??""}`:e.url,imageUrl:e.image_cover_url??"",onClick:this.handleLogToastClick,onHide:l,text:(t=e.name,s?(0,B.A)(a._('Saved to {{sectionName}} in {{boardName}}', 'Toast for successfully saving to a section within a board', 'Toast for successfully saving to a section within a board'),{sectionName:s.title??"",boardName:t??""}):(0,O.jsx)(I.KJ,{children:(0,N.$w)({text:a._('Saved to <strong id="1">{{ boardName }}</strong>', 'PinToBoard.Lib.SavedToBoardToast.Message', 'Saved to label for better save. boardName: url to saved board'),markers:{boardName:t??""},jsxReplacements:{1:({innerHtmlStrings:e})=>(0,O.jsx)(I.KJ,{weight:"bold",children:e})}})}))})})}),D(this,"dismissModal",()=>{let{resolve:e,newPin:s}=this.state;e&&e(s)}),D(this,"handleBoardSaveSuccess",(e,s,l,a)=>{let{action:t,saveToBoard:o,dispatch:i,pin:r,setCompletionPromise:n,shouldShowToast:_,showRepinAnimation:c,viewerUserId:d,urlPinInfo:u}=this.props;i((0,g.$O)());let A=e.resource_response.data,b=this.makeCancelablePromise(new Promise(e=>{this.triggerPubSubs(A);let t=this.state.pinDescription.match(j)||[];t.length>0&&this.props.logContextEvent({event_type:2,element:10273,object_id_str:this.props.pin?.entityId,aux_data:{hashtags:JSON.stringify(t)}});let o=()=>{_&&this.showBoardSavedToast(s,l),this.safeSetState({displaySuccessAnimation:!0,modalTitle:this.props.i18n._('Board created', 'Modal title after creating a new board', 'Modal title after creating a new board'),newPin:A,resolve:e})};a?o():e(A)}));!a&&r?.entityId&&c(r.entityId),n(b),o(s),i((0,w.zY)({boardId:s.id,sectionId:l&&l.id,increment:1})),d&&(i((0,x.LR)({userId:d,increment:1})),i((0,g.$O)())),(l||!s.image_cover_url)&&(s.image_cover_url=r?.imageUrl||u?.imageUrl||r?.images_236x?.url||"",i((0,w.NQ)(s))),l&&i((0,m.Jt)("BoardSectionResource",{options:{field_set_key:"board_page",section_id:l.id}})),r?.entityId&&i((0,E.J4)({id:r.entityId,nodeId:r.__id,boardId:s.id,title:s.name??"",url:s.url??"",localPinId:A.id}))}),D(this,"handleSaveToBoard",(e,s,l)=>{let{onToggleModal:a,shouldShowToast:t,mountAfterActionPlacement:o}=this.props;t&&!l&&(this.close(),this.showBoardSavedToast(e,s));let i="secret"===(e.privacy||""),r={board:s?s.id:e.id,state:k.J.LOADING};this.safeSetState({boardSavedTo:r},()=>{this.getPinResource(i,e.id,(s||{}).id).callCreate({showError:!1}).then(t=>{let i=t.resource_response.data,{clientTrackingParams:n,currentHistoryStack:_,pin:d,viewerUserId:u}=this.props,{trafficSource:A}=(0,c.A)(_??[],!!u);this.props.logContextEvent({aux_data:{source:A},clientTrackingParams:(0,T.A)(n,d?.trackingParams)??void 0,event_type:d?.entityId?5:1,object_id_str:i?.id||d?.entityId||"",view_type:52}),o("Save",{pin_id:d?.entityId,is_promoted:d?.isPromoted}),this.safeSetState({boardSavedTo:Object.assign(r,{state:k.J.SUCCESS})},()=>this.handleBoardSaveSuccess(t,e,s,l)),a&&!l&&a(!1)}).catch(e=>{this.unmounted||this.safeSetState({boardSavedTo:null}),u.A.showError(e.message_detail||e.message);let s=this.makeCancelablePromise(Promise.reject(e));this.props.setCompletionPromise(s),a&&a(!1)})})}),D(this,"handleNewBoardAnimationCompletion",()=>{let{pin:e,showRepinAnimation:s}=this.props;e?.entityId&&s(e.entityId)})}getModalTitle(e,s){if(e)if(s)return this.props.i18n._('Create section', 'modal title for create section pane', 'modal title for create section pane');else return this.props.i18n._('Create board', 'Repin title for making a new board', 'Repin title for making a new board');return s?this.props.i18n._('Choose section', 'modal title for choose section', 'modal title for choose section'):this.props.i18n._('Choose board', 'Repin title for choosing a board', 'Repin title for choosing a board')}componentDidUpdate(e){let{boardWithSection:s,showCreate:l,pin:a,urlPinInfo:t,description:o}=this.props,i={};(a!==e.pin||t!==e.urlPinInfo||o!==e.description)&&(i.pinDescription=a?.description||t?.description||o||""),(l!==e.showCreate||s!==e.boardWithSection)&&(i.modalTitle=this.getModalTitle(l,!!s)),Object.keys(i).length>0&&this.safeSetState(i)}componentWillUnmount(){this.unmounted=!0}render(){let{close:e,dismissModal:s,handleNewBoardAnimationCompletion:l,handleSaveToBoard:a,setModalTitle:t,updateDescription:o}=this,{boardSavedTo:i,displaySuccessAnimation:r,modalTitle:n,newPin:_}=this.state,{color:c}=this.props;return this.props.children({boardSavedTo:i,color:c,dismissModal:s,displaySuccessAnimation:r,handleAbort:e,handleNewBoardAnimationCompletion:l,handleSaveToBoard:a,modalTitle:n,newPin:_,setModalTitle:t,updateDescription:o})}componentDidMount(){(0,o.A)("PinSaveRequest","/app/www/save/pin-to-board/PinSaveRequest.tsx")}}function K({pinKey:e,shuffleAssetKey:s,...l}){(0,i.useEffect)(()=>{(0,o.A)("PinSaveRequest","/app/www/save/pin-to-board/PinSaveRequest.tsx")},[]);let{saveToBoard:a}=(0,v.p)(),{logContextEvent:t}=(0,d.o)(),_=(0,y.y)()?.onPinCreate,c=(0,f.A)(),u=(0,n.zy)(),g=(0,h.A)(),b=(0,C.CG)(),m=(0,r.wA)(),{updateHeaderState:z}=(0,S.A)(),T=(0,r.d4)(({advertiser:e})=>g.isAuth&&e&&e.owner_user_id!==g.id?e.id:void 0),{previous:w}=(0,P.qD)(),E=(0,A.Ts)(),x=(0,P.V)(),I=(0,p.A)(M,e),N=(0,p.A)(L,s);return(0,O.jsx)(G,{...l,advertiser_id:T,currentHistoryStack:x,dispatch:m,i18n:c,location:u,logContextEvent:t,mountAfterActionPlacement:E,onPinCreate:_,pin:I,previousHistory:w,saveToBoard:a,showRepinAnimation:e=>z({type:"showRepinAnimation",payload:e}),shuffleAsset:N,toastManagerContext:b,viewerUserId:g.isAuth?g.id:void 0})}},96740(e,s,l){l.d(s,{J:()=>a});let a={LOADING:"loading",SUCCESS:"success"}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/62155-23a840259e2599a3.mjs.map