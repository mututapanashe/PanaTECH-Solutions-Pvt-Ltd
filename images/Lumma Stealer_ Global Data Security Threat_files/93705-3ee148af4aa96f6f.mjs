(self.modernJsonp=self.modernJsonp||[]).push([["93705"],{985455(e,t,a){var l,n,i,r,o,s;a.r(t),a.d(t,{default:()=>u});let d=(l={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},o=[i={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],s=[{alias:null,args:null,kind:"ScalarField",name:"boardId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"localPinId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"score",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sectionId",storageKey:null},r,{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},i],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinBetterSave_pin",selections:[l,{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"layout",storageKey:null},n,l,i,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"owner",plural:!1,selections:[l],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PinRecommendationReason",kind:"LinkedField",name:"recommendationReason",plural:!1,selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[n,l,i],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"promotedIsRemovable",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},r,{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"promotedIsLeadAd",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shoppingFlags",storageKey:null},{alias:"images_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:o,storageKey:'images(spec:"236x")'},{alias:"images_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:o,storageKey:'images(spec:"474x")'},{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"},{args:null,kind:"FragmentSpread",name:"PinSaveRequestRepinWithSectionSuggestions_pin"},{args:null,kind:"FragmentSpread",name:"PinToBoard_pin"},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null},{alias:null,args:null,concreteType:"SaveTarget",kind:"LinkedField",name:"savedInfo",plural:!1,selections:s,storageKey:null},{alias:null,args:null,concreteType:"SaveTarget",kind:"LinkedField",name:"savedCutout",plural:!1,selections:s,storageKey:null},{alias:null,args:null,concreteType:"SaveTarget",kind:"LinkedField",name:"selectedItem",plural:!1,selections:s,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageBase64",storageKey:null}]}],type:"Pin",abstractKey:null});d.hash="30d8edb71deeb3f1a4abc132d299e97a";let u=d},925878(e,t,a){a.r(t),a.d(t,{default:()=>n});let l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinBetterSave_shuffle_asset",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:"cutoutImages_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"cutoutImages",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'cutoutImages(spec:"236x")'},{args:null,kind:"FragmentSpread",name:"PinSaveRequestRepinWithSectionSuggestions_shuffle_asset"},{args:null,kind:"FragmentSpread",name:"PinToBoard_shuffle_asset"}],type:"ShuffleAsset",abstractKey:null};l.hash="1f53887e43dccddcc1fb109a988e5c3d";let n=l},501978(e,t,a){a.r(t),a.d(t,{default:()=>n});let l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinSaveRequestRepinWithSectionSuggestions_pin",selections:[{args:null,kind:"FragmentSpread",name:"PinSaveRequest_pin"}],type:"Pin",abstractKey:null};l.hash="03aa6b9cad1d5fb9b12a7c896ccdaffd";let n=l},727999(e,t,a){a.r(t),a.d(t,{default:()=>n});let l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinSaveRequestRepinWithSectionSuggestions_shuffle_asset",selections:[{args:null,kind:"FragmentSpread",name:"PinSaveRequest_shuffle_asset"}],type:"ShuffleAsset",abstractKey:null};l.hash="6bd1eb83cfe5391288164b17cc5d85b7";let n=l},883666(e,t,a){var l,n;a.r(t),a.d(t,{default:()=>r});let i={fragment:{argumentDefinitions:l=[{defaultValue:null,kind:"LocalArgument",name:"boardId"}],kind:"Fragment",metadata:null,name:"collab_AcceptInvite_Mutation",selections:n=[{alias:null,args:[{fields:[{kind:"Variable",name:"board",variableName:"boardId"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3AcceptBoardCollaboratorInviteMutation",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:l,kind:"Operation",name:"collab_AcceptInvite_Mutation",selections:n},params:{id:"781c41132fefa007ebde7bcd8c49840ce1768ed6f6781fd72e3904bd35fb576f",metadata:{},name:"collab_AcceptInvite_Mutation",operationKind:"mutation",text:null}};i.hash="7005ce437a6a6ff33741ab44aa02cf61";let r=i},921395(e,t,a){var l,n;a.r(t),a.d(t,{default:()=>r});let i={fragment:{argumentDefinitions:l=[{defaultValue:null,kind:"LocalArgument",name:"boardId"},{defaultValue:null,kind:"LocalArgument",name:"userId"}],kind:"Fragment",metadata:null,name:"collab_ApproveInvite_Mutation",selections:n=[{alias:null,args:[{fields:[{kind:"Variable",name:"board",variableName:"boardId"},{kind:"Variable",name:"user",variableName:"userId"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3ApproveBoardCollaboratorInviteMutation",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:l,kind:"Operation",name:"collab_ApproveInvite_Mutation",selections:n},params:{id:"472a584df4a467181ed32ec33d235ef2f2e6d53fdb4c7a43d11156b6d51dcd50",metadata:{},name:"collab_ApproveInvite_Mutation",operationKind:"mutation",text:null}};i.hash="40ae8061007ba5f53a4570e43e4ca864";let r=i},264770(e,t,a){var l,n,i,r;a.r(t),a.d(t,{default:()=>s});let o={fragment:{argumentDefinitions:[l={defaultValue:null,kind:"LocalArgument",name:"ban"},n={defaultValue:null,kind:"LocalArgument",name:"boardId"},i={defaultValue:null,kind:"LocalArgument",name:"userId"}],kind:"Fragment",metadata:null,name:"collab_DeclineOrDeleteBoardCollaboratorInvite_Mutation",selections:r=[{alias:null,args:[{fields:[{kind:"Variable",name:"ban",variableName:"ban"},{kind:"Variable",name:"board",variableName:"boardId"},{kind:"Variable",name:"user",variableName:"userId"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3DeclineOrDeleteBoardCollaboratorInviteMutation",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,i,l],kind:"Operation",name:"collab_DeclineOrDeleteBoardCollaboratorInvite_Mutation",selections:r},params:{id:"ff3059743c1d13d4f1c2ef07e10d2b29925c7b330db4103e55e9e65c380c0ce5",metadata:{},name:"collab_DeclineOrDeleteBoardCollaboratorInvite_Mutation",operationKind:"mutation",text:null}};o.hash="c62e5df78917dd238b70f366f358d487";let s=o},577762(e,t,a){var l,n,i,r,o,s,d,u;a.r(t),a.d(t,{default:()=>p});let c={fragment:{argumentDefinitions:l=[{defaultValue:null,kind:"LocalArgument",name:"board"},{defaultValue:null,kind:"LocalArgument",name:"collaboratorIds"}],kind:"Fragment",metadata:null,name:"collab_RemoveBoardCollaborators_Mutation",selections:[{alias:null,args:n=[{fields:[{kind:"Variable",name:"board",variableName:"board"},{kind:"Variable",name:"collaboratorIds",variableName:"collaboratorIds"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3RemoveBoardCollaboratorsMutation",plural:!1,selections:[i={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"data",plural:!1,selections:[r={alias:null,args:null,kind:"ScalarField",name:"collaboratorCount",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"collaboratingUsers",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserCollaboratingUsersConnection",kind:"LinkedField",name:"connection",plural:!1,selections:[{alias:null,args:null,concreteType:"UserCollaboratingUsersEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"node",plural:!1,selections:[o={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"UserCollaboratingUsersConnectionContainer",abstractKey:null}],storageKey:null}],storageKey:null}],type:"V3RemoveBoardCollaborators",abstractKey:null},d={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:l,kind:"Operation",name:"collab_RemoveBoardCollaborators_Mutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"v3RemoveBoardCollaboratorsMutation",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"data",plural:!1,selections:[r,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"collaboratingUsers",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserCollaboratingUsersConnection",kind:"LinkedField",name:"connection",plural:!1,selections:[{alias:null,args:null,concreteType:"UserCollaboratingUsersEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"node",plural:!1,selections:[o,s,u={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"UserCollaboratingUsersConnectionContainer",abstractKey:null}],storageKey:null},u],storageKey:null}],type:"V3RemoveBoardCollaborators",abstractKey:null},d],storageKey:null}]},params:{id:"83dd1206102cffdd460f8c072df0ca515d27c8fcf3798423f1657afabdf467ac",metadata:{},name:"collab_RemoveBoardCollaborators_Mutation",operationKind:"mutation",text:null}};c.hash="2c3e1508650962adfff1171e950fa419";let p=c},398907(e,t,a){var l,n,i,r,o,s,d,u,c,p;a.r(t),a.d(t,{default:()=>h});let m=(l=[{defaultValue:null,kind:"LocalArgument",name:"boardId"},{defaultValue:null,kind:"LocalArgument",name:"message"}],n=[{fields:[{kind:"Variable",name:"board",variableName:"boardId"},{kind:"Variable",name:"message",variableName:"message"}],kind:"ObjectValue",name:"input"}],i={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},o=[r={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],s={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},c={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"},p=[r,u={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],{fragment:{argumentDefinitions:l,kind:"Fragment",metadata:null,name:"collab_RequestToJoin_Mutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"v3CreateRequestToJoinBoardMutation",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"CollaboratorInvite",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"invitedByUser",plural:!1,selections:o,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"invitedUser",plural:!1,selections:o,storageKey:null},s,d,u,{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:o,storageKey:null}],storageKey:null}],type:"CollaboratorInviteResponse",abstractKey:null},c],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:l,kind:"Operation",name:"collab_RequestToJoin_Mutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"v3CreateRequestToJoinBoardMutation",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"CollaboratorInvite",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"invitedByUser",plural:!1,selections:p,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"invitedUser",plural:!1,selections:p,storageKey:null},s,d,u,{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:p,storageKey:null}],storageKey:null}],type:"CollaboratorInviteResponse",abstractKey:null},c],storageKey:null}]},params:{id:"ff45f353c3246c417487b54a02f0669dbc6c45761df9567395537bf1f7875a9f",metadata:{},name:"collab_RequestToJoin_Mutation",operationKind:"mutation",text:null}});m.hash="9aa22a7713214239538142ad2c957cc3";let h=m},805326(e,t,a){var l,n;a.r(t),a.d(t,{default:()=>r});let i={fragment:{argumentDefinitions:l=[{defaultValue:null,kind:"LocalArgument",name:"boardId"},{defaultValue:null,kind:"LocalArgument",name:"emails"},{defaultValue:null,kind:"LocalArgument",name:"message"}],kind:"Fragment",metadata:null,name:"collab_emails_Mutation",selections:n=[{alias:null,args:[{fields:[{kind:"Variable",name:"board",variableName:"boardId"},{kind:"Variable",name:"emails",variableName:"emails"},{kind:"Variable",name:"message",variableName:"message"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3InviteBoardCollaboratorEmailMutationv2",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:l,kind:"Operation",name:"collab_emails_Mutation",selections:n},params:{id:"b71dbcb22ec2462fa0cde080403e4f9001df6f822511fd94b0fb3eae0c6b3fd4",metadata:{},name:"collab_emails_Mutation",operationKind:"mutation",text:null}};i.hash="de392a939a95d05f7ee889fe77a9e52d";let r=i},110619(e,t,a){var l,n,i,r;a.r(t),a.d(t,{default:()=>s});let o={fragment:{argumentDefinitions:[l={defaultValue:null,kind:"LocalArgument",name:"boardId"},n={defaultValue:null,kind:"LocalArgument",name:"collaboratorIds"},i={defaultValue:null,kind:"LocalArgument",name:"message"}],kind:"Fragment",metadata:null,name:"collab_users_Mutation",selections:r=[{alias:null,args:[{fields:[{kind:"Variable",name:"board",variableName:"boardId"},{kind:"Variable",name:"collaboratorIds",variableName:"collaboratorIds"},{kind:"Variable",name:"message",variableName:"message"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3InviteBoardCollaboratorsMutation",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,l,i],kind:"Operation",name:"collab_users_Mutation",selections:r},params:{id:"42ceaa3423a096a27613e5738f83aaadcee449c55d4dd03624d2f08a6b6dca04",metadata:{},name:"collab_users_Mutation",operationKind:"mutation",text:null}};o.hash="850c5de9834cac0edfdd5652a78bffbf";let s=o},201563(e,t,a){a.r(t),a.d(t,{default:()=>n});let l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"hasSensitivityNotices_sensitivity",selections:[{alias:null,args:null,concreteType:"AdvisoryNotice",kind:"LinkedField",name:"notices",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"advisory",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"severity",storageKey:null}],type:"Sensitivity",abstractKey:null};l.hash="547e5abdb645851996d6a1b1a4027c56";let n=l},874929(e,t,a){a.d(t,{Kq:()=>A,bn:()=>k,N_:()=>P});var l=a(859471),n=a(739428),i=a(406218),r=a(253913);let o=(e,t,a)=>a&&(0,i.BP)(a,t)?n.c.MODIFIED:(0,i.TN)(t,e)||a&&(0,i.oA)(a,e)||(0,i.oA)(t,e)?n.c.CLEARED:n.c.APPLIED;function s(e,t){(0,i.i2)(t);let a=e.find(e=>e?.id===t.id),l=a?.rules,n=a?.filter_options?.find(e=>"selectedOptionId"in t&&e.id===t.selectedOptionId)?.rules||l;if(!n)return[e,[]];let r=[],o=[];return e.forEach(e=>{void 0!==e.product_filter_type&&n.includes(e.product_filter_type)?r.push(e):o.push(e)}),[r,o]}function d(e,t){switch(t.type){case"RESET_FILTERS":let[a,l]=t.payload,d=a,u=(0,r.A)(l)?(0,i.$M)(a):l;return Object.values(u).forEach(e=>{let[t]=s(d,e);d=t}),{models:a,availableFilterModels:d,appliedFilters:l,filters:u,isFetching:!1,pendingDeletedSelections:{},status:o(a,l,u)};case"CLEAR_FILTERS":let c=e.models,p=(0,i.Oj)(e.models);return Object.values(p).forEach(e=>{let[t]=s(c,e);c=t}),{...e,filters:p,availableFilterModels:c,pendingDeletedSelections:{},status:o(e.models,e.appliedFilters,p)};case"UPDATE_FILTER":let{payload:m}=t,[h,_]=s(e.models,m),f={...e.filters,[m.id]:m},g={...e.pendingDeletedSelections};return h.forEach(e=>{if(!e.id)return;let t=g[e.id];t&&(f[e.id]=t,delete g[e.id])}),_.forEach(e=>{if(!e.id)return;let t=f[e.id];t&&(g[e.id]=t,delete f[e.id])}),(0,i.i2)(m,e.models.find(e=>e.id===m.id))&&delete f[m.id],{...e,availableFilterModels:h,filters:f,pendingDeletedSelections:g,status:o(e.models,e.appliedFilters,f)};case"SUBMIT_FILTER":return{...e,pendingDeletedSelections:{},status:n.c.SUBMITTED};case"SUBMIT_FAILED":return{...e,status:n.c.FAILED};case"SUBMIT_COMPLETE":let{filters:y}=e;return{...e,appliedFilters:y,pendingDeletedSelections:{},status:o(e.models,y)};case"LOADING":return{...e,isFetching:!0};case"LOADING_COMPLETED_OR_FAILED":return{...e,isFetching:!1};default:return e}}var u=a(393807),c=a(702949),p=a(149562),m=a(156508),h=a(427403),_=a(33658);let f=new Set([1,0,3,6,7,8,9]),g=(e,t,a)=>{let l=t?.find(({product_filter_type:e})=>e===a);if(!l)return;let n=e.findIndex(({product_filter_type:e})=>e===a);e[n]?e[n]=l:e.push(l)},y=(e,t,a)=>{let l=t?.find(({product_filter_type:e})=>e===a);if(!l)return e;let n=e.findIndex(({product_filter_type:e})=>e===a);return e[n]?e[n]=l:e.push(l),e};var b=a(392026),v=a(987628),S=a(106301),I=a(562615);let{Provider:A,getMaybe:k}=(0,v.A)("UnifiedFiltersContext"),P=({applyInitFilters:e,children:t,filterModels:a,filters:r,isFetching:o,refreshFiltersData:s})=>{let{query:v}=(0,S.u)(),k=(0,b.A)(),{getCachedFilters:P,cacheUnifiedFilterModelsWithProductFilters:x}=function(){let[e,t]=(0,l.useState)([]),[a,n]=(0,l.useState)(null),i=(0,h.A)(),r=(0,p.A)(),o=(0,u.A)(),s=(0,c.A)(),d=(0,m.A)(),b=(0,l.useCallback)(({unifiedFilterModels:l,baseCacheKey:u})=>{let c=l?.filter(({product_filter_type:e})=>void 0!==e&&f.has(e));if(!c||c?.length===0||!u)return;let p=u!==a,m=p?[]:e;(p||!i)&&g(m,c,1),(p||!r)&&g(m,c,0),(p||!o)&&g(m,c,3),(p||!s)&&g(m,c,6),(p||!d)&&[7,8,9].forEach(e=>{g(m,c,e)}),(0,_.Ay)(m,e)||(t(m),n(u))},[e,o,s,r,d,i,a]);return{getCachedFilters:(0,l.useCallback)(t=>{if(!t||t?.length===0)return[];let a=[...t];return i&&(a=y(a,e,1)),r&&(a=y(a,e,0)),o&&(a=y(a,e,3)),s&&(a=y(a,e,6)),d&&[7,8,9].forEach(t=>{a=y(a,e,t)}),a},[e,o,s,r,d,i]),cacheUnifiedFilterModelsWithProductFilters:b}}(),w=e?.(a)||r||{},[C,E]=(0,l.useReducer)(d,{models:a,availableFilterModels:a,appliedFilters:w,filters:w,pendingDeletedSelections:{},isFetching:o,status:(0,i.TN)(w,a)||(0,i.oA)(w,a)?n.c.CLEARED:n.c.APPLIED}),[T,F]=(0,l.useState)(a);(0,l.useEffect)(()=>{o&&E({type:"LOADING"})},[o]),(0,l.useEffect)(()=>{if(o||C.isFetching&&0===a.length)return;if(!(0,i.Sp)(T,a))return void E({type:"LOADING_COMPLETED_OR_FAILED"});let t=a;k||(t=P([...a]),x({unifiedFilterModels:[...a],baseCacheKey:v})),E({type:"RESET_FILTERS",payload:[t,e?.(t)||{}]}),F(a)},[e,a,T,o,C.isFetching,P,x,v,k]);let D=(0,l.useMemo)(()=>({filterState:C,dispatch:E,refreshFiltersData:s}),[C,s]);return(0,I.jsx)(A,{value:D,children:t})}},739428(e,t,a){a.d(t,{c:()=>l});let l={APPLIED:"applied",CLEARED:"cleared",MODIFIED:"modified",SUBMITTED:"submitted",FAILED:"failed"}},607126(e,t,a){a.d(t,{A:()=>u});var l=a(836664),n=a(874929),i=a(406218),r=a(62963),o=a(5302),s=a(307079),d=a(106301);function u(){let{brands:e,colors:t,domains:a,onSale:u,priceMax:c,priceMin:p}=(0,d.u)(),m=(0,n.bn)(),{cachedProductFilterOneBarModules:h}=(0,l.x)(),_=Number((0,s.A)().filter_location);if(1===_){let{filterState:e}=m||{};return e?(0,i.Iz)(e.appliedFilters,e.models):null}if(0===_){let l=(0,r.A)(o.A,!0)(h.map(e=>e.action?.filter).filter(Boolean));return(0,i.th)({brandsParam:e,colorsParam:t,domainsParam:a,onSaleParam:u,priceMaxParam:c,priceMinParam:p,unifiedFilterModels:l})}return null}},406218(e,t,a){a.d(t,{$M:()=>m,A:()=>S,BP:()=>s,CX:()=>k,Iz:()=>b,Oj:()=>h,ST:()=>f,Sp:()=>d,TN:()=>c,Vr:()=>A,b_:()=>y,ch:()=>v,i2:()=>u,oA:()=>p,th:()=>g,vd:()=>I});var l=a(33658),n=a(224723);let i=e=>e.map(({filter_component_type:e,filter_options:t,title:a})=>({filter_component_type:e,filter_options:t?.map(({id:e,label:t,count:a,image_url:l,is_verified:n,numeric_value:i,string_value:r,unit:o})=>({id:e,label:t,count:a,image_url:l,is_verified:n,numeric_value:i,string_value:r,unit:o})),title:a})),r=(e,t)=>{if(!e&&!t)return!1;if(!e||!t)return!0;if("single"===e.type&&"single"===t.type)return e.selectedOptionId!==t.selectedOptionId;if("multi"===e.type&&"multi"===t.type)return!(0,l.Ay)(e.selectedOptionIds,t.selectedOptionIds);if("range"===e.type&&"range"===t.type)return e.min!==t.min||e.max!==t.max;throw Error("Filter type specific return must be specified")},o=e=>!e||!Object.keys(e).length,s=(e,t)=>{if(o(e)&&o(t))return!1;if(o(e)||o(t)||e&&t&&Object.entries(e).length!==Object.entries(t).length)return!0;for(let a in e)if(r(e[a],t?.[a]))return!0;return!1},d=(e,t)=>!(0,l.Ay)(i(e),i(t)),u=(e,t)=>{if("single"===e.type)return!e.selectedOptionId;if("multi"===e.type)return 0===e.selectedOptionIds.size;if("range"===e.type)return!!t?.filter_options&&e.min===t.filter_options[0]?.numeric_value&&e.max===t.filter_options[2]?.numeric_value;throw Error("Filter type specific return must be specified")},c=(e,t)=>{try{for(let a in e){let l=e[a],n=t.find(e=>e.id===l?.id);if(l&&!u(l,n))return!1}return!0}catch(e){return!0}},p=(e,t)=>{if(!t||0===t.length)return!1;let a=t[0];if(!a)return!1;switch(a?.filter_component_type){case 2:let l=a.filter_options?.[0];for(let t in e){let a=e[t];if(!a)break;if("selectedOptionId"in a&&a.selectedOptionId===l?.id)return!0}return!1;case 1:for(let t in e){let l=e[t];if(!l)break;if(l.id===a.id&&"selectedOptionIds"in l&&0===l.selectedOptionIds.size)return!0}return!1;default:return!1}},m=e=>e.map(e=>{switch(e.filter_component_type){case 2:let t=e.filter_options?.find(e=>e.is_selected)?.id;return t?{selectedOptionId:t,id:e.id,type:"single"}:null;case 1:let a=e.filter_options?.filter(e=>e.is_selected).map(({id:e})=>e);return a&&a.length>0?{selectedOptionIds:new Set(a),id:e.id,type:"multi"}:null;default:return null}}).reduce((e,t)=>t?{...e,[t.id]:t}:e,{}),h=e=>{if(!e||0===e.length)return{};let t=e[0];switch(t?.filter_component_type){case 2:let a=t.filter_options?.[0]?.id;return a&&"string"==typeof t.id?{[t.id]:{selectedOptionId:a,lastChangedLocation:1,id:t.id,type:"single"}}:{};case 1:return"string"==typeof t.id?{[t.id]:{selectedOptionIds:new Set,lastChangedLocation:1,id:t.id,type:"multi"}}:{};default:return{}}},_=e=>e.map(e=>{let{filter_id:t,filter_options:a,product_filter_type:l}=e,n=t;return"number"==typeof l&&(n+=`_${l}`),a.length>0&&(n+=":",a.forEach((e,t)=>{let{filter_option_id:l,numeric_value:i,string_value:r,unit:o}=e;n+=`${l}`,"number"==typeof i&&(n+=`_${i}`),"string"==typeof r&&(n+=`_${r}`),"string"==typeof o&&(n+=`_${o}`),t<a.length-1&&(n+=",")})),n}).join("|"),f=({brands:e,colors:t,domains:a,onSale:l,priceMax:i,priceMin:r,scope:o,unifiedFilterModels:s})=>{let d={};for(let{filter_options:u,id:c,product_filter_type:p}of s)if(c&&u?.length){if(1===p&&("number"==typeof r||"number"==typeof i)){let[e,t,a,l]=u,n=r??a?.numeric_value??e?.numeric_value??0,o=i??l?.numeric_value??t?.numeric_value??100;d[c]={min:n,max:o,id:c,type:"range",lastChangedLocation:1}}if(0===p&&a&&a.length>0){let e=a.map(e=>{let t=u.find(({string_value:t})=>t===e);return t?t.id:null}).filter(Boolean);e.length>0&&(d[c]={id:c,lastChangedLocation:1,selectedOptionIds:new Set(e),type:"multi"})}if(3===p&&e&&e.length>0){let t=e.map(e=>{let t=u.find(({string_value:t})=>t===e);return t?t.id:null}).filter(Boolean);t.length>0&&(d[c]={id:c,lastChangedLocation:1,selectedOptionIds:new Set(t),type:"multi"})}if(6===p&&t&&t.length>0){let e=t.map(e=>{let t=u.find(({string_value:t})=>t===e);return t?t.id:null}).filter(Boolean);e.length>0&&(d[c]={id:c,lastChangedLocation:1,selectedOptionIds:new Set(e),type:"multi"})}if(4===p&&o){let e=(0,n.Ef)(o),t=u.find(({search_type:t})=>t===e);t?.id&&(d[c]={id:c,lastChangedLocation:1,selectedOptionId:t.id,type:"single"})}if("number"==typeof p&&new Set([7,8,9]).has(p)&&l){let e=u[0]?.id;e&&(d[c]={id:c,lastChangedLocation:1,selectedOptionId:e,type:"single"})}}return d},g=({brandsParam:e,colorsParam:t,domainsParam:a,onSaleParam:l,priceMaxParam:n,priceMinParam:i,unifiedFilterModels:r})=>{let o=[],s=Number(i),d=Number(n),u=Number.isNaN(s)?void 0:s,c=Number.isNaN(d)?void 0:d,p=a?.split(",").filter(Boolean)??[],m=e?.split(",").filter(Boolean)??[],h=t?.split(",").filter(Boolean)??[];for(let{filter_options:e,id:t,product_filter_type:a}of r)if(t&&e?.length){if(1===a&&"number"==typeof u&&"number"==typeof c){let l={filter_id:t,filter_options:e.slice(0,2).filter(e=>void 0!==e.id).map((e,t)=>({filter_option_id:e.id,numeric_value:0===t?u:c,unit:e.unit||"USD"})),location:0,product_filter_type:a};o.push(l)}if(0===a&&p&&p.length>0){let l=p.map(t=>{let a=e.find(e=>e.string_value===t);return a?a.id:null}).filter(Boolean);if(l.length>0){let e={filter_id:t,filter_options:l.map(e=>({filter_option_id:e,string_value:e})),location:0,product_filter_type:a};o.push(e)}}if(3===a&&m&&m.length>0){let l=m.map(t=>{let a=e.find(e=>e.string_value===t);return a?a.id:null}).filter(Boolean);if(l.length>0){let e={filter_id:t,filter_options:l.map(e=>({filter_option_id:e,string_value:e})),location:0,product_filter_type:a};o.push(e)}}if(6===a&&h&&h.length>0){let l=h.map(t=>{let a=e.find(e=>e.string_value?.toLowerCase()===t.toLowerCase());return a?a.id:null}).filter(Boolean);if(l.length>0){let e={filter_id:t,filter_options:l.map(e=>({filter_option_id:e,string_value:e})),location:0,product_filter_type:a};o.push(e)}}if(7===a&&l){let n=e[0]?.id;if(n){let e={filter_id:t,filter_options:[{filter_option_id:n,numeric_value:Number(l)}],location:0,product_filter_type:a};o.push(e)}}}return 0===o.length?null:_(o)},y=({filterMap:e,isInWebHundredPercentProductLoadExp:t,models:a})=>{let l=null,i=null,r=!1,o=null,s=null,d=null,u=null,c=null;for(let p in e){let m=e[p];if(m){let e=a.find(e=>e.id===m.id);if(e)if("range"===m.type&&1===e.product_filter_type)d=m.min,s=m.max;else if("multi"===m.type&&0===e.product_filter_type){let t=e.filter_options?.filter(e=>m.selectedOptionIds.has(e.id||""));o=t?.map(e=>e.string_value).filter(Boolean)}else if("multi"===m.type&&3===e.product_filter_type){let t=e.filter_options?.filter(e=>m.selectedOptionIds.has(e.id||""));l=t?.map(e=>e.string_value).filter(Boolean)}else if("multi"===m.type&&6===e.product_filter_type){let t=e.filter_options?.filter(e=>m.selectedOptionIds.has(e.id||""));i=t?.map(e=>e.string_value).filter(Boolean)}else if("single"===m.type&&4===e.product_filter_type){let a=e.filter_options?.find(e=>m.selectedOptionId===e.id),l=a&&void 0!==a.search_type?(0,n.UQ)(a.search_type):n.cO.PINS;c=l,t&&(c=l===n.cO.PINS_BUYABLE?n.cO.PINS:l,r=l===n.cO.PINS_BUYABLE)}else"single"===m.type&&7===e.product_filter_type&&(u=e.filter_options?.[0]?.numeric_value)}}let p=a.find(e=>4===e.product_filter_type),m=p?.filter_options?.find(e=>e.is_selected);return null===c&&"number"==typeof m?.search_type&&(c=(0,n.UQ)(m.search_type)),{brands:l,colors:i,commerce_only:r,domains:o,max:s,min:d,on_sale:u,scope:c}},b=(e,t)=>{let a=[];return(Object.entries(e).forEach(([e,l])=>{let n=t.find(e=>e.id===l.id);if(!n||4===n.product_filter_type||"number"!=typeof n.product_filter_type||!n.filter_options)return;let i=[];if("range"===l.type){let[e,t]=n.filter_options;if(!e?.id||!t?.id)return;i=[{filter_option_id:e.id,numeric_value:l.min,unit:e.unit},{filter_option_id:t.id,numeric_value:l.max,unit:t.unit}]}if("single"===l.type){let e=n.filter_options.find(e=>e.id===l.selectedOptionId);if(!e?.id)return;i=[{filter_option_id:e.id,numeric_value:e.numeric_value,string_value:e.string_value}]}if("multi"===l.type){let e=n.filter_options.filter(e=>e.id&&l.selectedOptionIds.has(e.id));if(0===e.length)return;i=e.filter(e=>void 0!==e.id).map(e=>({filter_option_id:e.id,numeric_value:e.numeric_value,string_value:e.string_value}))}a.push({filter_id:e,filter_options:i,location:l.lastChangedLocation,product_filter_type:n.product_filter_type})}),a&&0!==a.length)?_(a):null},v=e=>{let t,{filter:a,title:l}=e.action||{},{title:n}=a||{},i=l||n;if(!a||!i)return null;let{filterComponentType:r,productFilterType:o,id:s}=a,d=(a.filterOptions||[]).filter(Boolean);if(void 0===r||void 0===d||0===d.length||null==o||null==s)return null;let u=(t=d.map(e=>{if(!e)return null;let{auxData:t,id:a,imageUrl:l,isVerified:n,label:i,numericValue:r,searchType:o,stringValue:s,unit:d,rules:u}=e;return null===l||null===l||null===r||null===n||null===s||null===d?null:{id:a||"",label:i||"",count:0,image_url:l,is_verified:n,numeric_value:r,...u?{rules:[...u]}:{},..."number"==typeof o?{search_type:o}:{},string_value:s,unit:d,..."string"==typeof t?.moduleId?{aux_data:{module_id:t.moduleId}}:{}}}).filter(Boolean)).length>0?t:null;return u?{filter_component_type:r,filter_options:[...u],id:s||"",product_filter_type:o,title:i}:null};function S(e,t,a){let[l,n,i,r]=a,{numeric_value:o=0}=r??l??{},{numeric_value:s=o+50}=i??n??{},{unit:d="USD"}=l??{},u=e.filters[t]?.type==="range"?e.filters[t]:{min:o,max:s,id:t,type:"range",lastChangedLocation:1};return{defaultMax:s,defaultMin:o,unit:d,range:u}}function I(e){return"multi"!==e.type?e:{...e,selectedOptionIds:new Set}}function A(e,t){let a=[];return Object.entries(t).forEach(([t,l])=>{let n=e.find(e=>e?.id===t);if(n){let e=n.aux_data?.module_id;e&&a.push(e);let t=("multi"===l.type?Array.from(l.selectedOptionIds):"single"===l.type?[l.selectedOptionId]:[]).map(e=>{let t=n.filter_options?.find(t=>t.id===e);return t?.aux_data?.module_id||""}).filter(Boolean);a.push(...t)}}),a}function k(e,t){let a=[];return Object.keys(t).forEach(t=>{let l=e.find(e=>e?.id===t);if(l){let e=l.product_filter_type;e&&a.push(e)}}),a}},406230(e,t,a){a.d(t,{AQ:()=>S,Ak:()=>P,F0:()=>h,Hs:()=>g,Kc:()=>I,Ln:()=>p,QI:()=>u,Up:()=>f,Yr:()=>k,_S:()=>b,kB:()=>c,mi:()=>_,oM:()=>v,wq:()=>m,zN:()=>y});var l=a(438083),n=a(349330),i=a(645858),r=a(286919),o=a(542975),s=a(291435),d=a(81920);let u=e=>e._('Make sure this age is accurate. Your birthdate is required for personalization, community safety and as part of our terms of service. For business accounts, use your own birthdate.', 'birthdateConfirmation.HelperText', 'Helper text notifying users to input their own birthday'),c=e=>e._('Use your own birthday, even if this a business account', 'birthdateConfirmation.HelperText.ownBirthday', 'Helper text notifying users to input their own birthday'),p=e=>e._('Oops! Please use a valid age to sign up.', 'existingUser.birthdaycollection.error.overage', 'Error message shown when overage (age over 120) user tries to register'),m=(e,t)=>{let{locale:a}=t.getLocaleData(),l=(0,r.A)(e),n=l.toLocaleString(a,{month:"long"}),i=l.getDate().toString(),s=l.getFullYear();return(0,o.vQ)(t._('Is {{month}} {{day}}, {{year}} your birthday?', 'birthdateConfirmation.heading', 'Header for the confirmation model verifying the age for the birthdate that the user inputted, month: month inputted into the fields, day: day inputted into the fields, year: year inputted into the fields'),{month:n,day:i,year:s})},h=(e,t,a,l,n=!1)=>{let i=(0,o.vQ)(n?e._('Oops! Please enter a valid {{dayError}}{{monthError}}{{yearError}}.', 'settings birthday error message', 'label for settings birthday error message. dayError: Incorrect day. monthError: Incorrect month. yearError: Incorrect year.'):e._('Oops! Please enter a valid {{dayError}}{{monthError}}{{yearError}} to sign up.', 'signup birthday error message', 'label for sign up birthday error message'),{dayError:t?e._('day', 'dayError keyword placeholder', 'label for dayError keyword place holder'):"",monthError:a?e._('month', 'monthError keyword placeholder', 'label for monthError keyword place holder'):"",yearError:l?e._('year', 'monthError keyword placeholder', 'label for monthError keyword place holder'):""}).filter(e=>0!==e.length);return 3===i.length?i.join(""):i[0]+i.slice(1,-1).join(", ")+i[i.length-1]},_=({country:e})=>e&&e in s.w?s.w[e]:13,f=(e,t)=>{let a=new Date,l=new Date(a.getFullYear()-t,a.getMonth(),a.getDate());return new Date(e)<=l},g=new Date().getFullYear(),y=new Date().getFullYear()-120,b=12,v=1,S=1,I=31,A="yyyy-MM-dd",k=e=>{let t=new Date,a=new Date(y,t.getMonth(),t.getDate()),l=f(e,5),n=new Date(e)>a;return l&&n};function P(e){let t=(0,l.A)(e,A,new Date);if((0,n.A)(t))return e;let a=new Date(e);try{return(0,i.A)(a,A)}catch{return(0,d.GV)("webapp.birthday_validation_error",{sampleRate:1,tags:{birthdate:e}}),e}}},286919(e,t,a){a.d(t,{A:()=>l});let l=e=>{let t=new Date(e);return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate())}},500544(e,t,a){a.d(t,{A:()=>i});var l=a(859471),n=a(124674);function i({allowSearchOnMount:e,children:t,onTypeaheadSuggestionsChange:a,resourceName:i,resourceOptions:r,value:o}){let s=(0,n.A)({allowSearchOnMount:e,resourceName:i,resourceOptions:r,value:o});return(0,l.useEffect)(()=>{s?.length&&a(s)},[s]),t||null}},124674(e,t,a){a.d(t,{A:()=>o});var l=a(859471);function n(e,t,a){var l;return(t="symbol"==typeof(l=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var l=a.call(e,t||"default");if("object"!=typeof l)return l;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?l:l+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let i=class{constructor(e){n(this,"_uidToData",{}),n(this,"_numItems",0),n(this,"_firstData",null),n(this,"_lastData",null),this._maxNumItems=e??10}set(e,t){let a=this._uidToData[e];a||(a={uid:e,item:t,next:null,prev:null},this._uidToData[e]=a,this._numItems+=1),this._moveToFront(a),this._numItems>this._maxNumItems&&this._evict()}get(e){let t=this._uidToData[e];return t?(this._moveToFront(t),t.item):null}remove(e){let t=this._uidToData[e];t&&(delete this._uidToData[e],this._firstData===t&&(this._firstData=t.next),this._lastData===t&&(this._lastData=t.prev),t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),this._numItems-=1)}_moveToFront(e){this._firstData!==e&&(this._firstData?(this._lastData===e&&(this._lastData=e.prev),e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),this._firstData.prev=e,e.next=this._firstData,e.prev=null,this._firstData=e):(this._firstData=e,this._lastData=e))}_evict(){this._lastData&&(delete this._uidToData[this._lastData.uid],this._firstData===this._lastData?(this._firstData=null,this._lastData=null):(this._lastData=this._lastData.prev,this._lastData&&(this._lastData.next=null)),this._numItems-=1)}};var r=a(652567);function o({allowSearchOnMount:e=!1,resourceName:t,resourceOptions:a={},value:n}){let o=(0,l.useRef)(!1),s=(0,l.useRef)({}),[d,u]=(0,l.useState)([]),c=function({resourceName:e,resourceOptions:t}){let a=(0,r.Kw)(),n=(0,l.useRef)(void 0);return n.current||(n.current=function({resourceCreator:e,resourceName:t,resourceOptions:a}){let l=e(t,{...a,count:"count"in a?a.count:5}),n=new i,r=()=>{l.abort()},o=async(e,t)=>{if(l.isCalling()){let a=l.options?.term,n=l.options?.pin_scope;if(e===a&&t===n)return;r()}let{bookmarks:a,...i}=l.options||{};l.options={...i,term:e,pin_scope:t};let{data:o}=(await l.callGet({showError:!1})).resource_response,s=o?.items,d=o?.hint||{};return n.set(`${t}-${e}`,{hint:d,items:s}),{term:e,items:s,hint:d}};return async function(e,t){let a=n.get(`${t}-${e}`);if(a){let{items:t}=a;if(t&&t.length){r();let{hint:l}=a;return{hint:l,items:t,term:e}}}return e.length>=0?o(e,t):{hint:{},items:[],term:e}}}({resourceCreator:a,resourceName:e,resourceOptions:t})),n.current}({resourceName:t,resourceOptions:a}),p=a.pin_scope||"pins",m=`${p}-${n}`;return(0,l.useEffect)(()=>{(async()=>{if(null!=n&&""!==n&&(e||o.current))if(m in s.current)u(s.current[m]);else try{let e=await c(n,p);if(e){let{items:t}=e;s.current[m]=t,u(t)}}catch(e){if("Resource call aborted"===e)return;throw e}o.current||(o.current=!0)})()},[n,p,m]),d}},813985(e,t,a){a.d(t,{n1:()=>s,hr:()=>o});var l=a(598948),n=a(636032),i=a(890922),r=a(998556);function o({searchParams:e,sourceUrl:t,isDesktop:a,isAuthenticated:l,appliedUnifiedFilters:n}){let{autoCorrectionDisabled:i,bubbleId:r,category:o,currentlyAppliedFiltersParamTerm:s,domains:u,guidedSearchQuery:c,inGlobalSearch:p,journeyDepth:m,personalizationPinSig:h,priceMax:_,priceMin:f,query:g,queryImagePins:y,requestParams:b,rs:v,scope:S,selectedOneBarModules:I,sourceId:A,sourceModuleId:k,topPinIds:P,user:x}=e;return function(e){let{selectedOneBarModules:t,currentlyAppliedFiltersParamTerm:a,personalizationPinSig:l,inGlobalSearch:n,appliedUnifiedFilters:i,initialCategory:r,initialDomains:o,initialMaxPrice:s,initialMinPrice:u,isDuplo:c,...p}=e,m=t?.split(","),h={...p,filters:a,selectedOneBarModules:m,selectedPinImgSig:l};if(n)return d(h);let _={...h,appliedUnifiedFilters:i,appliedProductFilters:function({category:e,domains:t,maxPrice:a,minPrice:l}){return[e,t,a,l].map(e=>e??"").join("-")}({category:r,domains:o,maxPrice:s,minPrice:u})};return c&&(_.domains=o,_.priceMax=s?parseInt(s,10):void 0,_.priceMin=u?parseInt(u,10):void 0),d(_)}({appliedUnifiedFilters:n,autoCorrectionDisabled:i,bubbleId:r,currentlyAppliedFiltersParamTerm:s,guidedSearchQuery:c,inGlobalSearch:p,initialCategory:o,initialDomains:u,initialMaxPrice:_,initialMinPrice:f,isDuplo:!l||!a,journeyDepth:m,personalizationPinSig:h,query:g,queryImagePins:y,requestParams:b,rs:v,scope:S,selectedOneBarModules:I,sourceId:A,sourceModuleId:k,sourceUrl:t,topPinIds:P,user:x})}function s({appliedProductFilters:e,applied_unified_filters:t,auto_correction_disabled:a,filters:l,journey_depth:n,query:i,rs:r,scope:o,selected_one_bar_modules:s,query_image_pins:d,query_pin_sigs:u,source_id:c,source_module_id:p,top_pin_ids:m,user:h}){let _=[e,l,n,i,r,o,s,d,u,c,p,t,m,h].map(e=>e??"").join(":");return a?"auto-correction-disabled:"+_:_}function d(e){return{name:"BaseSearchResource",options:(e=>{let{query:t="",scope:a="pins",appliedUnifiedFilters:o=null,appliedProductFilters:s=null,filters:d=null,domains:u=null,priceMax:c=null,priceMin:p=null,rs:m=i.I.DIRECT_NAVIGATION,journeyDepth:h=null,sourceId:_=null,sourceModuleId:f=null,sourceUrl:g=null,selectedOneBarModules:y=null,selectedPinImgSig:b=null,user:v=null,autoCorrectionDisabled:S=!1,seoDrawerEnabled:I=!1,bubbleId:A=null,pageSize:k=null,queryImagePins:P=null,requestParams:x=null,topPinIds:w=null}=e,C="u">typeof window?(0,r.y1)().getItem("pwt_performance_testing"):null,E=g&&g.includes("pwt_performance_testing"),T=!!(!0===C||"true"===C||E);return{query:t,scope:a,appliedProductFilters:s,domains:u,user:v,seoDrawerEnabled:I,applied_unified_filters:o,auto_correction_disabled:S,journey_depth:h,source_id:_,source_module_id:f,source_url:function(e){if(!e)return"";let t=new Set,a=e.split("?")[1];a&&a.split("&").forEach(e=>{e.includes("=")||t.add(e)});let{directory:i,queryKey:r}=(0,l.A)((0,n.A)(e,["request_params"])),o=Object.keys(r).sort().map(e=>t.has(e)?e:`${e}=${r[e]}`).join("&");return o?`${i}?${o}`:i}(g),static_feed:T,selected_one_bar_modules:y,query_pin_sigs:b,page_size:k,price_max:c,price_min:p,query_image_pins:P,request_params:x,top_pin_ids:w,article:A,corpus:b?"personalize":null,customized_rerank_type:b?"manas_graph_sage_only_wand_rewrite":null,filters:d,rs:m,redux_normalize_feed:!0}})({...e,autoCorrectionDisabled:!!e.autoCorrectionDisabled})}}},912581(e,t,a){a.d(t,{A:()=>n});let l=/^[\w.!#$%&'*+\-\/=?\^`{|}~]+@[a-z\d\-]+(\.[a-z\d\-]+)+$/i,n=e=>l.test(e)},5302(e,t,a){a.d(t,{A:()=>l});function l(e,t){let a=t?.separateNumbers?/([A-Z]|\d)/g:/([A-Z])/g;return e.replace(a,(e,t)=>"_"+t.toLowerCase())}},60583(e,t,a){a.d(t,{A:()=>n});let l=/^(?:https?:\/\/)?([^\s\/?#."]+\.)+([^\s\/?#."]+)(\/[^\s?#]*)?(#[^\s]*)?(\?[^"]*)?$/;function n(e,t){return!!e&&l.test(e)&&(e.startsWith("http://")||e.startsWith("https://")||!!t?.protocolIsOptional)}},734696(e,t,a){a.d(t,{$P:()=>A,A3:()=>b,Cd:()=>w,Ji:()=>S,Kg:()=>_,Mx:()=>h,ND:()=>I,Ps:()=>d,QM:()=>y,RU:()=>g,SX:()=>u,X1:()=>E,Xw:()=>s,Yl:()=>x,Yy:()=>p,fb:()=>C,gX:()=>k,go:()=>m,k:()=>f,mg:()=>o,oF:()=>v,oX:()=>c,ps:()=>P});var l=a(406230);a(598948);var n=a(60583);let i={January:31,February:29,March:31,April:30,May:31,June:30,July:31,August:31,September:30,October:31,November:30,December:31},r=e=>{let t={"０":"0","１":"1","２":"2","３":"3","４":"4","５":"5","６":"6","７":"7","８":"8","９":"9","　":" "},a=String(e).split("");return a.forEach((e,l)=>{let n=t[e];n&&(a[l]=n)}),a.join("")};function o(e){return(t,a)=>{let l=[];t&&/\S/.test(t)||l.push(e.message);let n={errors:l,warnings:[]};return a&&a(n),n}}let s=RegExp("(^[-!#$%&'*+/=?^_`{}|~0-9A-Z]+(\\.[-!#$%&'*+/=?^_`{}|~0-9A-Z]+)*|^\"([\\001-\\010\\013\\014\\016-\\037!#-\\[\\]-\\177]|\\\\[\\001-\\011\\013\\014\\016-\\177])*\")@((?:[A-Z0-9](?:[A-Z0-9-]{0,61}[A-Z0-9])?\\.)+[A-Z]{2,20}$)|\\[(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)(\\.(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)){3}\\]$","i");function d(e){return(t,a)=>{t=t&&t.trim();let l=[];t.match(s)||l.push(e.message);let n={errors:l,warnings:[]};return a&&a(n),n}}function u(e){return(t,a)=>{t=t&&t.trim();let l=[];t.match(/^[^0-9].*$/)||l.push(e.message);let n={errors:l,warnings:[]};return a&&a(n),n}}function c(e){return(t,a)=>{let l=[];if(t){let a=parseInt(t,10);Number.isNaN(a)?l.push(e.invalidAgeString):(e.ageTooShortString&&a<10&&l.push(e.ageTooShortString),a<=0||a>120?l.push(e.invalidAgeString):e.checkUnderAgeWithString&&a<18&&l.push(e.checkUnderAgeWithString))}let n={errors:l,warnings:[]};return a&&a(n),n}}function p(e){return(t,a)=>{let l=[],[n,r]=t.split(" ");if(n)if(n.match(/^[0-9]+$/)){let t=parseInt(n,10);(Number.isNaN(t)||t>31||t>i[r])&&l.push(e.invaliddobDateString)}else l.push(e.invaliddobDateString);let o={errors:l,warnings:[]};return a&&a(o),o}}function m(e){return(t,a)=>{let l=(t=t&&t.trim()).replace(/[\(\)\+\-\. ]/g,""),n=[],i=!1!==e.checkLength&&l.length<7;t&&(!t.match(/^(\(?\+?[0-9]*\)?)?[0-9_\- \.\(\)]*$/g)||i)&&n.push(e.message);let r={errors:n,warnings:[]};return a&&a(r),r}}function h(e){return(t,a)=>{let l=[];"number"==typeof t||"string"==typeof t&&(t=r(t=t&&t.trim()))&&!t.match(/^\d+$/)&&l.push(e.message);let n={errors:l,warnings:[]};return a&&a(n),n}}function _(e){return(t,a)=>{let l=[];"number"==typeof t||"string"==typeof t&&(t=r(t=t&&t.trim()))&&!t.match(/^[\d\ -]+$/)&&l.push(e.message);let n={errors:l,warnings:[]};return a&&a(n),n}}function f({message:e}){return(t,a)=>{let l=[];t&&!(0,n.A)(t,{protocolIsOptional:!0})&&l.push(e);let i={errors:l,warnings:[]};return a&&a(i),i}}function g(e){return(t,a)=>{let l=e.should_trim||!1,n=[];l&&(t=t&&t.trim());let i=t.length;"min"in e&&e.min>0&&i<e.min?n.push(e.minErrorString):"max"in e&&e.max>0&&i>e.max&&n.push(e.maxErrorString);let r={errors:n,warnings:[]};return a&&a(r),r}}function y(e){return(t,a)=>{let l=e&&e.targetValue,n=[];t!==l&&n.push(e.message);let i={errors:n,warnings:[]};return a&&a(i),i}}function b(e){return(t,a)=>{let l=new Date(t),n=[];e.date instanceof Date&&l instanceof Date&&e.date<l&&n.push(e.message);let i={errors:n,warnings:[]};return a&&a(i),i}}function v(e){return(t,a)=>{let n=new Date(t),i=e.date instanceof Date&&n instanceof Date,r=[];(i&&e.date<n||!(0,l.Yr)(t))&&r.push(e.message);let o={errors:r,warnings:[]};return a&&a(o),o}}function S(e){return(t,a)=>{let l=[];/^[\x20-\x7E]*$/.test(t)||l.push(e.message);let n={errors:l,warnings:[]};return a&&a(n),n}}function I(e){return(t,a)=>{let l=2;if(e.hasFractionalCents)l=3;else if(e.currencyCode){let{maximumFractionDigits:t}=new Intl.NumberFormat(void 0,{style:"currency",currency:e.currencyCode}).resolvedOptions();l=t}let n=new RegExp(l?`^\\d*(\\.\\d{1,${l}})?$`:"^\\d*$"),i=[];t&&!t.match(n)&&(t=t&&t.trim(),i.push(e.message));let r={errors:i,warnings:[]};return a&&a(r),r}}function A(e){return(t,a)=>{t=t&&t.trim();let l=[],n=new Date(t);t&&!n.getTime()&&l.push(e.message);let i={errors:l,warnings:[]};return a&&a(i),i}}function k(e){return(t,a)=>{let l=t&&t.trim(),n=[];l&&!l.match(/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/)&&n.push(e.message);let i={errors:n,warnings:[]};return a&&a(i),i}}function P(e){return(t,a)=>{let l=[];e.pattern.test(t)||l.push(e.message);let n={errors:l,warnings:[]};return a&&a(n),n}}function x(e,t){return[].concat(...e.map(e=>e(t).errors))}async function w(e,t){return[].concat(...await Promise.all(e.map(async e=>{let a=e(t);return a instanceof Promise?(await a)(t).errors:a.errors})))}function C(e,t){let a="";return t.some(t=>{let l=t(e);return l.errors.length>0&&(a=l.errors[0],!0)}),a}async function E(e,t){let a="";for(let l of t){let t=l(e);if(t instanceof Promise){let l=(await t)(e);if(l.errors.length>0){a=l.errors[0];break}}else if(t.errors.length>0){a=t.errors[0];break}}return a}},889416(e,t,a){a.r(t),a.d(t,{default:()=>u});var l=a(61163),n=a(859471),i=a(19821),r=a(538329),o=a(911346),s=a(755782),d=a(562615);function u(e){(0,n.useEffect)(()=>{(0,l.A)("PinRepEditButton","/app/www/AuthDesktopPinRep/components/PinRepEditButton.tsx")},[]);let t=(0,r.A)(),{clientTrackingParams:a,style:u,useLegoStyles:c=!1,usePersistentOneClickSaveStyles:p,wrappingIconStyle:m,shouldUseLegoStyles:h,carouselSlotCurrentIndex:_,component:f,onDelete:g,onSubmit:y,onToggleModal:b,pinId:v,surface:S}=e,[I,A]=(0,n.useState)(!1),{onClick:k,carouselSlotCurrentIndex:P}=(0,s.A)({carouselSlotCurrentIndexProp:_,component:f,pinId:v,setShowEditModal:A}),x=t._('Pin Saved', 'PinRepEditButton.SavedButtonLabel', 'saved button label on pin'),w=(0,d.jsxs)(n.Fragment,{children:[(0,d.jsx)(i.K0,{accessibilityLabel:t._('Edit', 'edit button on pin', 'edit button on pin'),bgColor:u&&u.bgColor||"default",icon:"pencil",iconColor:u&&u.iconColor||"default",onClick:k,size:u&&u.size||"md"}),I&&v&&(0,d.jsx)(o.A,{carouselSlotCurrentIndex:P,clientTrackingParams:a,onDelete:g,onHide:()=>{A(!1),b?.(!1)},onSubmit:y,pinId:v})]});return h?(0,d.jsx)(i.PF,{accessibilityLabel:x,color:"primary",dataTestId:"saved-button",onClick:g,selected:!0,size:"VideoCarouselModule"===S?"sm":"lg",text:t._('Saved', 'PinRepEditButton.SavedButton', 'saved button on pin')}):c||p?(0,d.jsx)("div",{"data-test-id":"use-lego-styles-div",style:{...m||{}},children:w}):w}},291435(e,t,a){a.d(t,{t:()=>l,w:()=>n});let l={AT:14,BE:13,BG:14,HR:16,CY:14,CZ:15,DK:13,EE:14,FI:13,FR:15,DE:16,GR:15,HU:16,IE:16,IT:14,LV:13,LT:14,LU:16,MT:13,NL:16,PL:16,PT:13,RO:16,SK:16,SI:15,ES:14,SE:13,GB:13},n={...l,KR:14}},172150(e,t,a){a.d(t,{A:()=>c});var l=a(61163),n=a(859471),i=a(19821),r=a(989457),o=a(693154),s=a(538329),d=a(562615);function u({collaborator:e,isSelected:t,onToggle:a}){(0,n.useEffect)(()=>{(0,l.A)("CollaboratorItem","/app/www/BoardCreate/AddCollaborators/CollaboratorItem.tsx")},[]);let u=(0,s.A)(),c=(0,o.A)(),p=c.isAuth?c?.avatar_color_index:void 0;return(0,d.jsxs)(i.so,{children:[(0,d.jsxs)(i.so,{flex:"grow",children:["email"===e.type||"email_share_suggestion"===e.type?(0,d.jsx)(i.az,{alignItems:"center",color:"secondary",display:"flex",flex:"none",height:48,justifyContent:"center",marginEnd:3,rounding:"circle",width:48,children:(0,d.jsx)(i.In,{accessibilityLabel:u._('Email icon', 'Email icon on board create modal', 'boardCreate.emailIcon'),color:"default",icon:"envelope",size:24})}):(0,d.jsx)(i.az,{display:"flex",flex:"none",height:48,marginEnd:3,width:48,children:(0,d.jsx)(r.eu,{color:p,name:e.full_name||"",size:"fit",src:e.image_medium_url||e.image_large_url})}),"email"===e.type||"email_share_suggestion"===e.type?(0,d.jsx)(i.so,{alignItems:"center",children:(0,d.jsx)(i.az,{children:(0,d.jsx)(i.KJ,{size:"300",children:e.id})})}):(0,d.jsxs)(i.so,{direction:"column",justifyContent:"center",children:[(0,d.jsx)(i.az,{marginBottom:1,tabIndex:0,children:(0,d.jsx)(i.KJ,{lineClamp:1,size:"300",children:e.full_name})}),(0,d.jsx)(i.az,{tabIndex:0,children:(0,d.jsx)(i.KJ,{size:"200",children:`@${e.username||""}`})})]})]}),(0,d.jsx)(i.so,{flex:"none",children:(0,d.jsx)(i.$n,{onClick:()=>a(e),selected:t,size:"lg",text:t?u._('Added', 'Text that lets the user know they have added the contact', 'boardCreate.addedContactButton'):u._('Add', 'Text that lets the user know they can add that contact', 'boardCreate.addContactButton')})})]})}function c({contacts:e,selectedContactIds:t,onCollaboratorToggle:a,itemPadding:r=2}){return(0,n.useEffect)(()=>{(0,l.A)("CollaboratorList","/app/www/BoardCreate/AddCollaborators/CollaboratorList.tsx")},[]),(0,d.jsx)(n.Fragment,{children:e.map(e=>(0,d.jsx)(i.az,{paddingY:r,children:(0,d.jsx)(u,{collaborator:e,isSelected:t.includes(e.id),onToggle:a})},e.id))})}},264986(e,t,a){a.d(t,{A:()=>c});var l=a(61163),n=a(859471),i=a(19821),r=a(743372),o=a(63661),s=a(538329),d=a(500544),u=a(562615);function c({searchValue:e,onSearchChange:t,onTypeaheadSuggestionsChange:a}){(0,n.useEffect)(()=>{(0,l.A)("CollaboratorSearch","/app/www/BoardCreate/AddCollaborators/CollaboratorSearch.tsx")},[]);let c=(0,s.A)(),p=(0,r.A)(),m=(0,n.useMemo)(()=>(0,o.A)(e=>{0!==e.length&&p({event_type:7383,view_type:5,view_parameter:3059,component:43,aux_data:{entered_query:e}})},3e3),[p]);return(0,u.jsx)(d.A,{onTypeaheadSuggestionsChange:a,resourceName:"ShareSuggestionsTypeaheadResource",value:e,children:(0,u.jsx)(i.Lw,{accessibilityLabel:c._('Search for collaborators by name or email', 'users can search for other people and add them as collaborators to a board', 'boardCreate.searchBar.accessibilityLabel'),id:"CollaboratorInviteSearchField",onChange:({value:e})=>{t({value:e}),m(e)},placeholder:c._('Search by name or email', 'text in search field to indicate that users could search for other users here', 'boadCreate.searchBar.placeHolder'),size:"lg",value:e})})}},801095(e,t,a){a.d(t,{A:()=>r});var l=a(859471),n=a(430705),i=a(912581);function r({selectedContacts:e,onSelectedContactsChange:t}){let{data:a}=(0,n.A)({name:"ShareSuggestionsResource",options:{field_set_key:"default",hide_group_conversations:!0},noCache:!0}),[r,o]=(0,l.useState)([]),[s,d]=(0,l.useState)("");(0,l.useEffect)(()=>{a&&o(a.map(e=>"email_share_suggestion"===e.type?{...e,id:e.email||""}:e))},[a]);let u=e.map(e=>e.id),c=[...e,(0,i.A)(s)&&!u.includes(s)?{id:s,type:"email"}:null,...r.filter(e=>!u.includes(e.id))].filter(Boolean);return{searchValue:s,allContacts:c,handleTextFieldChange:({value:e})=>{d(e)},handleTypeaheadSuggestionsChange:e=>{o(e)},handleCollaboratorClick:a=>{u.includes(a.id)?t?.((e||[]).filter(e=>e.id!==a.id)):t?.([...e,a])}}}},928802(e,t,a){a.d(t,{A:()=>o});var l=a(859471),n=a(296221),i=a(110037),r=a(828323);function o(e,t){let{completeExperience:a,dismissExperience:o,mountPlacement:s,unmountPlacement:d,viewExperience:u}=(0,r.Ay)(),{experienceForPlacement:c}=(0,i.A)(e),p=(0,l.useRef)(!1);(0,l.useEffect)(()=>(t&&s(e),()=>{d(e)}),[e,t,s,d]);let m=(0,n.V6)(c)?c.display_data?.suggested_board_name:void 0,h=(0,l.useEffectEvent)(()=>{u(e,c.experience_id)});return(0,l.useEffect)(()=>{m&&h()},[m]),{suggestedBoardName:m,completeExperience(){m&&!p.current&&(a(e,c.experience_id),p.current=!0)},dismissExperience(){m&&!p.current&&(o(e,c.experience_id),p.current=!0)}}}},679530(e,t,a){a.d(t,{D:()=>s,_:()=>o});var l=a(753771),n=a(284247),i=a(734696);let r=(e,t)=>(0,i.RU)({max:e,maxErrorString:(0,n.A)(t._('Please enter no more than {{ maxLength }} characters.', 'Validation error when a string is too long', 'Validation error when a string is too long'),{maxLength:e})}),o=e=>[r(l.A.MAX_CHARS_FOR_BOARD_PIN_DESCRIPTION,e)],s=e=>[(0,i.mg)({message:e._('Don\'t forget to name your board!', ' - ', ' -- ')}),r(l.A.MAX_CHARS_FOR_BOARD_TITLE,e)]},998317(e,t,a){a.d(t,{Ay:()=>u,fG:()=>c,z1:()=>d});var l,n=a(224989),i=a(224723),r=a(106301),o=a(762512);let s=(void 0!==l||(l=a(201563)).hash&&"547e5abdb645851996d6a1b1a4027c56"!==l.hash&&console.error("The definition of 'hasSensitivityNotices_sensitivity' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),l);function d(e){let{notices:t,advisory:a,severity:l}=(0,n.useFragment)(s,e)||{};return{hasNotices:!!(t?.[0]&&null!==t[0].title),advisory:a,severity:l}}function u(e){if(null==e)return{hasNotices:!1};let{advisory:t,severity:a}=e,l=!!e.notices&&e.notices.length>0;return e.notices&&e.notices.length>0&&e.notices[0]?.title===null&&(l=!1),{hasNotices:l,advisory:t,severity:a}}function c(e){let{scope:t}=(0,r.u)(),{data:a,isLoaded:l}=(0,o.A)(),n=d(e);if(t===i.cO.USERS)return n;if(!l||!a)return{hasNotices:!1};let{sensitivity:s}=a;return u(s)}},160451(e,t,a){a.d(t,{A:()=>l});let l=4},861955(e,t,a){a.r(t),a.d(t,{default:()=>eT,PinBetterSave:()=>eE});var l,n,i,r,o=a(61163),s=a(859471),d=a(106386);a(825193);var u=a(979638),c=a(19821),p=a(427471),m=a(243439),h=a(342256),_=a(340622),f=a(548566),g=a(706114),y=a(586733),b=a(162036),v=a(948641),S=a(588376),I=a(668014),A=a(457315),k=a(296221),P=a(171768),x=a(567176),w=a(693154),C=a(535273),E=a(662449),T=a(538329),F=a(542975),D=a(173832),B=a(601185),R=a(430705),j=a(998556),K=a(981147),L=a(706466),z=a(803489),O=a(935504),M=a(385336),N=a(678358),U=a(255889),V=a(160451),$=a(400235),H=a(31973),q=a(819515),J=a(562615);class W extends s.PureComponent{constructor(...e){var t,a,l;super(...e),t="handleClick",a=()=>{let{boardId:e,logContextEvent:t}=this.props;t({event_type:101,component:20,element:10805,object_id_str:e})},(t="symbol"==typeof(l=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var l=a.call(e,t||"default");if("object"!=typeof l)return l;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?l:l+"")in this?Object.defineProperty(this,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):this[t]=a}componentDidMount(){let{toastShown:e}=this.props;e()}render(){let{boardName:e,boardUrl:t,onHide:a}=this.props;return(0,J.jsx)(x.A,{duration:5e3,href:`${t}more_ideas/?ideas_referrer=16`,onClick:this.handleClick,onHide:a,text:(0,J.jsx)(c.KJ,{weight:"bold",children:(0,F.vQ)(this.props.i18n._('Find more ideas for {{ boardName }}', 'postRepinUpsellToast.findMoreIdeas.toast', 'Find more ideas for you board'),{boardName:e}).join("")})})}}function Y(e){(0,s.useEffect)(()=>{(0,o.A)("PostRepinUpsellToast","/app/www/common/PinBetterSave/PostRepinUpsellToast.tsx")},[]);let{logContextEvent:t}=(0,y.o)(),a=(0,T.A)(),l=(0,d.wA)();return(0,J.jsx)(W,{...e,i18n:a,logContextEvent:t,toastShown:()=>l((0,q.aC)(e.boardId))})}var G=a(201593),Q=a(989457),X=a(923142),Z=a(170052),ee=a(168079);let et=(0,s.lazy)(()=>Promise.all([a.e("96722"),a.e("74377"),a.e("13112")]).then(a.bind(a,301136)));function ea(e){(0,s.useEffect)(()=>{(0,o.A)("PostSavedPinBoardCollabUpsell","/app/www/common/PinBetterSave/PostSavedPinBoardCollabUpsell.tsx")},[]);let{board:t,hideToast:a}=e,l=(0,T.A)(),{isDarkMode:n}=(0,G.D2)(),i=(0,w.A)(),[r,d]=(0,s.useState)(!1),[u,p]=(0,s.useState)(!1),m=()=>{a()};(0,ee.A)(()=>{setTimeout(()=>p(!0),100)});let{marginTop:h,opacity:_,pointerEvents:f,transform:g,transition:y,visibility:b}=(0,X.A)({deviceType:"desktop",hiding:!1,visible:u}),v=t.name,S=(0,J.jsxs)(c.KJ,{children:[(0,J.jsxs)(c.KJ,{weight:"bold",children:[" ",(0,F.vQ)(l._('Invite people to your new board', 'postSavedPinBoardCreateCollabUpsell.title.1', 'Title to inform user that they have successfully saved a pin to their board'),{boardName:v})]}),(0,J.jsx)(c.KJ,{children:l._('Get ideas from your favorite people', 'postSavedPinBoardCollabUpsell.message', 'Message to upsell invite collaborator feature')})]}),I=i.isAuth&&i.firstName&&(0,J.jsxs)(c.az,{height:48,position:"relative",width:48,children:[(0,J.jsx)(c.az,{position:"absolute",children:(0,J.jsx)(Q.eu,{color:i.avatar_color_index,name:i.firstName,outline:!0,size:"sm",src:i.imageMediumUrl})}),(0,J.jsx)(c.az,{dangerouslySetInlineStyle:{__style:{left:"25%",top:"25%"}},position:"absolute",rounding:400,children:(0,J.jsx)(c.DR,{bgColor:"lightGray",hovered:!0,icon:"person-plus",iconColor:"darkGray",size:"sm"})})]}),A=(0,J.jsx)(c.so,{alignContent:"center",alignItems:"center",justifyContent:"start",children:(0,J.jsxs)(c.e2,{children:[(0,J.jsx)(c.$n,{accessibilityLabel:l._('Not now', 'postSavedPinBoardCollabUpsell.notNowLabel', 'Accessibility label for declining upsell'),color:"secondary",onClick:m,text:l._('Not now', 'postSavedPinBoardCollabUpsell.notNowLabel', 'Label for decline button on upsell')}),(0,J.jsx)(c.$n,{accessibilityLabel:l._('Invite', 'postSavedPinBoardCollabUpsell.inviteFriendsLabel', 'Accessibility label for inviting friends on upsell'),color:"primary",onClick:()=>{d(!0)},text:l._('Invite', 'postSavedPinBoardCollabUpsell.inviteFriendsLabel', 'Label for invite friends button on upsell')})]})});return(0,J.jsx)(c.Wd,{zIndex:new c.K5([new c.rk(1e3)]),children:r?(0,J.jsx)(Z.A,{children:(0,J.jsx)(et,{board:t,fromBoardCollabUpsell:!0,onDismiss:m})}):(0,J.jsx)(c.az,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{transform:g,transition:y,visibility:b,pointerEvents:f}},display:"flex",justifyContent:"center",marginBottom:5,marginTop:h,opacity:_,position:"fixed",width:"100%",children:(0,J.jsxs)(c.az,{color:n?void 0:"default",dangerouslySetInlineStyle:n?{__style:{backgroundColor:"var(--base-color-transparent)"}}:void 0,direction:"column",display:"flex",elevation:"shadowFloating",paddingY:4,rounding:400,smDirection:"row",children:[(0,J.jsxs)(c.az,{smDisplay:"flex",smMarginBottom:-3,smMarginTop:-3,width:"100%",wrap:!0,children:[(0,J.jsxs)(c.az,{alignItems:"center",direction:"column",display:"flex",flex:"shrink",justifyContent:"center",padding:4,smDirection:"row",smPaddingY:3,children:[I,(0,J.jsx)(c.az,{alignItems:"center",direction:"column",display:"flex",flex:"shrink",marginBottom:"auto",marginTop:"auto",smDisplay:"block",smMarginEnd:6,smMarginStart:2,children:(0,J.jsx)(c.az,{maxWidth:648,children:S})})]}),A]}),(0,J.jsx)(c.K0,{accessibilityLabel:"cancel",icon:"close",iconColor:"default",onClick:m,padding:4,size:"sm"})]})})})}var el=a(409652),en=a(541322),ei=a(629494),er=a(236503),eo=a(998317),es=a(961403),ed=a(878913),eu=a(3447),ec=a(777064),ep=a(204398),em=a(816964),eh=a(513010),e_=a(402489),ef=a(974694),eg=a(504252),ey=a(275953);let eb=(void 0!==l||(l=a(501978)).hash&&"03aa6b9cad1d5fb9b12a7c896ccdaffd"!==l.hash&&console.error("The definition of 'PinSaveRequestRepinWithSectionSuggestions_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),l),ev=(void 0!==n||(n=a(727999)).hash&&"6bd1eb83cfe5391288164b17cc5d85b7"!==n.hash&&console.error("The definition of 'PinSaveRequestRepinWithSectionSuggestions_shuffle_asset' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n);function eS(e){(0,s.useEffect)(()=>{(0,o.A)("PinSaveRequestRepinWithSectionSuggestions","/app/www/save/pin-to-board/PinToBoard/PinSaveRequestRepinWithSectionSuggestions.tsx")},[]);let{action:t,additionalCreateFields:a,boardWithSection:l,clientTrackingParams:n,children:i,onClose:r,pinKey:d,setCompletionPromise:u,shouldHideToast:c,shuffleAssetKey:p}=e,m=(0,C.A)(eb,d),h=(0,C.A)(ev,p);return(0,J.jsx)(ey.a,{action:t,additionalCreateFields:a,boardWithSection:l,clientTrackingParams:n,onClose:r,pinKey:m,setCompletionPromise:u,shouldShowToast:!c,showCreate:!0,shuffleAssetKey:h,urlPinInfo:null,children:e=>i(e)})}var eI=a(476257),eA=a(573211),ek=a(81920);function eP(e,t,a){var l;return(t="symbol"==typeof(l=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var l=a.call(e,t||"default");if("object"!=typeof l)return l;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?l:l+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let ex=(void 0!==i||(i=a(985455)).hash&&"30d8edb71deeb3f1a4abc132d299e97a"!==i.hash&&console.error("The definition of 'PinBetterSave_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),ew=(void 0!==r||(r=a(925878)).hash&&"1f53887e43dccddcc1fb109a988e5c3d"!==r.hash&&console.error("The definition of 'PinBetterSave_shuffle_asset' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r);function eC({ref:e,savedInfo:t,variant:a}){let l=(0,T.A)(),{closeupWithinMasonryEnabled:n}=(0,N._G)(),i="closeup"===a,r="boardless"===t.type?l._('Profile', 'PinBetterSave.PinBetterSaveSavedStatus.savedTitle', 'Text indicating saved to your profile'):t.title??"";return(0,J.jsx)(c.N_,{ref:e,href:t.url||"",onClick:({event:e})=>{e.stopPropagation()},children:(0,J.jsx)(c.az,{alignItems:i?"center":void 0,dangerouslySetInlineStyle:{__style:{color:n?"#FFF":"#333"}},"data-test-id":"saved-board-title",display:i?"flex":"block",marginEnd:4*!!i,marginStart:+!!i,minHeight:i?52:void 0,children:(0,J.jsx)(c.KJ,{align:i?"end":void 0,color:"cutout"===a||"media-viewer"===a?"light":"default",lineClamp:i?1:void 0,overflow:"breakAll",size:"300",weight:"bold",children:r})})})}class eE extends s.Component{constructor(...e){super(...e),eP(this,"state",{boardWithSection:null,createdBoard:null,suggestedBoardTitle:"",showBoardFlyout:!1,showRepinModal:!1,sensitiveContentNotice:null,showBoardCollabUpsell:!1,hasItemSelected:!1}),eP(this,"setBoardSaveCompletionPromise",e=>{let{createdBoard:t}=this.state;this._repinCompletionPromise=e,this._repinCompletionPromise.promise.then(e=>{if(!e.board)return;let{board:{id:a,name:l,url:n}}=e,i={boardId:a,title:l,url:n};this.updateSelectedBoardOrSection(i),this.updateSavedState({...i,localPinId:e.id}),this.props.onVisitButtonAnimate?.(),t&&(0,er.bh)(t.sensitivity)&&(0,eo.Ay)(t.sensitivity)?this.setState({sensitiveContentNotice:t.sensitivity.notices[0]}):this.handleRepinHide()})}),eP(this,"updateSavedState",e=>{let{currentHistoryStack:t,location:a,save:l,searchQueryInvalidated:n,onSave:i,pin:r}=this.props,o=(0,z.A)(a.search).q||(0,U.V)(t);l({pinId:r.entityId,nodeId:r.__id,boardId:e.boardId??"",localPinId:e.localPinId??"",score:e.score??void 0,sectionId:e.sectionId??"",title:e.title??"",type:e.type??"",url:e.url??""}),o&&n(o),i&&e.localPinId&&i()}),eP(this,"updateSelectedBoardOrSection",e=>{let{selectBoardOrSection:t,pin:a}=this.props;t({pinId:a.entityId,nodeId:a.__id,boardId:e.boardId??"",localPinId:e.localPinId??"",score:e.score??void 0,sectionId:e.sectionId??"",title:e.title??"",type:e.type??"",url:e.url??""})}),eP(this,"updateSelectedItem",()=>{let{initialSelection:e,selectedItem:t}=this.props;!t&&e&&(this.updateSelectedBoardOrSection(e),this.setState({hasItemSelected:!0}))}),eP(this,"dropdownRef",(0,s.createRef)()),eP(this,"boardSelectedRef",(0,s.createRef)()),eP(this,"handleItemChosen",e=>{this.updateSelectedBoardOrSection(e),this.hideFlyout(!0),this.save({item:e})}),eP(this,"handleBoardCreate",({title:e=""}={})=>{let{requireAuth:t,i18n:a}=this.props;if(t)return void t({loginModalHeader:(0,b.R2)(a)});this.hideFlyout(!0),this.setState(t=>({...t,suggestedBoardTitle:e,showRepinModal:!0}));let{onToggleFlyout:l}=this.props;l&&l(!0,!0)}),eP(this,"handleBoardCreated",e=>{this.setState({createdBoard:e});let{toastManagerContext:t}=this.props;this.isViewerEligibleForBoardCollabUpsell(e)&&(this.setState({showBoardCollabUpsell:!0}),(0,j.y1)().setItem(g.$0,+new Date),setTimeout(()=>t.showOneToast(({hideToast:t})=>(0,J.jsx)(ea,{board:e,hideToast:t})),4e3))}),eP(this,"handleRepinHide",()=>{this.setState(e=>({...e,suggestedBoardTitle:"",showRepinModal:!1}));let{onToggleFlyout:e}=this.props;e&&e(!1,!1)}),eP(this,"handleBoardDropdownClick",e=>{let{setAbortNoActionPlacementTimeout:t,pin:{entityId:a},viewParameter:l,viewType:n,clientTrackingParams:i,logContextEvent:r}=this.props;t(!0),e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation(),this.state.showBoardFlyout?this.hideFlyout(!0):(r({aux_data:{pin_id:a},component:13282,element:10960,event_type:101,object_id_str:a,view_parameter:l,view_type:n,clientTrackingParams:i}),this.showFlyout())}),eP(this,"handleSaveClick",async(e,t)=>{let{i18n:a,selectedItem:l,requireAuth:n}=this.props;if(n){e.stopPropagation(),n({loginModalHeader:(0,b.Mm)(a)});return}t||!l?this.handleBoardDropdownClick(e):(e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation(),this.logClickEvent({isSaveClick:!0}),await this.save({item:l}))}),eP(this,"logClickEvent",({isSaveClick:e})=>{let{clientTrackingParams:t,pin:a,selectedItem:l,viewType:n,viewParameter:i,logContextEvent:r,currentHistoryStack:o,viewer:s}=this.props,{trafficSource:d}=(0,m.A)(o,s?.isAuth??!1),u=l?.score?JSON.stringify([l.score]):void 0;r({event_type:101,...n?{view_type:n}:Object.freeze({}),...i?{view_parameter:i}:Object.freeze({}),component:13282,element:36,object_id_str:l?.boardId,clientTrackingParams:t,aux_data:{board_id:l?.boardId,grid_index:V.A,is_profile_save:l?.type==="boardless",is_undo:!e,pin_id:a.entityId,source:d,suggested_boards_score_list:u}})}),eP(this,"setBoardWithSection",e=>{this.setState({boardWithSection:e})}),eP(this,"handleEditSubmit",({boardId:e,sectionId:t,url:a,title:l})=>{let{savedInfo:n}=this.props,i=n?.localPinId;this.updateSavedState({localPinId:i||"",boardId:e,sectionId:t||"",url:a,title:l})}),eP(this,"resetPinSavedState",()=>{this.updateSavedState({boardId:"",localPinId:"",sectionId:"",title:"",url:""})}),eP(this,"deleteSavedState",({isDisableToast:e,newPinId:t})=>{let{clientTrackingParams:a,i18n:l,logContextEvent:n,onDelete:i,pin:r,toastManagerContext:o,unsave:s}=this.props;s({pinId:r.entityId,nodeId:r.__id}),t&&p.A.create("PinResource",{id:t,client_tracking_params:a}).callDelete().then(()=>{n({clientTrackingParams:a??void 0,event_type:3,object_id_str:t}),e||o.showToast(({hideToast:e})=>(0,J.jsx)(x.A,{dataTestId:"pin-better-save-removed-pin-toast",onHide:e,text:r.savedInfo?.boardId?l._('Removed from your board!', 'PinBetterSave.SavedPin.RemovedFromYourBoard', 'User removed their pin'):l._('Pin removed!', 'PinBetterSave.SavedPin.PinRemoved', 'User removed their pin')}))}),i&&i()}),eP(this,"save",async({item:e,movedBoardTitle:t})=>{let{onClickCallback:a,requireAuth:l,onVisitButtonAnimate:n}=this.props;if(l)return void l();n?.();let{addNewPinToPinsFeed:i,clientTrackingParams:r,currentHistoryStack:o,i18n:s,isLimitedLogin:d,logContextEvent:u,mostRecentBoard:c,pin:p,postRepinMoreIdeasUpsell:h,postRepinUpsellDisabled:_,save:g,setMostRecentBoard:y,toastManagerContext:b,showEmailVerificationReminderModal:v,mountAfterActionPlacement:S,pinnerBlockedByMe:I,viewer:k}=this.props;I||this.updateSavedState(e);let P=!!e.sectionId,w="boardless"===e.type,C=!1;try{let{resource_response:{data:l}}=await this.getPinResource(e).callCreate({showError:!1}),{trafficSource:n}=(0,m.A)(o,k?.isAuth??!1),d={source:n};null!=e.boardId&&(d.board_id=e.boardId),null!=e.boardPickerSuggestedBoards&&(d.board_picker_suggested_boards=e.boardPickerSuggestedBoards),u({aux_data:d,clientTrackingParams:r??void 0,event_type:5,object_id_str:l?.id||p.entityId||""});let v=e.url,{checkExperiment:I,incrementBoardPinCount:A,updateUserPinCount:E,viewerUserId:T}=this.props;!_&&v&&!w&&(({boardId:e,boardUrl:t,postRepinMoreIdeasUpsell:a})=>{if(!t)return!1;let{recentSaves:l,recentUpsell:n}=a;if(n[e])return!1;let i=l.findIndex(t=>t.boardId!==e);return(-1===i?l.length:i)+1>=3})({boardId:e.boardId??"",boardUrl:v,postRepinMoreIdeasUpsell:h})&&(b.showToast(({hideToast:t})=>(0,J.jsx)(Y,{boardId:e.boardId??"",boardName:e.title??"",boardUrl:v,onHide:t})),C=!0),g({pinId:p.entityId,nodeId:p.__id,boardId:e.boardId??(l.board.id||""),localPinId:l.id?l.id:e.localPinId??"",score:e.score??void 0,sectionId:e.sectionId??"",title:e.title??(l.board.title||""),type:e.type??"",url:e.url??(l.board.url||""),localPin:l}),this.props.onPinCreate&&this.props.onPinCreate({boardId:l.board.id,pinId:l.id}),A({boardId:e.boardId??"",sectionId:e.sectionId}),E(T);let D=e.sectionId?e.sectionId:e.boardId;w?(D=T,i(D,l.id,!1,w)):i(D??"",l.id,P,!1);let{id:B,images:R,board:j}=l,K=R["236x"];this.updateSavedState({...e,localPinId:B});let L=k?.isAuth&&k?.pinCount,z=k?.isAuth&&k?.boardCount,O=(2===L||3===L)&&z&&z<2,M=O?I("ap_dweb_first_board_creation").group:null,N=O?I("ap_dweb_res_user_first_board_creation",{dangerouslySkipActivation:!0}).group:null;if(N?.startsWith("enabled")||(M&&"control"!==M&&"enabled_three"!==M||2!==L)&&("enabled_four"!==M&&"enabled_genie"!==M||3!==L)||t)C||b.showToast(({hideToast:a})=>t?(0,J.jsx)(x.A,{onHide:a,text:(0,F.vQ)(s._('Moved to {{ boardName }}', 'PinBetterSave.SavedPin.MovedToBoard', 'User moved their pin. boardName: the board name where the pin is moved to'),{boardName:t}).join("")}):(0,J.jsx)(el.A,{boardName:(e.title||j.name)??"",boardUrl:e.url||j.url,isBoardlessPin:w,onHide:a,onUndo:()=>this.deleteSavedState({newPinId:B}),pinImageUrl:K.url}));else{let t=e=>{this.props.updateHeaderState?.({type:"showRepinAnimation",payload:e})};b.showOneToast(({hideToast:a})=>(0,J.jsx)(f.A,{boardId:e.boardId??"",boardUrl:e.url||j.url,firstBoardCreationExperimentEnabled:M?.startsWith("enabled"),imageUrl:p.images_474x?.url,onHide:a,showRepinAnimation:t,title:p.title,toastDuration:5e3}))}S("Save",{is_promoted:p.isPromoted,pin_id:p.entityId,repin_id:B}),c&&e.boardId!==c.id&&!w&&y(e.boardId??"",e.title??"",e.url??""),"function"==typeof a&&a(),setTimeout(()=>{this.boardSelectedRef.current?.focus()},0)}catch(t){let e=(0,A.A)(t,"message_detail")||(0,A.A)(t,"message")||"";(0,A.A)(t,"api_error_code")===D.f8?v():d||b.showToast(({hideToast:t})=>(0,J.jsx)(x.A,{dataTestId:"pin-save-error-toast",duration:5e3,onHide:t,text:e})),this.resetPinSavedState()}}),eP(this,"hideFlyout",(e=!1)=>{let{onToggleFlyout:t}=this.props;this.setState({showBoardFlyout:!1}),t&&t(!1,e)})}componentDidMount(){(0,o.A)("PinBetterSave","/app/www/common/PinBetterSave/PinBetterSave.tsx");let{autoQuicksaveCallback:e,onMount:t,shouldAutoQuicksave:a}=this.props;this.updateSelectedItem(),t&&t(),a&&(this.save({item:{boardId:"",url:"/me/",title:"Profile",type:"boardless"}}),e?.())}componentDidUpdate(){this.state.hasItemSelected||this.updateSelectedItem(),this.props.saveToBoardFromPostDownloadUpsell&&(this.showFlyout(),this.props.setSaveToBoardFromPostDownloadUpsell?.(!1))}getPinResource(e){let{carouselData:t,clientTrackingParams:a,pin:l,getStringifiedCommerceAuxData:n,shuffleAsset:i,currentHistoryStack:r,viewer:o}=this.props,s=t&&t.index,{trafficSource:d}=(0,m.A)(r,o?.isAuth??!1),u={carousel_slot_index:s||0,clientTrackingParams:a,description:l.description||"",image_base64:l.imageBase64,is_buyable_pin:!1,is_promoted:l.isPromoted,is_removable:l.promotedIsRemovable,link:l.link,pin_id:l.entityId||"",title:l.title||"",aux_data:{source:d},...i?{shuffle_asset:i.entityId}:{},...e.boardId&&"boardless"!==e.type?{board_id:e.boardId}:null,...e.sectionId?{section:e.sectionId}:null,...n(),...e.boardPickerSuggestedBoards?{aux_data:{board_picker_suggested_boards:e.boardPickerSuggestedBoards}}:{}};return p.A.create("RepinResource",u)}showFlyout(){let{onToggleFlyout:e}=this.props;this.setState({showBoardFlyout:!0}),e&&e(!0,!0)}isViewerEligibleForBoardCollabUpsell(e){let{viewer:t}=this.props;if(t?.isAuth&&e){if(!(0,K.A)(g.$0))return!1;let a=(0,j.y1)().getItem(g.$0)||"0",l=new Date,n=Number(a)<l.getTime()-6048e5,i=(t.boardCount??0)>=2&&(t.pinCount??0)>=3,r=!e.is_collaborative&&!!e.url&&e.url.split("/")[1]===t.username;return i&&r&&n}return!1}render(){let{boardResource:e,carouselData:t,clientTrackingParams:a,hideAlreadySavedMsg:l,onToggleModal:n,pin:i,popoverId:r,renderPinSaveTooltip:o,renderSavedStatus:s,savedInfo:d,savedCutout:u,selectedItem:p,unselectedText:m,variant:h,viewParameter:_,viewType:f,hideDropdown:g,showSaveToProfile:y,shuffleAsset:b,nodeRef:v,surface:S}=this.props,{boardWithSection:A,showBoardFlyout:k,showRepinModal:x,sensitiveContentNotice:w,suggestedBoardTitle:C}=this.state,E=d||u,{entityId:T,imageSignature:F}=i,{shouldAllowSaveToProfile:D,shouldSeePinBetterSave:R}=(0,eu.A)({dangerouslySkipActivation:!0}),j=(0,J.jsx)($.K$,{boardResource:e,clientTrackingParams:a,hideAlreadySavedMsg:l,imageSignature:F,onBoardCreate:this.handleBoardCreate,onItemChosen:this.handleItemChosen,pinId:T,selectedItem:p,setBoardWithSection:this.setBoardWithSection,showSaveToProfile:y||D,surfaceOriginViewParameter:_}),K=()=>{this.logClickEvent({isSaveClick:!1}),this.deleteSavedState({newPinId:E?.localPinId??""})},{checkExperiment:L}=(0,B.A)();return(0,J.jsx)(I.A,{name:"PinBetterSave",children:(0,J.jsxs)(c.az,{ref:v??void 0,"data-test-id":"pin-better-save-button",display:["closeup","media-viewer"].includes(h)?"flex":void 0,height:"closeup"===h||"media-viewer"===h?void 0:60,children:[E?.title?(0,J.jsx)(en.A,{clientTrackingParams:a,currentCarouselIndex:t&&t.index,onDeleteSavedState:K,onEditSubmit:this.handleEditSubmit,onToggleModal:n,pinId:E.localPinId,shouldUseLegoStyles:!0,surface:S,variant:h,viewParameter:_,children:s&&E&&s({ref:this.boardSelectedRef,savedInfo:E,variant:h})}):(0,J.jsx)(H.A,{accessibilityControls:r,accessibilityExpanded:k,accessibilityHaspopup:!0,clientTrackingParams:a,dropdownRef:this.dropdownRef,hideDropdown:g,isSaved:!!E?.boardId,onBoardDropdownClick:this.handleBoardDropdownClick,onSaveClick:e=>this.handleSaveClick(e,R),promotedIsLeadAd:i.promotedIsLeadAd,renderPinSaveTooltip:o,selectedItem:R?void 0:p,selectedTitle:p?.title,showBoardFlyout:k,showPromoteBanner:this.props.showPromoteBanner,surface:S,unselectedText:m,variant:h,viewParameter:_,viewType:f}),(0,J.jsx)(eS,{action:"create",additionalCreateFields:{is_stl_pin:(i.shoppingFlags??[]).includes(2)},boardWithSection:A,clientTrackingParams:a,onClose:this.handleRepinHide,pinKey:i,setCompletionPromise:this.setBoardSaveCompletionPromise,shouldHideToast:this.state.showBoardCollabUpsell,shuffleAssetKey:b??null,urlPinInfo:null,children:({boardSavedTo:e,dismissModal:t,displaySuccessAnimation:a,handleAbort:l,handleNewBoardAnimationCompletion:n,handleSaveToBoard:r,newPin:o,updateDescription:s,modalTitle:d,setModalTitle:u})=>{let c,p;if(!x)return null;let m=(c=b?.cutoutImages_236x??i.images_236x,(p=c?.url)?{url:p,name:i.title||null}:null);return!A&&L("dweb_board_create_glowup").anyEnabled?(0,J.jsx)(M.A,{boardCreateSource:"board_picker",images:m?[m]:void 0,initialValues:{boardName:C},onBoardCreate:e=>{this.handleBoardCreated(e),r(e)},onClose:()=>{l(),setTimeout(()=>{this.dropdownRef.current?.focus()},0)},pinId:i.entityId}):(0,J.jsx)(eI.A,{boardSavedTo:e,boardWithSection:A,dismissModal:()=>{t(),setTimeout(()=>{this.boardSelectedRef.current?.focus()},0)},displaySuccessAnimation:a,handleAbort:()=>{l(),setTimeout(()=>{this.dropdownRef.current?.focus()},0)},handleNewBoardAnimationCompletion:n,handleSaveToBoard:r,isInModal:!0,modalTitle:d,newPin:o,onBoardCreated:this.handleBoardCreated,pinKey:i,pwtAuxData:{pin_create_method:"repin"},sensitiveContentNotice:w,setModalTitle:u,shouldRenderContent:x,showCreate:!0,shuffleAssetKey:b??null,suggestedBoardTitle:C,updateDescription:s,urlPinInfo:null})}}),k&&(0,J.jsx)(c.Wd,{zIndex:new c.K5([ei.y]),children:(0,J.jsx)(c.AM,{anchor:this.dropdownRef.current,id:r,idealDirection:"down",onDismiss:()=>{this.hideFlyout(),this.dropdownRef.current?.focus()},positionRelativeToAnchor:!1,size:"xl",children:j})}),(0,J.jsx)(P.A,{placementId:1000578})]})})}}eP(eE,"defaultProps",{variant:"pin",renderSavedStatus:({ref:e,savedInfo:t,variant:a})=>(0,J.jsx)(eC,{ref:e,savedInfo:t,variant:a})});let eT=(0,s.memo)(function({pinKey:e,shuffleAssetKey:t,surface:a,...l}){let{logContextEvent:n}=(0,y.o)(),i=(0,T.A)(),r=(0,s.useId)(),o=(0,u.zy)(),c=(0,C.A)(ex,e),p=(0,C.A)(ew,t),m=c.selectedItem,f=(0,R.A)({name:"BoardPickerBoardsResource",options:{field_set_key:"board_picker"}}),g=(0,R.A)({name:"BoardPickerBoardsShortlistResource",options:{pin_id:c.entityId,shortlist_length:1,num_shortlist_suggestions:1,suggestions_only:!0,min_confidence:.5}}),b=(0,ed.y)()?.onPinCreate,I=(0,L.CG)(),{showEmailVerificationReminderModal:A}=(0,S.cL)(),P=(0,w.A)(),x=(0,d.wA)(),F=(0,d.d4)(({mostRecentBoard:e})=>e),{previous:D}=(0,E.qD)(),j=(0,E.V)(),K=(0,d.d4)(({ui:e})=>e.postRepinMoreIdeasUpsell),z=c&&c.board?.layout!=="default",{initialSelection:M}=l,U=M?.title||"",V=!0,{showEnabledSaveBehavior:$}=(0,ec.Ay)(P.isAuth&&P.id||""),H=(0,k.Ts)(),{setAbortNoActionPlacementTimeout:W}=(0,N._G)(),{checkExperiment:Y}=(0,B.A)(),{updateHeaderState:G}=(0,es.A)(),Q={boardId:"",title:i._('Profile', 'pinBetterSave.initialSelection.boardlessPinsOption', 'Option to save to profile without a board.'),type:"boardless",url:"/me/"},X=(0,v.A)();if(!M){let e=g&&g.data&&g.data[0];M=c.board?.name&&!z&&P.isAuth&&c.board.owner?.entityId===P.id&&{title:c.board.name,boardId:c.board.entityId,url:c.board.url??""}||c.recommendationReason?.board&&{title:c.recommendationReason.board.name??"",boardId:c.recommendationReason.board.entityId??"",url:c.recommendationReason.board.url??""}||g&&g.isLoaded&&e&&{boardId:e.id,score:JSON.parse(e?.recommendation_reason??"{}").score,title:e.name,url:e.url}||g&&g.isLoaded&&!e&&$&&Q||g&&g.isLoaded&&!e&&F&&{boardId:F.id,title:F.name,url:F.url}||void 0,U=g&&g.isLoaded?i._('Select', 'BetterSave label to pick a board from the list', 'BetterSave label to pick a board from the list'):"...",V=!1}M?.url?.includes("_quick_saves")&&(M=Q);let Z=(0,O.A)(c),ee=(0,_.UK)(),et=(0,eA.Y)(),ea=(0,s.useCallback)(e=>{let t="cutout"===l.variant?q.uW:q.UN;(0,ek.GV)(`web.closeup.media_viewer_stats.save.clicked_from.${l.variant}`),x(t(e)),et?.invalidateRepinFeedRefreshStatus(),ee?.onPinSave(e.pinId)},[l.variant,x,et,ee]),el=(0,s.useCallback)(e=>{let t="cutout"===l.variant?q.ne:q.jI;(0,ek.GV)(`web.closeup.media_viewer_stats.unsave.clicked_from.${l.variant}`),x(t(e)),ee?.onPinUnsave(e.pinId)},[l.variant,x,ee]),{triggerVisitButtonAnimation:en}=(0,h.r)();return(0,J.jsx)(eE,{...l,addNewPinToPinsFeed:(e,t,a,l)=>{let n=a?eg.A.BOARD_SECTION_PINS:eg.A.BOARDFEED;l&&(n=eg.A.BOARDLESS_PINS),x((0,eh.ZT)({feedId:e,feedType:n,itemIds:[t],itemType:"pin"}))},boardResource:f,carouselData:c&&c.carouselData,checkExperiment:Y,currentHistoryStack:j,getStringifiedCommerceAuxData:Z,i18n:i,incrementBoardPinCount:({boardId:e,sectionId:t})=>x((0,ep.zY)({boardId:e,sectionId:t,increment:1})),initialSelection:M,isLimitedLogin:P.isLimitedLogin,location:o,logContextEvent:n,mostRecentBoard:F,mountAfterActionPlacement:H,onPinCreate:b,onVisitButtonAnimate:en,pin:c,popoverId:r,postRepinMoreIdeasUpsell:K,postRepinUpsellDisabled:V,previousHistory:D,renderPinSaveTooltip:l.renderPinSaveTooltip,requireAuth:X,save:ea,savedCutout:c.savedCutout??void 0,savedInfo:c.savedInfo??void 0,searchQueryInvalidated:e=>x((0,em.KJ)(e)),selectBoardOrSection:e=>{x(("cutout"===l.variant?q.dD:q.PD)(e))},selectedItem:m??void 0,setAbortNoActionPlacementTimeout:W,setMostRecentBoard:(e,t,a)=>x((0,e_.x)(e,t,a)),showEmailVerificationReminderModal:A,showSaveToProfile:$,shuffleAsset:p,surface:a,toastManagerContext:I,unsave:el,unselectedText:U,updateHeaderState:G,updateUserPinCount:e=>x((0,ef.LR)({userId:e,increment:1})),viewer:P,viewerUserId:P.isAuth?P.id:""})})},541322(e,t,a){a.d(t,{A:()=>s});var l=a(61163),n=a(859471),i=a(19821),r=a(889416),o=a(562615);function s(e){(0,n.useEffect)(()=>{(0,l.A)("SavedStatus","/app/www/common/PinBetterSave/SavedStatus.tsx")},[]);let{clientTrackingParams:t,children:a,currentCarouselIndex:s,hidePinRepEditButton:d=!1,onDeleteSavedState:u,onEditSubmit:c,onToggleModal:p,pinId:m,variant:h,viewParameter:_,shouldUseLegoStyles:f,surface:g}=e;return(0,o.jsxs)(i.az,{alignItems:"center",direction:"row",display:"flex",maxHeight:"100%",paddingX:"closeup"!==h||f?void 0:2,width:"closeup"===h?"100%":void 0,children:[a&&(0,o.jsx)(i.az,{"data-test-id":"saved-info",flex:"grow",paddingX:1,children:a}),!d&&(0,o.jsx)(i.az,{flex:"none",marginStart:"auto",paddingX:1,children:(0,o.jsx)(r.default,{carouselSlotCurrentIndex:s,clientTrackingParams:t,component:0,onDelete:u,onSubmit:c,onToggleModal:p,pinId:m,shouldUseLegoStyles:f,style:"pin"===h?{bgColor:"default",iconColor:"default",size:"sm"}:{bgColor:"transparent",iconColor:"default",size:"sm"},surface:g,useLegoStyles:"pin"===h,viewParameter:_})})]})}},896575(e,t,a){a.d(t,{A:()=>d});var l=a(61163),n=a(859471),i=a(19821),r=a(562615);let o={__style:{margin:"0 10px",borderRight:"3px solid transparent",borderTop:"3px solid #fff",animation:"spin .8s linear infinite"}};function s(){return(0,r.jsx)(i.az,{alignItems:"center",color:"primary",display:"flex",height:"100%",justifyContent:"center",position:"absolute",rounding:800,width:"100%",children:(0,r.jsx)(i.az,{dangerouslySetInlineStyle:o,"data-test-id":"submit-button-spinner",display:"inlineBlock",height:18,position:"relative",rounding:"circle",width:18})})}function d({disabled:e,form:t,fullWidth:a,name:o,onClick:d,size:u,submitting:c,text:p}){return(0,n.useEffect)(()=>{(0,l.A)("SubmitButton","/app/www/common/SubmitButton/SubmitButton.tsx")},[]),(0,r.jsxs)(i.az,{"data-test-id":"submit-button",display:"flex",position:"relative",children:[c&&(0,r.jsx)(s,{}),(0,r.jsx)(i.$n,{color:"primary",disabled:e||c,form:t,fullWidth:a,name:o,onClick:d,size:u,text:p,type:"submit"})]})}},762512(e,t,a){a.d(t,{A:()=>p,Y:()=>m});var l=a(979638),n=a(607126),i=a(601185),r=a(844255),o=a(430705),s=a(813985),d=a(224723),u=a(971289),c=a(106301);function p(e){let{resource:t}=m(e);return t}function m(e){let{skipResourceCall:t}=e||{},{checkExperiment:a}=(0,i.A)(),{isAuthenticated:p}=(0,r._8)(),{pathname:m,search:h}=(0,l.zy)(),_=(0,u.qJ)(),f=!p||!_,g=(0,c.u)(),y=(0,n.A)(),b=(0,s.hr)({searchParams:g,sourceUrl:m+h,isDesktop:_,isAuthenticated:p,appliedUnifiedFilters:y}),v=f;f&&(v=!!p&&!a("unify_search_resource_auth_mweb").anyEnabled);let S=t||g.scope===d.cO.USERS&&!f||v;return{resource:(0,o.A)(S?null:b),options:b.options}}},424857(e,t,a){function l(e,t){return{type:"SECTION_ADDED",payload:{boardId:e,section:t}}}function n(e,t){return{type:"SECTION_DELETED",payload:{boardId:e,sectionId:t}}}a.d(t,{I4:()=>l,X2:()=>i,vb:()=>n});let i=(e,t)=>({type:"BOARD_SECTION_EDIT",payload:t})},94565(e,t,a){a.d(t,{A:()=>c});var l=a(427471),n=a(34830),i=a(703672),r=a(671931),o=a(424857),s=a(513010),d=a(517750),u=a(504252);function c({boardId:e,sourceBoardId:t="",sourceSectionId:a="",name:c,nameSource:p,pinImport:m,initialPinIds:h=[]},_,f,g){let y=0;"RECOMMENDATION"===p?y=1:"EDITED_RECOMMENDATION"===p&&(y=2);let b={board_id:e,initial_pins:m&&!m.all?m.pinIds:h,name:c,name_source:y,...f?{orbac_subject_id:f}:Object.freeze({})};return c=>l.A.create("BoardSectionResource",b).callCreate({showError:!1}).then(({resource_response:{data:l}})=>{g({event_type:7100,object_id_str:l.id}),c((0,o.I4)(e,l)),c((0,s.ZT)({feedId:e,feedType:u.A.BOARD_SECTIONS,itemIds:[l.id],itemType:"boardsection"})),c((0,r.A)(e,"pin_count")),c((0,i.Q5)("ApiResource",{url:`/v3/board/${e}/sections/all/`,data:{fields:n.A,orbac_subject_id:f}}));let{all:p,pinIds:h}=m||{all:!1,pinIds:[]};return p?new Promise((n,i)=>c((0,d.A)({inverseSelection:!0,selectedPinIds:h,source:{boardId:t||e,sectionId:a||null},target:{boardId:e,sectionId:l.id}},_)).then(()=>n(l)).catch(i)):(h.length>0&&c((0,s.J6)({feedId:e,feedType:u.A.BOARDFEED,itemIds:h,itemType:"pin"})),l)})}},955170(e,t,a){a.d(t,{Cv:()=>w,Im:()=>b,JQ:()=>x,XK:()=>g,ik:()=>y,lt:()=>_,mV:()=>f,s5:()=>v,sw:()=>I,tR:()=>C,y9:()=>S,z$:()=>P,z1:()=>k});var l,n,i,r,o,s,d,u=a(106386),c=a(825193),p=a(427471),m=a(586733),h=a(257300);let _=()=>{let e=(void 0!==l||(l=a(110619)).hash&&"850c5de9834cac0edfdd5652a78bffbf"!==l.hash&&console.error("The definition of 'collab_users_Mutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),l),[t]=(0,c.useMutation)(e),{logContextEvent:n}=(0,m.o)();return async(e,a,l)=>{let i={boardId:e,collaboratorIds:a,message:l||""};return await new Promise((a,l)=>{t({variables:{...i},onCompleted:(t,i)=>{i&&l(i[0]),n({event_type:28,object_id_str:e}),a()},onError:e=>l(e)})})}},f=()=>{let e=(void 0!==n||(n=a(805326)).hash&&"de392a939a95d05f7ee889fe77a9e52d"!==n.hash&&console.error("The definition of 'collab_emails_Mutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n),[t]=(0,c.useMutation)(e),{logContextEvent:l}=(0,m.o)();return async(e,a,n)=>{let i={boardId:e,emails:a,message:n||""};return await new Promise((a,n)=>{t({variables:{...i},onCompleted:(t,i)=>{i&&n(i[0]),l({event_type:28,object_id_str:e}),a()},onError:e=>n(e)})})}},g=()=>{let e=(void 0!==i||(i=a(921395)).hash&&"40ae8061007ba5f53a4570e43e4ca864"!==i.hash&&console.error("The definition of 'collab_ApproveInvite_Mutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),[t]=(0,c.useMutation)(e),{logContextEvent:l}=(0,m.o)();return async(e,a)=>{let n={boardId:e,userId:a};return await new Promise((a,i)=>{t({variables:{...n},onCompleted:(t,n)=>{n&&i(n[0]),l({event_type:32,object_id_str:e}),a(t)},onError:e=>i(e)})})}};function y(e,t){return async a=>{await (0,h.A)({url:`/v3/boards/${e}/collaborators/requests/ownership/`,method:"POST",data:{collaborator:t}}),a({type:"BOARD_OWNERSHIP_TRANSFER_REQUEST",payload:{boardId:e,collaboratorId:t}})}}function b(e,t){return async a=>{await (0,h.A)({url:`/v3/boards/${e}/collaborators/requests/ownership/`,method:"DELETE",data:{collaborator:t}}),a({type:"BOARD_OWNERSHIP_TRANSFER_REQUEST_CANCEL",payload:{boardId:e}})}}let v=(e,t)=>({type:"BOARD_INVITE_ACCEPTED_BY_VIEWER",payload:{boardId:e,collaboratingUser:t}}),S=()=>{let e=(void 0!==r||(r=a(883666)).hash&&"7005ce437a6a6ff33741ab44aa02cf61"!==r.hash&&console.error("The definition of 'collab_AcceptInvite_Mutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r),[t]=(0,c.useMutation)(e),{logContextEvent:l}=(0,m.o)();return async e=>{let a={boardId:e};return await new Promise((n,i)=>{t({variables:{...a},onCompleted:(t,a)=>{a&&i(a[0]),l({event_type:32,object_id_str:e}),n(t)},onError:e=>i(e)})})}},I=(e,t,a)=>async l=>{l(v(e,t)),(await p.A.create("BoardInviteResource",{board_id:e,invited_user_id:t.id}).callUpdate()).resource_response.error||a({event_type:32,object_id_str:e})};function A(e,t){return{type:"BOARD_REQUEST_TO_JOIN",payload:{boardId:e,value:t}}}let k=()=>{let e=(void 0!==o||(o=a(398907)).hash&&"9aa22a7713214239538142ad2c957cc3"!==o.hash&&console.error("The definition of 'collab_RequestToJoin_Mutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),o),[t]=(0,c.useMutation)(e),l=(0,u.wA)();return async e=>{let a={boardId:e};return await new Promise((n,i)=>{t({variables:{...a},onCompleted:(t,a)=>{a&&(l(A(e,!1)),i(a[0])),l(A(e,!0)),n(t)},onError:t=>{l(A(e,!1)),i(t)}})})}};function P(e,t){return a=>{(0,h.A)({url:"/v3/boards/{board}/collaborators/invite/{user}/",urlParams:{board:e,user:t},method:"DELETE"}).catch(()=>{a(A(e,!0))}),a(A(e,!1))}}let x=()=>{let e=(void 0!==s||(s=a(264770)).hash&&"c62e5df78917dd238b70f366f358d487"!==s.hash&&console.error("The definition of 'collab_DeclineOrDeleteBoardCollaboratorInvite_Mutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),s),[t]=(0,c.useMutation)(e),{logContextEvent:l}=(0,m.o)();return async(e,a,n)=>{let i={boardId:e,userId:a,ban:n||!1};return await new Promise((a,n)=>{t({variables:{...i},onCompleted:(t,i)=>{i&&n(i[0]),l({event_type:29,object_id_str:e}),a(t)},onError:e=>n(e)})})}},w=()=>{let e=(void 0!==d||(d=a(577762)).hash&&"2c3e1508650962adfff1171e950fa419"!==d.hash&&console.error("The definition of 'collab_RemoveBoardCollaborators_Mutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),d),[t]=(0,c.useMutation)(e),{logContextEvent:l}=(0,m.o)();return async(e,a)=>{let n={board:e,collaboratorIds:[a]};return await new Promise((a,i)=>{t({variables:{...n},onCompleted:(t,n)=>{n&&i(n[0]),l({event_type:29,object_id_str:e}),a(t)},onError:e=>i(e)})})}},C=()=>{let e=x(),t=w();return(a,l,n)=>async()=>{let{invited_user:l,status:i,board:{id:r}}=a;l&&("accepted"===i?await t(r,l.id):await e(r,l.id,n))}}},402489(e,t,a){a.d(t,{x:()=>l});let l=(e,t,a)=>({type:"MOST_RECENT_BOARD",payload:{id:e,name:t,url:a}})},911346(e,t,a){a.d(t,{A:()=>_});var l=a(61163),n=a(859471),i=a(593451),r=a(668014),o=a(693154),s=a(601185),d=a(430705),u=a(870540),c=a(847753),p=a(310540),m=a(562615);let h=(0,n.lazy)(()=>Promise.all([a.e("55896"),a.e("40006"),a.e("87204")]).then(a.bind(a,848052)));function _(e){(0,n.useEffect)(()=>{(0,l.A)("EditPinModalLoader","/app/www/save/EditPinModal/EditPinModalLoader.tsx")},[]);let t=(0,u.A)(),a=(0,o.A)(),_=(0,c.H7)(a,t),f=(0,s.A)(),g=f?.checkExperiment("aid_exp_minified_edit_pin_fixes_2025_11").anyEnabled,y=(0,n.useMemo)(()=>g?(0,p.sH)(e.pinId,!0,_):void 0,[g,e.pinId,_]),b=(0,d.A)({name:"PinResource",options:g?y:(0,p.sH)(e.pinId,!0,_)}),v=(0,n.useMemo)(()=>g&&b.data?{type:"Legacy",data:b.data}:void 0,[g,b.data]);return(0,m.jsx)(r.A,{name:"SafeSuspense_EditPinModalLoader_EditPinModal",children:(0,m.jsx)(n.Suspense,{children:b?.data?(0,m.jsx)(i.m,{pinKey:g&&v?v:{type:"Legacy",data:b.data},children:(0,m.jsx)(h,{...e,pin:b.data,pinIsLoaded:b.isLoaded})}):null})})}},755782(e,t,a){a.d(t,{A:()=>r});var l=a(106386),n=a(586733),i=a(948641);let r=({pinId:e,carouselSlotCurrentIndexProp:t,component:a,setShowEditModal:r})=>{let o,{logContextEvent:s}=(0,n.o)(),d=(0,i.A)(),u=(0,l.d4)(({pins:e})=>e),{carousel_data:c}=u&&e&&u[e]||{},{index:p}=c||{};return void 0!==t&&(o=p||t||0),{onClick:({event:e})=>{d?d():(e.stopPropagation(),s({event_type:101,element:3,...a?{component:a}:Object.freeze({})}),r(!0))},carouselSlotCurrentIndex:o}}},310540(e,t,a){function l(e){return!!(e&&e.trim().length)}function n(e,t){let a=l(e),n=l(t);return(a||n)&&e!==t}a.d(t,{$H:()=>n,sH:()=>i});let i=(e,t,a)=>({field_set_key:"detailed",id:e,preserve_component_state:t,...a?{orbac_subject_id:a}:Object.freeze({})})},952756(e,t,a){a.d(t,{A:()=>y});var l=a(61163),n=a(859471),i=a(106386),r=a(19821),o=a(743372),s=a(693154),d=a(538329),u=a(985761),c=a(870540),p=a(847753),m=a(896575),h=a(94565),_=a(562615);function f(e,t,a){var l;return(t="symbol"==typeof(l=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var l=a.call(e,t||"default");if("object"!=typeof l)return l;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?l:l+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class g extends n.Component{constructor(e){super(e),f(this,"onCreateSection",()=>{let{board:e,sourceBoard:t,sourceSection:a,dispatch:l,completeCreateSectionAction:n,pinImport:i,viewer:r,orbacActingAs:o,logContextEvent:s}=this.props,d=(0,p.H7)(r,o);return this.setState({isSaving:!0}),l((0,h.A)({boardId:e.id,sourceBoardId:t&&t.id,sourceSectionId:a&&a.id,name:this.state.inputName.trim(),pinImport:i},this.props.i18n,d,s)).then(e=>{this.setState({isSaving:!1}),n(e)}).catch(e=>{this.setState({createError:e.message_detail||e.message,isSaving:!1})})}),f(this,"handleKeyDown",({event:e})=>{let{createError:t,inputName:a}=this.state;[u.A.ENTER,u.A.NUMPAD_ENTER].includes(e.which)&&!t&&a.trim()&&this.onCreateSection()}),f(this,"handleChangeName",({value:e})=>{this.setState({createError:null,inputName:e})}),f(this,"handleInputRef",e=>{this.setState({inputRef:e})}),this.state={createError:null,inputName:e.initialName||"",inputRef:null,isSaving:!1}}componentDidUpdate(e,t){let{createError:a,inputRef:l}=this.state;l&&(!t.inputRef||a)&&l.focus()}render(){let{showTitle:e,positionRelative:t}=this.props,{createError:a,inputName:l,isSaving:n}=this.state,i=!!l.trim()&&!a;return(0,_.jsxs)(r.az,{bottom:!0,color:"default",dangerouslySetInlineStyle:{__style:{borderLeft:"1px solid #f5f5f5"}},direction:"column",display:"flex",flex:"grow",position:t?"relative":"absolute",right:!0,rounding:200,top:!0,width:"100%",children:[e&&(0,_.jsx)(r.az,{marginTop:3,paddingX:6,paddingY:3,children:(0,_.jsx)(r._Y,{size:"400",children:this.props.i18n._('Add section', 'Title in the add section modal', 'Title in the add section modal')})}),(0,_.jsxs)(r.az,{padding:4,children:[(0,_.jsx)(r.az,{marginBottom:2,children:(0,_.jsx)(r.JU,{htmlFor:"sectionEditName",children:(0,_.jsx)(r.KJ,{color:a?"error":"subtle",size:"200",children:this.props.i18n._('Name', 'Board section name', 'Board section name')})})}),(0,_.jsx)(r.az,{children:(0,_.jsx)(r.az,{ref:this.handleInputRef,children:(0,_.jsx)(r.A_,{errorMessage:a||"",id:"sectionEditName",name:"sectionName",onChange:this.handleChangeName,onKeyDown:this.handleKeyDown,placeholder:this.props.i18n._('Like "Lighting"', 'Placeholder for board section name', 'Placeholder for board section name'),size:"lg",type:"text",value:l})})})]}),(0,_.jsx)(r.so,{alignItems:"stretch",flex:"grow",justifyContent:"start"}),(0,_.jsx)(r.az,{padding:4,children:(0,_.jsx)(r.so,{alignItems:"stretch",justifyContent:"end",children:(0,_.jsx)(m.A,{disabled:!i||n,onClick:this.onCreateSection,submitting:n,text:this.props.i18n._('Add', 'add a new section', 'add a new section')})})})]})}componentDidMount(){(0,l.A)("CreateSectionPane","/app/www/save/pin-to-board/CreateSectionPane/CreateSectionPane.tsx")}}let y=function(e){let t=(0,i.wA)(),a=(0,d.A)(),l=(0,s.A)(),n=(0,c.A)();return(0,_.jsx)(g,{...e,dispatch:t,i18n:a,logContextEvent:(0,o.A)(),orbacActingAs:n,viewer:l})}},239092(e,t,a){a.d(t,{A:()=>s});var l=a(61163),n=a(859471),i=a(19821),r=a(598948),o=a(562615);function s({url:e,description:t,color:a}){return(0,n.useEffect)(()=>{(0,l.A)("ImagelessPinImage","/app/www/save/pin-to-board/ImagelessPinImage/ImagelessPinImage.tsx")},[]),a=a||"#8fa7bf",(0,o.jsx)(i.az,{dangerouslySetInlineStyle:{__style:{background:a}},height:216,rounding:200,width:"100%",children:(0,o.jsxs)(i.az,{maxHeight:200,overflow:"hidden",padding:4,children:[e&&(0,o.jsx)(i.az,{marginBottom:2,children:(0,o.jsx)(i.KJ,{color:"inverse",size:"100",children:(0,r.A)(e).hostname||e})}),(0,o.jsx)(i.az,{maxHeight:144,children:(0,o.jsx)(i.KJ,{color:"inverse",overflow:"normal",weight:"bold",children:t})})]})})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/93705-3ee148af4aa96f6f.mjs.map